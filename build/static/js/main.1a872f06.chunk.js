(this["webpackJsonpmedical-inventory"]=this["webpackJsonpmedical-inventory"]||[]).push([[0],{114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(42),l=a.n(i),c=(a(90),a(8)),s=a(4),u=a(6),d=a(3),m=a(2),p=a(9),f=(a(15),a(1)),h=a(7),v=a(5),g=a(18);a(95);!function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.INFO_NO_BUTTONS=3]="INFO_NO_BUTTONS"}(n||(n={}));var b,E=a(13),y=a(164),N=(a(29),function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)}),C=Object(y.a)()(b=function e(){var t=this;Object(f.a)(this,e),this.container=void 0,this.setContainer=function(e){t.container=e},this.showInfo=function(e,a){t.container.isShown?N((function(){t.showInfo(e,a)}),500):t.container.show(n.INFO,e,a,!0,console.info)},this.showWarning=function(e,a){t.container.isShown?N((function(){t.showWarning(e,a)}),500):t.container.show(n.WARNING,e,a,!0,console.info)},this.showError=function(e,a){var r;t.container.isShown?N((function(){t.showError(e,a)}),500):(a instanceof Error?r=a.message:("string"===typeof a&&a.trim().toLowerCase().startsWith("<!doctype html")&&(r=o.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}})),r="object"===typeof a?a.result:a&&""!==a.trim()?a.trim():"Unexpected error"),t.container.show(n.ERROR,e,r,!0,(function(){}),(function(){}),"Ok"))},this.showConfirmDanger=function(e,a){return t.showConfirm(e,a,n.ERROR)},this.showConfirmWarning=function(e,a){return t.showConfirm(e,a,n.WARNING)},this.showConfirm=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.INFO;return new Promise((function(n,o){t.container.isShown?N((function(){t.container.show(r,e,a,!1,(function(e){n(!0)}),(function(e){n(!1)}))}),500):t.container.show(r,e,a,!1,(function(e){n(!0)}),(function(e){n(!1)}))}))},this.dismissAlert=function(){t.container.dismissAlert()},this.showContent=function(e,a){return new Promise((function(n,o){var i={close:function(){}},l=Object(r.createElement)(a.type,Object(E.a)(Object(E.a)({},a.props),{},{closeObserver:i}));t.container.showNoButtons(e,l,(function(e){n(!1)}),i)}))}})||b,O=function e(){Object(f.a)(this,e),this.backColor="transparent",this.marginTop="-560px"};function w(e){var t={transitionDuration:"250ms",backgroundColor:e.bgColor};return o.a.createElement("div",{className:"modal-backdrop",style:t})}function j(e){return o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{ref:e.yesButton,type:"button",onClick:e.onConfirm,className:"btn btn-outline-primary"},e.yesLabel),e.yesOnly?null:o.a.createElement("button",{ref:e.cancelButton,type:"button",onClick:e.onCancel,className:"btn btn-outline-secondary"},"No"))}function S(e){return o.a.createElement("div",{className:"modal-header "+e.className},o.a.createElement("h5",{className:"modal-title",id:"exampleModalCenterTitle"},e.title),o.a.createElement("button",{onClick:e.onClose,type:"button",className:"close btn btn-text text-light"},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-times"}))))}var k,D,P,T,I,F,L,A,x,R=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).yesButton=o.a.createRef(),n.cancelButton=o.a.createRef(),n.state=new O,n.onConfirm=function(e){n.close((function(){n.props.onConfirm(e)}))},n.close=function(e){N((function(){n.setState({backColor:"transparent",marginTop:"-560px"},(function(){N(e,100)}))}),100)},n.onCancel=function(e){n.close((function(){n.props.onCancel&&n.props.onCancel(e)}))},n.onClose=function(e){n.close((function(){n.props.onClose(e)}))},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type===n.ERROR||this.props.type===n.WARNING;!t&&this.yesButton.current?this.yesButton.current.focus():t&&this.cancelButton.current?this.cancelButton.current.focus():t&&this.yesButton.current&&this.yesButton.current.focus(),N((function(){var t=e.stringContent?"30vh":"0vh";e.setState({backColor:"rgba(100,100,100,0.7)",marginTop:t})}),100)}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=!0===this.props.yesOnly,a=this.stringContent?"500px":"85vw",i={transitionDuration:"250ms",marginTop:this.state.marginTop,maxWidth:a,marginLeft:"auto",marginRight:"auto"},l=this.stringContent?"modal-dialog -modal-dialog-centered":"-modal-dialog-centered";return o.a.createElement(r.Fragment,null,o.a.createElement(w,{bgColor:this.state.backColor}),o.a.createElement("div",{className:"modal show d-block"},o.a.createElement("div",{className:l,style:i},o.a.createElement("div",{className:"modal-content mt-5"},o.a.createElement(S,{className:this.headerClassName,title:e,onClose:this.onClose}),o.a.createElement("div",{className:"modal-body",style:{maxHeight:"70vh",overflow:"auto"}},this.props.children),this.props.type===n.INFO_NO_BUTTONS?o.a.createElement("div",{className:"modal-footer "},o.a.createElement("h6",{className:"w-100 text-center"},"Medical Inventory")):o.a.createElement(j,{cancelButton:this.cancelButton,yesLabel:this.props.yesLabel,yesButton:this.yesButton,yesOnly:t,onConfirm:this.onConfirm,onCancel:this.onCancel})))))}},{key:"stringContent",get:function(){return"string"===typeof this.props.children}},{key:"headerClassName",get:function(){switch(this.props.type){case n.INFO:case n.INFO_NO_BUTTONS:return"bg-info text-light";case n.WARNING:return"bg-warning text-dark";case n.ERROR:return"bg-danger text-light";default:return"bg-secondary"}}}]),a}(r.Component),M=(k=Object(h.resolve)(C),D=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(f.a)(this,a),(r=t.call(this,e)).dialogTitle=void 0,r.dialogContent=void 0,r.dialogYesOnly=void 0,r.yesLabel="Yes",r.dialogOnConfirm=void 0,r.dialogOnCancel=void 0,r.onCloseCallback=void 0,r.dialogType=n.INFO,Object(c.a)(r,"dialogService",P,Object(u.a)(r)),r.ref=o.a.createRef(),r.dismissAlert=function(){r.ref.current?r.ref.current.close((function(){r.setState({show:!1})})):r.setState({show:!1})},r.dialogOnClose=function(e){r.setState({show:!1},(function(){r.onCloseCallback&&r.onCloseCallback(e),r.resetProps()}))},r.resetProps=function(){r.onCloseCallback=void 0,r.yesLabel="Yes"},r.showNoButtons=function(e,t,a,o){r.dialogType=n.INFO_NO_BUTTONS,r.dialogTitle=e,r.dialogContent=t,o&&(o.close=r.dismissAlert),r.display()},r.show=function(e,t,a,n,o,i,l){r.dialogType=e,r.dialogTitle=t,r.dialogContent=a,r.dialogYesOnly=n,r.yesLabel=l||r.yesLabel,r.dialogOnConfirm=function(e){r.dismissAlert(),o(e)},r.onCloseCallback=i,n||(r.dialogOnCancel=function(e){r.dismissAlert(),i&&i(e)}),r.display()},r.state={show:!1},r}return Object(s.a)(a,[{key:"setContent",value:function(e){this.dialogContent=e,this.forceUpdate()}},{key:"componentDidMount",value:function(){this.dialogService.setContainer(this)}},{key:"display",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return this.state.show?o.a.createElement(R,{ref:this.ref,title:this.dialogTitle,yesOnly:this.dialogYesOnly,onConfirm:this.dialogOnConfirm,onCancel:this.dialogOnCancel,onClose:this.dialogOnClose,type:this.dialogType,yesLabel:this.yesLabel},this.dialogContent):null}},{key:"isShown",get:function(){return this.state.show}}]),a}(r.Component),P=Object(p.a)(D.prototype,"dialogService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D),_=a(17),U=function e(){Object(f.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.nulledFields=void 0},H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(U),Y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.address=void 0,e.monthlyProductCount=void 0,e}return a}(U),B=Object(y.a)()(T=function e(){var t=this;Object(f.a)(this,e),this.container=void 0,this.setContainer=function(e){return t.container=e},this.start=function(){var e,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=t.container)||void 0===e||e.start(a)},this.stop=function(){var e;null===(e=t.container)||void 0===e||e.stop()}})||T,W=(I=Object(h.resolve)(C),F=Object(h.resolve)(B),L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"dialog",A,Object(u.a)(n)),Object(c.a)(n,"loading",x,Object(u.a)(n)),n.parentApp=void 0,n.state={},n.getInventoryData=function(){return n.props.inventoryData},n.getInventoryConfig=function(){return n.props.inventoryConfig},n.getMasterHealthCenter=function(){var e;return null!==(e=n.props.masterHealthCenter)&&void 0!==e?e:new Y},n.setPageTitle=function(e){document.title=e},n.getApplicationProfile=function(){return null==n.props.applicationProfile?new H:n.props.applicationProfile},n.handleInputChange=function(e){var t,a=e.target;t=a instanceof HTMLInputElement&&"checkbox"===a.type?a.checked:a.value,n.setState(Object(_.a)({},a.name,t))},n.doAjax=function(e,t,a,r){n.startLoading(t);for(var o=arguments.length,i=new Array(o>4?o-4:0),l=4;l<o;l++)i[l-4]=arguments[l];e.apply(void 0,i).then((function(e){a&&a(e)})).catch((function(e){r?r(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(e){n.endLoading()}))},n.scrollTop=function(){var e={top:0,behavior:"smooth"};N((function(){window.scrollTo(e)}),100)},n.commonAjax=function(e,t,a){for(var r,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(r=n).doAjax.apply(r,[e,!1,t,a].concat(i))},n.commonAjaxWithProgress=function(e,t,a){for(var r,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(r=n).doAjax.apply(r,[e,!0,t,a].concat(i))},n.getLoggedUser=function(){var e=n.props.loggedUser;if(e)return e.password="^_^",e},n.isUserLoggedIn=function(){return 1==n.props.loginStatus&&null!=n.props.loggedUser},n.showConfirmation=function(e){return n.dialog.showConfirm("Konfirmasi",e)},n.showConfirmationDanger=function(e){return n.dialog.showConfirmDanger("Konfirmasi",e)},n.showCommonErrorAlert=function(e){var t;console.error(e),e.response&&e.response.data?(console.error("e.response: ",e.response),t=e.response.data.message):t=e,n.showError("Operation Failed: "+t)},n.state=Object(E.a)({},n.state),n.parentApp=n.props.mainApp,n}return Object(s.a)(a,[{key:"startLoading",value:function(e){this.loading.start(e)}},{key:"endLoading",value:function(){this.loading.stop()}},{key:"showInfo",value:function(e){this.dialog.showInfo("Information",e)}},{key:"showError",value:function(e){this.dialog.showError("Error",e)}},{key:"refresh",value:function(){this.forceUpdate()}}]),a}(r.Component),A=Object(p.a)(L.prototype,"dialog",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(p.a)(L.prototype,"loading",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L),q=function(e){return{applicationProfile:e.userState.applicationProfile,masterHealthCenter:e.userState.masterHealthCenter,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp,inventoryData:e.appState.inventoryData,inventoryConfig:e.appState.inventoryConfig}},z=a(39),V={mainApp:void 0,inventoryData:void 0,inventoryConfig:void 0},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(E.a)(Object(E.a)({},e),{},{mainApp:t.payload});case"SET_INVENTORY_DATA":return Object(E.a)(Object(E.a)({},e),{},{inventoryData:t.payload.inventoryData,inventoryConfig:t.payload.inventoryConfig});default:return e}},G={loginKey:null,loginStatus:!1,loginFailed:!1,loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:new H,masterHealthCenter:new Y,assetsPath:"/"},X=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(E.a)(Object(E.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer&&n.payload.referer.refresh(),r;case"do_login":return r=Object(E.a)(Object(E.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(E.a)(Object(E.a)({},a),{},{loginStatus:!1,loggedUser:null}),fe(null),r;case"refresh_login":return r=Object(E.a)(Object(E.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"get_logged_user":return r=Object(E.a)(Object(E.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(E.a)(Object(E.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(E.a)(Object(E.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(E.a)({},a)}},Q={},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return e},Z=Object(z.b)({appState:K,userState:X,servicesState:J}),$={appState:V,userState:G,servicesState:Q},ee=a(28),te=a.n(ee),ae=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;te.a.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),o=!0),pe(t);var i=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.user}});delete i.meta,e.dispatch(i)})).catch(console.log).finally((function(){n.endLoading()}))}}},ne=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=se();te.a.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},re=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;te.a.post(a.meta.url,a.payload,{headers:se()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(){return n.endLoading()}))}}},oe=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},ie=null,le=function(){return ie},ce=function(){return ie=Object(z.c)(Z,$,Object(z.a)(ae,re,ne,oe))},se=function(){return{"Content-Type":"application/json",requestId:de(),Authorization:"Bearer "+me()}},ue="medical-inventory-login-key",de=function(){var e=le();return null==e?"":e.getState().userState.requestId},me=function(){return ve(ue)},pe=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];he(ue,t)}},fe=function(e){he(ue,e)},he=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},ve=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},ge="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,be=ge?"/medicalinventory/":document.getElementById("rootPath").value,Ee=function(){var e=ge?"http://localhost:8080".concat(be):be;return e},ye=function(){return function(){var e=le();return null==e?"":e.getState().userState.assetsPath}()+"images/"},Ne=Ee(),Ce=Ne+"api/app/account/",Oe=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:Ce.concat("logout")}}},we=a(10),je=1,Se=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++je+"-"+e},ke=function(){var e=(new Date).getHours();return"Selamat "+(e>=3&&e<11?"Pagi":e>=11&&e<15?"Siang":e>=15&&e<18?"Sore":"Malam")};function De(e){return new String(e).toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}var Pe=function(e){return e>=10?e.toString():"0"+e},Te=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=Se(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e}return a}(U);Te.defaultMenuIconClassName="fas fa-folder",Te.getIconClassName=function(e){return void 0==e.menuClass?Te.defaultMenuIconClassName:e.menuClass};var Ie=[],Fe=[Object.assign(new Te,{code:"home",name:"Beranda",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1}),Object.assign(new Te,{code:"dashboard",name:"Dasbor",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"dashboard_info",name:"Info Persediaan",url:"info",menuClass:"fas fa-info-circle"},{code:"productstat",name:"Statistik Produk",url:"productstat",menuClass:"fas fa-chart-line"},{code:"productstatdetail",name:"Statistik Produk Detail",url:"productstatdetail",menuClass:"fas fa-chart-line"}]}),Object.assign(new Te,{code:"inventory",name:"Persediaan",url:"/inventory",menuClass:"fas fa-warehouse",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"inventory_stocks",name:"Stok",url:"stock",menuClass:"fas fa-archive"},{code:"inventory_status",name:"Status",url:"status",menuClass:"fa fa-exclamation-circle"},{code:"stockfilter",name:"Filter Stok",url:"stockfilter",menuClass:"fas fa-layer-group"},{code:"report",name:"Laporan",url:"report",menuClass:"fas fa-file-alt"}]}),Object.assign(new Te,{code:"transaction",name:"Transaksi",url:"/transaction",menuClass:"fas fa-book",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"transaction_in",name:"Pasokan",url:"productin",menuClass:"fas fa-arrow-down"},{code:"transaction_out",name:"Distribusi",url:"productout",menuClass:"fas fa-arrow-up"},{code:"transaction_detail",name:"Detail",url:"detail",menuClass:"fas fa-file-alt"},{code:"transaction_related_record",name:"Related Record",url:"relatedrecord",menuClass:"fas fa-code-branch"}]}),Object.assign(new Te,{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0}),Object.assign(new Te,{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"user_profile",name:"Profil Pengguna",menuClass:"fas fa-user-cog",url:"user-profile"},{code:"app_profile",name:"Setting Aplikasi",menuClass:"fas fa-cog",url:"app-profile"},{code:"inventory_config",name:"Konfigurasi Persediaan",menuClass:"fas fa-cog",url:"inventory-config"}]})],Le=(a(114),function e(){Object(f.a)(this,e),this.showNavLinks=!1}),Ae=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=new Le,e.toggleNavLinks=function(){e.setState({showNavLinks:!e.state.showNavLinks})},e.onLogout=function(t){var a=Object(u.a)(e);a.showConfirmation("Logout?").then((function(e){e&&a.props.performLogout(a.parentApp)}))},e.setMenu=function(t){e.setState({showNavLinks:!1}),e.props.setMenu(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=function(){if(Ie.length>0)return Ie;Ie=[];for(var e=0;e<Fe.length;e++){var t=Fe[e];Ie.push(t)}return Ie}(),n=this.getLoggedUser();return o.a.createElement("header",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},o.a.createElement(xe,{label:this.getApplicationProfile().name}),o.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark w-100"},o.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),o.a.createElement("button",{onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button"},o.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),o.a.createElement("div",{className:"collapse navbar-collapse ".concat(t?"show":""),id:"navbarToggler"},o.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;var a="nav-item "+(e.props.activeMenuCode==t.code?"active nav-active":"nav-inactive");return o.a.createElement("li",{key:"header-menu-"+new String(t.code),className:a},o.a.createElement(we.b,{onClick:function(){return e.setMenu(t)},className:"nav-link",to:t.url},o.a.createElement("span",null,t.name)))}))),o.a.createElement("form",{className:"form-inline my-2 my-lg-0"},o.a.createElement(Re,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(W),xe=function(e){return o.a.createElement("div",{id:"navbar-brand-top",className:"container-fluid pl-1"},o.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},o.a.createElement("strong",null,e.label)))},Re=function(e){return e.user?o.a.createElement(r.Fragment,null,o.a.createElement(we.b,{onClick:e.setMenuNull,className:"btn btn-light btn-sm my-2 mr-2 my-sm-0",to:"/settings/user-profile"},o.a.createElement("img",{width:"20",src:ye()+e.user.profileImage,className:"rounded rounded-circle mr-2"}),o.a.createElement("span",null,e.user.displayName)),o.a.createElement("a",{className:"btn btn-danger btn-sm  my-2 my-sm-0 mr-2",onClick:e.onLogout},o.a.createElement("i",{className:"fas fa-sign-out-alt mr-2"}),"Logout")):o.a.createElement(we.b,{onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0 mr-2",to:"/login"},o.a.createElement("i",{className:"fas fa-sign-in-alt mr-2"}),o.a.createElement("span",null,"Login"))},Me=Object(g.g)(Object(v.b)(q,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Ae)),_e=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(f.a)(this,a),(r=t.call(this,e)).title=void 0,r.title=n,r.title&&(document.title=r.title),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop()}},{key:"userGreeting",value:function(){var e;return o.a.createElement(o.a.Fragment,null,ke(),", ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),o.a.createElement("hr",null))}},{key:"titleTag",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,this.title," ",null!==e&&void 0!==e?e:""),o.a.createElement("hr",null))}}]),a}(W),Ue=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e,"Dasbor")}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"section-body container-fluid"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting()))}}]),a}(_e),He=Object(g.g)(Object(v.b)(q)(Ue)),Ye=function e(){Object(f.a)(this,e),this.limit=void 0,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.beginsWith=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter={},this.dayTo=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.ignoreEmptyValue=!1,this.filterExpDate=!1,this.flag=e.FLAG_DEFAULT,this.useExistingFilterPage=!1};Ye.FLAG_ALL="ALL",Ye.FLAG_DEFAULT="DEFAULT",Ye.validateFieldsFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}},Ye.setOrderPropertyFromDataSet=function(e,t){t.orderby&&(e.orderBy=t.orderby),t.ordertype&&(e.orderType=t.ordertype)},Ye.setFieldsFilterValue=function(e,t,a){void 0==e.fieldsFilter&&(e.fieldsFilter={}),e.fieldsFilter[t]=a},Ye.setFieldsFilterValueFromInput=function(e,t){var a=t.name,n=t.value;Ye.setFieldsFilterValue(e,a,n)};var Be=function(e){var t;if(!1===e.show)return null;var a="vertical"==e.orientation?"vertical":"horizontal";return o.a.createElement("div",{style:e.style,className:"form-group "+e.className+" "+("vertical"==a?"":"row")},o.a.createElement("label",{className:"vertical"==a?"":"col-sm-3"},o.a.createElement("strong",null,null!==(t=e.label)&&void 0!==t?t:null)),o.a.createElement("div",{className:"vertical"==a?"":"col-sm-9"},e.children))},We=["Januari","Februari","Maret","April","Mei","Juni","Juli","Ahustus","September","Oktober","November","Desember"],qe=[31,29,31,30,31,30,31,31,30,31,30,31],ze=[31,28,31,30,31,30,31,31,30,31,30,31],Ve=function(e,t){return t%4==0?qe[e]:ze[e]},Ke=function(e){return[e.getFullYear(),Pe(e.getMonth()+1),Pe(e.getDate())].join("-")};var Ge,Xe,Qe,Je,Ze,$e,et,tt,at=(new Date).getFullYear(),nt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).getDayToArray=function(){for(var t,a,n=e.props.filter,r=Ve(null!==(t=n.monthTo)&&void 0!==t?t:1,null!==(a=n.yearTo)&&void 0!==a?a:at),o=[],i=1;i<=r;i++)o.push(i);return o},e.getDayFromArray=function(){for(var t,a,n=e.props.filter,r=Ve(null!==(t=n.month)&&void 0!==t?t:1,null!==(a=n.year)&&void 0!==a?a:at),o=[],i=1;i<=r;i++)o.push(i);return o},e.render=function(){var t,a,n,i,l,c,s=e.props.filter,u=1==e.props.withDay;return o.a.createElement(r.Fragment,null,u?o.a.createElement(Be,{label:"Day"},o.a.createElement("select",{onChange:e.props.onChange,name:"day",value:null!==(t=s.day)&&void 0!==t?t:1,className:"form-control"},e.getDayFromArray().map((function(e){return o.a.createElement("option",{key:"day-from-"+e,value:e},e)})))):null,o.a.createElement(Be,{label:"Month"},o.a.createElement("select",{onChange:e.props.onChange,value:null!==(a=s.month)&&void 0!==a?a:1,name:"month",className:"form-control"},We.map((function(e,t){return o.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),o.a.createElement(Be,{label:"Year"},o.a.createElement("input",{onChange:e.props.onChange,name:"year",type:"number",value:null!==(n=s.year)&&void 0!==n?n:at,className:"form-control"})),e.props.fullPeriod?o.a.createElement(r.Fragment,null,u?o.a.createElement(Be,{label:"Day"},o.a.createElement("select",{onChange:e.props.onChange,name:"dayTo",value:null!==(i=s.dayTo)&&void 0!==i?i:1,className:"form-control"},e.getDayToArray().map((function(e){return o.a.createElement("option",{key:"day-from-"+e,value:e},e)})))," "):null,o.a.createElement(Be,{label:"Month To"},o.a.createElement("select",{onChange:e.props.onChange,value:null!==(l=s.monthTo)&&void 0!==l?l:1,name:"monthTo",className:"form-control"},We.map((function(e,t){return o.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),o.a.createElement(Be,{label:"Year To"},o.a.createElement("input",{onChange:e.props.onChange,name:"yearTo",type:"number",value:null!==(c=s.yearTo)&&void 0!==c?c:at,className:"form-control"}))):null)},e}return a}(r.Component),rt=a(44),ot=a(84),it=function(e){var t;if(0==e.show)return null;var a=null!==(t=e.className)&&void 0!==t?t:"btn btn-outline-secondary";return o.a.createElement("a",Object.assign({style:e.style,onClick:e.onClick,className:a},e.attributes),e.iconClassName&&o.a.createElement("i",{className:"".concat(e.iconClassName," ").concat(e.children?"mr-2":"")}),e.children)},lt=function(e){var t,a=Object(r.useState)(!0),n=Object(ot.a)(a,2),i=n[0],l=n[1];if(!1===e.show)return null;var c=null!==(t=e.title)&&void 0!==t?t:"Title";if(!0===e.toggleable&&!i)return o.a.createElement(it,{style:{marginBottom:"10px"},onClick:function(){return l(!0)},iconClassName:"fas fa-angle-down"},"Show ",c);var s=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(rt.a)(e,["style","show","footerContent","toggleable"])}(e);return o.a.createElement("div",Object.assign({},s,{className:"modal-content ",style:Object(E.a)(Object(E.a)({},e.style),{},{marginBottom:"10px"})}),o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},c),e.toggleable&&o.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:function(){return l(!1)},"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},o.a.createElement("i",{className:"fas fa-times"})))),o.a.createElement("div",{className:"modal-body"},e.children),e.footerContent||!0===e.showFooter?o.a.createElement("div",{className:"modal-footer"},e.footerContent):null)},ct=function e(){Object(f.a)(this,e),this.name="",this.data=new Blob,this.dataUrl=""},st=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){te.a.post(e,a,{headers:se()}).then((function(e){pe(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},ut=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){te.a.post(e,a,{responseType:"blob",headers:se()}).then((function(e){pe(e);var a=e.data;a.rawAxiosResponse=e;var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],i=new Blob([a],{type:o}),l=window.URL.createObjectURL(i),c=new ct;c.name=n,c.data=i,c.dataUrl=l,t(c)})).catch((function(e){console.error(e),n(e)}))}))},dt=Object(y.a)()(Ge=function e(){Object(f.a)(this,e),this.getAvailableProducts=function(e,t){var a=Ee().concat("api/app/inventory/availableproducts/"+e);return st(a,{healthcenter:t})},this.getProductsInHealthCenter=function(e,t){var a=Ee().concat("api/app/inventory/getproducts");return st(a,{healthcenter:t,filter:e})},this.adjustStocks=function(){var e=Ee().concat("api/app/inventory/recalculatestock");return st(e,{})},this.getInventoriesData=function(){var e=Ee().concat("api/app/inventory/getinventoriesdata");return st(e,{})},this.getProductUsage=function(e){var t=Ee().concat("api/app/inventory/getproductusage");return st(t,e)},this.getProductListWithUsage=function(e){var t=Ee().concat("api/app/inventory/getproductswithusage");return st(t,{filter:e})},this.filterStocks=function(e){var t=Ee().concat("api/app/inventory/filter");return st(t,{filter:e})}})||Ge,mt=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,i=a+3;r>1&&n.push(1);for(var l=o;l<=i;l++)l>1&&l<=r&&n.push(l);return i<r&&n.push(r),n},pt=function(e){var t=mt(e.limit,e.totalData,e.activePage);if(0==t.length)return null;var a=t[t.length-1],n=e.activePage+1>=a?0:e.activePage+1,r=e.activePage-1<0?a-1:e.activePage-1;return o.a.createElement("div",null,o.a.createElement("nav",{"aria-label":"Page navigation example"},o.a.createElement("ul",{className:"pagination"},o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(){return e.onClick(r)}},"Previous")),t.map((function(t,a){return o.a.createElement("li",{key:"NAV-".concat(Se()),className:"page-item "+(t-1==e.activePage?"active":"")},o.a.createElement("a",{className:"page-link",onClick:function(){return e.onClick(t-1)}},t))})),o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(){return e.onClick(n)}},"Next")))))},ft=function(e){var t=e.show,a=e.children;return!1===t?null:o.a.createElement("div",{className:"alert alert-danger"},null!==a&&void 0!==a?a:"Error Occured")},ht=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.a.createElement("thead",null,o.a.createElement("tr",null,t.map((function(e){return null==e?null:o.a.createElement("th",{key:Se()},e)}))))},vt=function e(){Object(f.a)(this,e),this.filter=new Ye,this.recordList=void 0,this.totalData=0},gt=(Xe=Object(h.resolve)(dt),Qe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(f.a)(this,a),n=t.call(this,e,"Penggunaan Produk"),Object(c.a)(n,"inventoryService",Je,Object(u.a)(n)),n.state=new vt,n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){e.preventDefault(),n.loadRecords()},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadRecords)},n.loadRecords=function(){n.commonAjaxWithProgress(n.inventoryService.getProductListWithUsage,n.usageDataLoaded,n.showCommonErrorAlert,n.state.filter)},n.usageDataLoaded=function(e){n.setState({recordList:e.entities,totalData:e.totalData})},n.updateFieldsFilter=function(e){var t=e.target,a=n.state.filter;a.fieldsFilter[t.name]=t.value,n.setState({filter:a})};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n.state.filter.day=n.state.filter.dayTo=1,n.state.filter.limit=10,n.state.filter.fieldsFilter.name="",n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i,l=this.state.recordList;return o.a.createElement("div",{className:"section-body container-fluid"},this.titleTag(),o.a.createElement(lt,{title:"Periode"},o.a.createElement("form",{onSubmit:this.setFilter},o.a.createElement(nt,{withDay:!0,fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),o.a.createElement(Be,{label:"Limit"},o.a.createElement("input",{value:null!==(e=this.state.filter.limit)&&void 0!==e?e:5,type:"number",min:1,name:"limit",className:"form-control",onChange:this.updateFilter})),o.a.createElement(Be,{label:"Search by name"},o.a.createElement("input",{value:null!==(t=this.state.filter.fieldsFilter.name)&&void 0!==t?t:"",onChange:this.updateFieldsFilter,name:"name",className:"form-control"})),o.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"))),o.a.createElement(pt,{activePage:null!==(a=this.state.filter.page)&&void 0!==a?a:0,limit:null!==(n=this.state.filter.limit)&&void 0!==n?n:10,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),l?o.a.createElement(bt,{products:l,startNumber:(null!==(r=this.state.filter.page)&&void 0!==r?r:0)*(null!==(i=this.state.filter.limit)&&void 0!==i?i:10)}):o.a.createElement(ft,null,"No data"))}}]),a}(_e),Je=Object(p.a)(Qe.prototype,"inventoryService",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe),bt=function(e){return o.a.createElement("table",{className:"table table-striped"},ht("No","Name","Usage","Unit"),o.a.createElement("tbody",null,e.products.map((function(t,a){var n,r;return o.a.createElement("tr",{key:"product-stat-item-"+a},o.a.createElement("td",null,e.startNumber+a+1),o.a.createElement("td",null,t.name),o.a.createElement("td",null,De(null!==(n=t.count)&&void 0!==n?n:0)),o.a.createElement("td",null,null===(r=t.unit)||void 0===r?void 0:r.name))}))))},Et=Object(g.g)(Object(v.b)(q)(gt)),yt=function e(){Object(f.a)(this,e),this.entity=void 0,this.user=void 0,this.profile=void 0,this.customer=void 0,this.supplier=void 0,this.healthcenter=void 0,this.inventoryConfiguration=void 0,this.unit=void 0,this.product=void 0,this.transaction=void 0,this.filter=void 0,this.entityObject=void 0,this.orderedEntities=void 0,this.regularTransaction=void 0,this.imageData=void 0},Nt=Object(y.a)()(Ze=function(){function e(){var t=this;Object(f.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.healthCenters=[],this.getProductByCode=function(e){return t.getByKey("product","code",e)},this.getProductsByName=function(e){return t.getRecordsByKeyLike("product","name",e)},this.loadHealthCenters=function(){var e=Object.assign(new yt,{entity:"healthcenter",filter:Object.assign(new Ye,{orderBy:"name",orderType:"asc"})}),t=Ee().concat("api/app/entity/get");return st(t,e)},this.updateApplicationProfile=function(e){var t=Object.assign(new yt,{profile:e}),a=Ee().concat("api/app/setting/updateprofile");return st(a,t)},this.updateConfiguration=function(e){var t=Object.assign(new yt,{inventoryConfiguration:e}),a=Ee().concat("api/app/setting/updateconfig");return st(a,t)},this.setHealthCenters=function(e){t.healthCenters=e},this.getHealthCenters=function(){return t.healthCenters}}return Object(s.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=Ee().concat("api/app/entity/managementpages");return st(t,{})}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t=Object.assign(new yt,{entity:e}),a=Ee().concat("api/app/entity/configv2");return st(a,t)}},{key:"loadItems",value:function(e){var t=Ee().concat("api/app/entity/get");return st(t,e)}},{key:"loadAllEntities",value:function(e){var t=Object.assign(new yt,{entity:e,filter:{limit:0,page:0}}),a=Ee().concat("api/app/entity/get");return st(a,t)}},{key:"getByKey",value:function(e,t,a){var n=Object.assign(new yt,{entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:Object(_.a)({},t,a)}}),r=Ee().concat("api/app/entity/get");return st(r,n)}},{key:"getRecordsByKeyLike",value:function(e,t,a){var n=Object.assign(new yt,{entity:e,filter:{limit:10,page:0,fieldsFilter:Object(_.a)({},t,a)}}),r=Ee().concat("api/app/entity/get");return st(r,n)}},{key:"getById",value:function(e,t){var a=Object.assign(new yt,{entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}}),n=Ee().concat("api/app/entity/get");return st(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=Object.assign(new yt,{entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}}),r=Ee().concat("api/app/entity/get");return st(r,n)}},{key:"delete",value:function(e,t){var a=Object.assign(new yt,{entity:e,filter:{fieldsFilter:{id:t}}}),n=Ee().concat("api/app/entity/delete");return st(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object.assign(new yt,Object(_.a)({entity:e},e,t));return n=a?Ee().concat("api/app/entity/update"):Ee().concat("api/app/entity/add"),st(n,r)}},{key:"generateReport",value:function(e){var t=Ee().concat("api/app/report/records");return ut(t,e)}}]),e}())||Ze,Ct=function(e){var t;if(0==e.show)return null;var a=null!==(t=e.className)&&void 0!==t?t:"btn btn-outline-secondary",n=function(){return o.a.createElement(o.a.Fragment,null,e.iconClassName&&o.a.createElement("i",{className:"".concat(e.iconClassName," ").concat(e.children?"mr-2":""," ")}),e.children)};return e.to?o.a.createElement(we.b,Object.assign({},e.attributes,{to:e.to,style:e.style,onClick:e.onClick,className:a}),n()):o.a.createElement("a",Object.assign({},e.attributes,{tyle:e.style,onClick:e.onClick,className:a}),n())},Ot=(a(116),function(e){for(var t=new Array,a=0;a<=11;a++)t.push(o.a.createElement("div",{key:"spinner-item-"+a}));return o.a.createElement("div",{style:{width:"85px",height:"85px"},className:"container-fluid text-center d-block"},o.a.createElement("div",{style:{visibility:!1===e.show?"hidden":"visible"},className:"lds-spinner"},t))}),wt=($e=Object(h.resolve)(Nt),et=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"masterDataService",tt,Object(u.a)(n)),n.state={recordNotFound:!1,loading:!1,productName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(_.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.reset=function(e){n.setState({productName:""})},n.searchRecord=function(e){e.preventDefault(),""!=n.state.productName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Produk tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setProduct=function(e){n.setState({productName:e.name,product:e,recordList:void 0,recordNotFound:!1}),n.props.setProduct&&n.props.setProduct(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0,product:void 0,recordList:void 0})},n.loadRecords=function(){!n.state.loading&&n.state.productName&&n.commonAjaxWithProgress(n.masterDataService.getProductsByName,n.recordsLoaded,n.recordsNotFound,n.state.productName)},n.state={recordNotFound:!1,loading:!1,productName:""},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=null!==(e=this.state.recordList)&&void 0!==e?e:[];return o.a.createElement("form",{onSubmit:this.searchRecord},o.a.createElement(lt,{toggleable:!0,title:"Pilih Produk",footerContent:o.a.createElement(r.Fragment,null,o.a.createElement(Ct,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/product",className:"btn btn-outline-secondary"}),o.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),o.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},o.a.createElement("div",{className:"form-group"},o.a.createElement(Be,{label:"Nama"},o.a.createElement("input",{onChange:this.updateField,value:null!==(t=this.state.productName)&&void 0!==t?t:"",placeholder:"Nama",required:!0,type:"text",className:"form-control",name:"productName"}),n.length>0?o.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},n.map((function(e){return o.a.createElement("div",{className:"option-item",onClick:function(){a.setProduct(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),o.a.createElement("a",{onClick:this.recordsNotFound},o.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),o.a.createElement(jt,{loading:this.state.loading,product:this.state.product,notFound:this.state.recordNotFound})))}}]),a}(W),tt=Object(p.a)(et.prototype,"masterDataService",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et),jt=function(e){var t={height:"120px"};if(e.loading)return o.a.createElement("div",{style:t},o.a.createElement(Ot,null));if(1==e.notFound)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-warning"},"Produk tidak ditemukan"));if(!e.product)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih produk"));var a=e.product;return o.a.createElement("div",{style:t},o.a.createElement("h4",null,a.name),o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Kode"),o.a.createElement("th",null,"Unit"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,a.code),o.a.createElement("td",null,a.unit?a.unit.name:"-")))))},St=Object(g.g)(Object(v.b)(q)(wt)),kt=function e(){var t=this;Object(f.a)(this,e),this.inventories=[],this.totalItemsSum=0,this.totalExpiredSum=0,this.totalWillExpiredSum=0,this.periodicReviewResult=void 0,this.month=void 0,this.year=void 0,this.getLabel=function(){var e;return We[(null!==(e=t.month)&&void 0!==e?e:1)-1]+" "+t.year},this.getAmount=function(){return t.totalItemsSum}};kt.toDataSets=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(Object.assign(new kt,n))}return t};a(117);var Dt,Pt,Tt,It,Ft,Lt,At,xt,Rt,Mt,_t,Ut,Ht,Yt,Bt=function e(){Object(f.a)(this,e),this.hoveredIndex=-1,this.updated=new Date},Wt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).middleYAxisValue=0,n.bottomYAxisValue=0,n.offsetX=100,n.offsetY=50,n.baseYIndex=200,n.baseHeight=150,n.lineWidth=0,n.maxValue=0,n.state=new Bt,n.maxAmount=function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n.getAmount()>t&&(t=n.getAmount())}return t},n.updateSizes=function(){n.maxValue=n.maxAmount(n.props.dataSet),n.middleYAxisValue=Math.round(2*n.maxValue/3),n.bottomYAxisValue=Math.round(1*n.maxValue/3),n.lineWidth=23*n.props.dataSet.length+100},n.hover=function(e){n.setState({hoveredIndex:e})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.unHover=function(){n.setState({hoveredIndex:-1})},n.updateSizes(),n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.updateSizes(),this.props.updated!=this.state.updated&&this.setState({updated:this.props.updated})}},{key:"render",value:function(){var e=this,t=this.props;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"text-center border border-secondary",style:{minHeight:"300px",overflowX:"scroll",paddingTop:"10px",paddingBottom:"10px"}},o.a.createElement("svg",{onMouseOut:this.unHover,className:"bg-light border",version:"1.1",baseProfile:"full",width:2*this.offsetX+23*t.dataSet.length+100,height:300,xmlns:"http://www.w3.org/2000/svg"},t.dataSet.map((function(t,a){var n=t.getAmount()/e.maxValue*e.baseHeight,r=e.baseYIndex+15,i=e.offsetX+10+23*a,l="translate(0,0) rotate(-30,"+i+","+r+")",c=a==e.state.hoveredIndex;return o.a.createElement("g",{style:c?{cursor:"pointer"}:{},className:"chart-group",onMouseOver:function(t){return e.hover(a)},onClick:function(t){return e.onClick(a)},onMouseOut:e.unHover,key:"bar-item-chart-"+a},o.a.createElement("rect",{fill:c?"red":"green",x:e.offsetX+23*a,y:e.baseYIndex-n,height:n,width:20}),o.a.createElement("text",{fill:c?"red":"black",textAnchor:"end",fontSize:10,x:i,y:r,transform:l},t.getLabel()),o.a.createElement("circle",{cx:e.offsetX+23*(a+1),cy:e.baseYIndex,r:"3",fill:"red"}))})),o.a.createElement("rect",{name:"base_axis_x",x:this.offsetX,y:this.baseYIndex,height:2,width:this.lineWidth}),o.a.createElement("rect",{name:"ruler_line_top",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY,height:1,width:this.lineWidth}),o.a.createElement("rect",{name:"ruler_line_middle",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+1*this.baseHeight/3,height:1,width:this.lineWidth}),o.a.createElement("rect",{name:"ruler_line_bottom",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+2*this.baseHeight/3,height:1,width:this.lineWidth}),o.a.createElement("rect",{name:"base_axis_y",x:this.offsetX,y:this.offsetY,height:this.baseHeight,width:2}),o.a.createElement("text",{textAnchor:"end",name:"top_val",fontSize:10,x:this.offsetX,y:this.offsetY},De(this.maxValue)),o.a.createElement("text",{textAnchor:"end",name:"middle_val",fontSize:10,x:this.offsetX,y:this.offsetY+1*this.baseHeight/3},De(this.middleYAxisValue)),o.a.createElement("text",{textAnchor:"end",name:"bottom_val",fontSize:10,x:this.offsetX,y:this.offsetY+2*this.baseHeight/3},De(this.bottomYAxisValue)))),o.a.createElement("p",null,o.a.createElement("i",{className:"fas fa-history"})," ",new Date(this.state.updated).toString()))}}]),a}(r.Component),qt=function(e){return o.a.createElement("div",Object.assign({},e.attributes,{className:"card "+e.className}),e.title&&o.a.createElement("div",{className:"card-header"},e.title),o.a.createElement("div",{className:"card-body"},e.children),e.footerContent&&o.a.createElement("div",{className:"card-footer"},e.footerContent))},zt=function e(){Object(f.a)(this,e),this.product=void 0,this.filter=new Ye,this.inventoriesData=void 0,this.selectedItem=void 0,this.totalData=0,this.periodicReviewResult=void 0},Vt=(Dt=Object(h.resolve)(dt),Pt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(f.a)(this,a),n=t.call(this,e,"Penggunaan Produk"),Object(c.a)(n,"inventoryService",Tt,Object(u.a)(n)),n.state=new zt,n.setProduct=function(e){return n.setState({product:e})},n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){if(e.preventDefault(),n.state.product){var t=new yt;t.product=n.state.product,t.filter=n.state.filter,n.commonAjaxWithProgress(n.inventoryService.getProductUsage,n.usageDataLoaded,n.showCommonErrorAlert,t)}else n.showError("Please select product")},n.usageDataLoaded=function(e){var t;n.setState({selectedItem:void 0,periodicReviewResult:null===(t=e.inventoryData)||void 0===t?void 0:t.periodicReviewResult,inventoriesData:e.inventoriesData,totalData:e.totalData})},n.selectInventory=function(e){if(void 0!=n.state.inventoriesData)try{var t=n.state.inventoriesData[e];n.setState({selectedItem:t})}catch(a){}};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.inventoriesData,t=this.state.periodicReviewResult;return o.a.createElement("div",{className:"section-body container-fluid"},this.titleTag(),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(lt,{title:"Periode"},o.a.createElement("form",{onSubmit:this.setFilter},o.a.createElement(nt,{fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),this.state.product?o.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"):o.a.createElement("i",null,"Silakan pilih produk")))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement(St,{setProduct:this.setProduct}))),o.a.createElement("div",null,e?o.a.createElement(Gt,{periodicReviewResult:t,totalData:this.state.totalData,onClick:this.selectInventory,inventoriesData:e}):o.a.createElement(ft,null,"No data")),this.state.selectedItem?o.a.createElement(Kt,{item:this.state.selectedItem}):null)}}]),a}(_e),Tt=Object(p.a)(Pt.prototype,"inventoryService",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt),Kt=function(e){var t=Object.assign(new kt,e.item);return o.a.createElement(qt,{attributes:{style:{marginTop:"10px"}},title:"Detail Usage"},o.a.createElement(Be,{label:"Period"},t.getLabel()),o.a.createElement(Be,{label:"Amount"},De(t.getAmount())))},Gt=function(e){return o.a.createElement(qt,null,o.a.createElement(Wt,{onClick:e.onClick,updated:new Date,dataSet:kt.toDataSets(e.inventoriesData)}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(Be,{label:"Total"},De(e.totalData))),o.a.createElement("div",{className:"col-md-6"},e.periodicReviewResult?o.a.createElement(Xt,{periodicReviewResult:e.periodicReviewResult}):null)))},Xt=function(e){var t=e.periodicReviewResult;return o.a.createElement(r.Fragment,null,o.a.createElement(Be,{label:"Safety stock"},t.safetyStock),o.a.createElement(Be,{label:"Target Stock Level"},t.targetStockLevel),o.a.createElement(Be,{label:"Order Size"},t.orderSize),o.a.createElement(Be,{label:"Description"},t.description))},Qt=Object(g.g)(Object(v.b)(q)(Vt)),Jt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e,"About Us")}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return o.a.createElement("div",{className:"section-body container-fluid mt-5"},this.titleTag(),o.a.createElement(qt,{title:"Application"},o.a.createElement(Be,{label:"Name"},e.name),o.a.createElement(Be,null,o.a.createElement("i",null,e.shortDescription)),o.a.createElement(Be,{label:"Contact"},e.contact),o.a.createElement(Be,{label:"Address"},e.address)),o.a.createElement("p",null))}}]),a}(_e),Zt=Object(g.g)(Object(v.b)(q)(Jt)),$t=(a(118),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e,t=this.getApplicationProfile(),a=ye()+t.backgroundUrl;return o.a.createElement("div",{className:"landing-bg",style:{backgroundImage:'url("'+a+'")',color:null!==(e=t.fontColor)&&void 0!==e?e:"#000"}},o.a.createElement("h1",{className:"display-4"},t.name),o.a.createElement("p",{className:"lead"},t.shortDescription),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",null,t.welcomingMessage),o.a.createElement("div",{className:"btn-group"},o.a.createElement(we.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us"),o.a.createElement(we.b,{className:"btn btn-primary btn-lg",to:"/login",role:"button"},"Login")))}}]),a}(W)),ea=Object(g.g)(Object(v.b)(q)($t)),ta=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e,"Persediaan")}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"InventoryMain",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting()))}}]),a}(_e),aa=Object(g.g)(Object(v.b)(q)(ta)),na=a(33),ra=a(24),oa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).expiredWarningDays=10,e.leadTime=void 0,e.cycleTime=void 0,e}return a}(U),ia=function e(){Object(f.a)(this,e),this.inventoryData=new kt,this.configuration=new oa},la=(It=Object(h.resolve)(dt),Ft=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e,"Status Persediaan")).state=new ia,Object(c.a)(n,"inventoryService",Lt,Object(u.a)(n)),n.inventoriesDataLoaded=function(e){n.setState({inventoryData:e.inventoryData,configuration:e.configuration},(function(){n.props.setInventoryData(e)}))},n.loadInventoriesData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||!n.getInventoryData()?n.commonAjaxWithProgress(n.inventoryService.getInventoriesData,n.inventoriesDataLoaded,n.showCommonErrorAlert):n.setState({inventoryData:n.getInventoryData(),configuration:n.getInventoryConfig()})},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadInventoriesData(),Object(na.a)(Object(ra.a)(a.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.configuration,n=t.inventoryData,r=n.inventories,i=0;return o.a.createElement("div",{className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting()),o.a.createElement("div",null,o.a.createElement(Ct,{iconClassName:"fas fa-sync-alt",onClick:function(){return e.loadInventoriesData(!0)}},"Muat Ulang"),o.a.createElement("p",null)),o.a.createElement("table",{className:"table table-striped"},ht("No","Lokasi","Total","Stok Aman","Kadaluarsa dalam ".concat(a.expiredWarningDays," hari"),"Kadaluarsa"),o.a.createElement("tbody",null,r.map((function(e,t){var a=e.totalItems-e.expiredItems-e.willExpiredItems;return i+=a,o.a.createElement("tr",{key:"p-inv-".concat(t)},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.location.name),o.a.createElement("td",null,De(e.totalItems)),o.a.createElement("td",null,De(a)),o.a.createElement("td",{className:e.willExpiredItems>0?"bg-warning":""},De(e.willExpiredItems)),o.a.createElement("td",{className:e.expiredItems>0?"bg-danger text-warning":""},De(e.expiredItems)))})),o.a.createElement("tr",{className:"font-weight-bold"},o.a.createElement("td",{colSpan:2},"Total"),o.a.createElement("td",null,De(n.totalItemsSum)),o.a.createElement("td",null,De(i)),o.a.createElement("td",null,De(n.totalWillExpiredSum)),o.a.createElement("td",null,De(n.totalExpiredSum))))))}}]),a}(_e),Lt=Object(p.a)(Ft.prototype,"inventoryService",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft),ca=Object(g.g)(Object(v.b)(q,(function(e){return{setInventoryData:function(t){return e(function(e){return{type:"SET_INVENTORY_DATA",payload:{inventoryData:e.inventoryData,inventoryConfig:e.configuration},meta:{type:"SET_INVENTORY_DATA"}}}(t))}}}))(la)),sa=Object(y.a)()(At=function e(){Object(f.a)(this,e),this.loadStockOpnameReport=function(e,t){var a=Ee().concat("api/app/report/stockopname");return ut(a,{healthcenter:t,filter:e})},this.loadMontlyReport=function(e){var t=Ee().concat("api/app/report/monthly");return ut(t,{filter:e})},this.printTransactionReceipt=function(e){var t=Ee().concat("api/app/report/transactionreceipt/"+e);return ut(t,{})},this.printReceiveRequestSheet=function(e,t){var a=Ee().concat("api/app/report/receiverequestsheet");return ut(a,{healthcenter:t,filter:e})}})||At,ua=function e(){Object(f.a)(this,e),this.filter=new Ye,this.healthCenters=[],this.selectedHealthCenter=new Y,this.period=new Date},da=(xt=Object(h.resolve)(Nt),Rt=Object(h.resolve)(sa),Mt=Object(h.resolve)(dt),_t=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(f.a)(this,a),(n=t.call(this,e,"Laporan")).state=new ua,Object(c.a)(n,"masterDataService",Ut,Object(u.a)(n)),Object(c.a)(n,"reportService",Ht,Object(u.a)(n)),Object(c.a)(n,"inventoryService",Yt,Object(u.a)(n)),n.healthCentersLoaded=function(e){var t;n.masterDataService.setHealthCenters(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()})},n.loadHealthCenter=function(){n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.updateLocation=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));a.length>0&&n.setState({selectedHealthCenter:a[0]})},n.reportCreated=function(e){n.showConfirmation("Simpan "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.updatePeriod=function(e){var t=new Date(e.target.value),a=n.state.filter;a.day=t.getDate(),a.month=t.getMonth()+1,a.year=t.getFullYear(),n.setState({period:t,filter:a})},n.loadStockOpname=function(){var e=n.state.selectedHealthCenter.name,t=n.state.period.toLocaleDateString("ID");n.showConfirmation("Muat Stok Opname "+t+" : "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadStockOpnameReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.loadMontlyReport=function(){var e=n.state.period,t="".concat(e.getMonth()+1," - ").concat(e.getFullYear());n.showConfirmation("Muat Laporan Bulanan ".concat(t,"?")).then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadMontlyReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter)}))},n.printReceiveRequestSheet=function(){var e=n.state.period,t="".concat(e.getMonth()+1," - ").concat(e.getFullYear());n.showConfirmation("Muat LPLPO ".concat(t,"?")).then((function(e){e&&n.commonAjaxWithProgress(n.reportService.printReceiveRequestSheet,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.adjustStocks=function(){n.showConfirmation("Kalkulasi Ulang Stok?").then((function(e){e&&n.commonAjaxWithProgress(n.inventoryService.adjustStocks,(function(){return n.showInfo("Success")}),n.showCommonErrorAlert)}))};var r=n.state.period;return n.state.filter.day=r.getDate(),n.state.filter.month=r.getMonth()+1,n.state.filter.year=r.getFullYear(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadHealthCenter(),this.scrollTop()}},{key:"render",value:function(){var e,t=this.state,a=t.period,n=t.filter,r=t.healthCenters,i=t.selectedHealthCenter,l=We[a.getMonth()];return o.a.createElement("div",{id:"Report",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting(),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(Be,{label:"Lokasi"},o.a.createElement("select",{autoComplete:"off",key:"select-health-center",onChange:this.updateLocation,value:null!==(e=i.id)&&void 0!==e?e:0,className:"form-control"},r.map((function(e,t){var a;return o.a.createElement("option",{key:"slct-loc-stk-".concat(t),value:null!==(a=e.id)&&void 0!==a?a:0},e.name)})))),o.a.createElement(Be,{label:"Periode"},o.a.createElement("input",{autoComplete:"off",onChange:this.updatePeriod,type:"date",className:"form-control",value:Ke(a)})))),o.a.createElement("div",{className:"row"},o.a.createElement(ma,{onClick:this.loadStockOpname,description:["Tanggal",a.getDate(),l,n.year].join(" ")},"Stok Opname"),o.a.createElement(ma,{onClick:this.loadMontlyReport,description:["Bulan",l,n.year].join(" ")},"Laporan Bulanan"),o.a.createElement(ma,{onClick:this.printReceiveRequestSheet,description:["Bulan",l,n.year].join(" ")},"LPLPO"),o.a.createElement(ma,{onClick:this.adjustStocks,description:""},"Kalkulasi Ulang Stok")))}}]),a}(_e),Ut=Object(p.a)(_t.prototype,"masterDataService",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Object(p.a)(_t.prototype,"reportService",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=Object(p.a)(_t.prototype,"inventoryService",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t),ma=function(e){return o.a.createElement("div",{className:"col-md-3 text-center"},o.a.createElement(qt,{title:e.children},o.a.createElement("p",null,e.description),o.a.createElement(it,{iconClassName:"far fa-file-alt",onClick:e.onClick,children:"Submit"})))},pa=Object(g.g)(Object(v.b)(q)(da)),fa=a(83),ha=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.description=void 0,e.unit=void 0,e.utilityTool=void 0,e.imageNames=void 0,e.count=void 0,e.getDefaultImageUrl=function(){return void 0==e.imageNames?ye()+"default.bmp":ye()+e.imageNames.split("~")[0]},e}return a}(U),va=function(e){var t;return!1===e.show?null:o.a.createElement("div",{style:e.style,className:"alert alert-warning"},null!==(t=e.children)&&void 0!==t?t:"Error Occured")},ga=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=Object.assign(new ha,this.props.product),a=0;return o.a.createElement("div",{className:"row alert alert-light"},o.a.createElement(ba,{number:e.number,product:t}),o.a.createElement("div",{className:"col-9"},o.a.createElement(lt,{title:t.name+"("+t.code+")",toggleable:!0},o.a.createElement("div",{style:{width:"100%",overflow:"scroll"}},0==e.productFlows.length?o.a.createElement(va,{children:"No Data"}):o.a.createElement("table",{className:"table table-striped"},ht("No","Id","Qty","Digunakan","Stok","Unit","Kadaluarsa","Lokasi"),o.a.createElement("tbody",null,e.productFlows.map((function(t,n){var r;return a+=t.stock,o.a.createElement("tr",{key:"PF_DETAIL_STOCK=".concat(t.id,"-").concat(n)},o.a.createElement("td",null,n+1),o.a.createElement("td",null,t.id),o.a.createElement("td",null,t.count),o.a.createElement("td",null,t.usedCount),o.a.createElement("td",null,t.stock),o.a.createElement("td",null,null===(r=e.product.unit)||void 0===r?void 0:r.name),o.a.createElement("td",null,new Date(t.expiredDate).toLocaleDateString("ID")),o.a.createElement("td",null,t.stockLocation))})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:4},"Total Stok"),o.a.createElement("td",null,a))))))))}}]),a}(r.Component),ba=function(e){var t=e.product;return o.a.createElement("div",{className:"col-3"},o.a.createElement("div",{className:"card bg-light"},o.a.createElement("img",{className:"card-img-top ",src:t.getDefaultImageUrl()}),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",{className:"card-text"},e.number," - ",t.name))))},Ea=Object(v.b)(q)(ga),ya=function(e){var t=e.productStocks,a=e.startingNumber,n=e.location;return o.a.createElement("div",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3"},o.a.createElement("strong",null,"Nama")),o.a.createElement("div",{className:"col-9"},o.a.createElement("strong",null,"Rincian"))),0==t.length?o.a.createElement(va,{style:{marginTop:"10px"}},"Tidak ada data"):t.map((function(e,t){var i=e.product,l=e.productFlows;return o.a.createElement(r.Fragment,{key:"ps-"+t},o.a.createElement(Ea,{number:a+t,location:n,product:i,productFlows:l}))})))};function Na(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))}a(119);var Ca,Oa,wa,ja,Sa,ka,Da=function(e){var t,a,n=null!==(t=e.yesLabel)&&void 0!==t?t:"ON",r=null!==(a=e.noLabel)&&void 0!==a?a:"OFF",i=e.active?n:r,l=e.active;return o.a.createElement("div",{className:"d-flex",style:{gap:"5px"}},o.a.createElement("div",{onClick:function(){1!=e.disabled&&e.onClick(!e.active)},className:"toggleButtonContainer ".concat(l?"bg-info":"bg-secondary")},o.a.createElement("div",{className:"bg-light toggleButtonPointer",style:{marginLeft:l?16:0}})),o.a.createElement("span",null,i))},Pa=function e(){Object(f.a)(this,e),this.productStocks=new Array,this.loading=!1,this.filter=new Ye,this.totalData=0,this.totalItems=0,this.healthCenters=[],this.selectedHealthCenter=new Y,this.configuration=new oa,this.productName=""},Ta=(Ca=Object(h.resolve)(Nt),Oa=Object(h.resolve)(dt),wa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Stok Produk"),Object(c.a)(n,"masterDataService",ja,Object(u.a)(n)),Object(c.a)(n,"inventoryService",Sa,Object(u.a)(n)),n.state=new Pa,n.updateFilterExpDate=function(e){var t,a=function(e){return e.target}(e);if("date"==a.type){var r=new Date(a.value),o=function(e,t){console.debug("DIFF DATE ",e," vs ",t);var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(new Date,r);t=o,console.debug("diffDay: ",o)}else t=a.value;var i=n.state.configuration;i.expiredWarningDays=parseInt(t),n.setState({configuration:i})},n.healthCentersLoaded=function(e){n.masterDataService.setHealthCenters(e.entities),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()},n.loadProducts)},n.productLoaded=function(e){var t,a=null!==(t=e.configuration)&&void 0!==t?t:new oa;n.state.filter.filterExpDate&&(a.expiredWarningDays=n.state.configuration.expiredWarningDays),n.setState({totalItems:e.totalItems,configuration:a,loading:!1,totalData:e.totalData,productStocks:e.generalList})},n.loadProductsAt=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadProducts)},n.productLoadingError=function(e){n.showCommonErrorAlert(e),n.setState({loading:!1})},n.loadProducts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;n.setState({loading:!0},(function(){if(e>=0){var t=n.state.filter;t.page=e,n.setState({filter:t},n.doLoadProduct)}else n.doLoadProduct()}))},n.doLoadProduct=function(){var e=n.state.filter;e.filterExpDate&&1==e.ignoreEmptyValue&&(e.day=n.state.configuration.expiredWarningDays),e.fieldsFilter={name:n.state.productName},n.commonAjaxWithProgress(n.inventoryService.getProductsInHealthCenter,n.productLoaded,n.productLoadingError,e,n.state.selectedHealthCenter)},n.getLocations=function(){var e=new Y;e.id=0,e.name="ALL";var t=[e],a=n.state.healthCenters;return t.push.apply(t,Object(fa.a)(a)),t},n.updateLocation=function(e){var t=e.target,a=n.state.filter;t.value.toString()==(0).toString()?a.flag=Ye.FLAG_ALL:a.flag=Ye.FLAG_DEFAULT;var r=n.getLocations().filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));n.showConfirmation("Ubah Lokasi? *muat ulang untuk melihat perubahan").then((function(e){e&&r.length>0&&n.setState({filter:a,selectedHealthCenter:r[0]})}))},n.loadHealthCenter=function(){if(n.masterDataService.getHealthCenters().length>0){var e={entities:n.masterDataService.getHealthCenters()};n.healthCentersLoaded(e)}else n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.getDisplayedRecordOptions=function(){if(n.state.totalData<=10)return[10];for(var e=n.state.totalData/10,t=[],a=10,r=0;r<e;r++)t.push(a),a+=10;return a<n.state.totalData&&t.push(n.state.totalData),t},n.setIgnoreEmpty=function(e){var t=n.state.filter;t.ignoreEmptyValue=e,n.setState({filter:t})},n.setFilterExpDate=function(e){var t=n.state.filter;t.filterExpDate=e,n.setState({filter:t})},n.updateLimit=function(e){var t=e.target.value;n.showConfirmation("Ubah jumlah tampilan?").then((function(e){if(e){var a=n.state.filter;a.limit=t,a.page=0,n.setState({filter:a},n.loadProducts)}}))},n.state.filter.limit=10,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.loadHealthCenter()}},{key:"render",value:function(){var e,t,a,n,r,i,l=this;if(0==this.getLocations().length)return o.a.createElement("div",{id:"ProductStocks",className:"container-fluid section-body"},o.a.createElement("h2",null,"Stok Produk"),o.a.createElement(Ot,null));var c=this.state.filter.ignoreEmptyValue,s=this.state.filter.filterExpDate;return o.a.createElement("div",{id:"ProductStocks",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l.loadProducts(0)},className:"alert alert-info"},ke(),", ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),o.a.createElement("hr",null),o.a.createElement(Aa,{updateLocation:this.updateLocation,selectedLocation:this.state.selectedHealthCenter,locations:this.getLocations()}),o.a.createElement(Be,{label:"Jumlah Tampilan"},o.a.createElement("select",{key:"select-displayed-record",onChange:this.updateLimit,value:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,className:"form-control"},this.getDisplayedRecordOptions().map((function(e,t){return o.a.createElement("option",{key:"select-displayed-record-".concat(t,"-").concat(e),value:e},e)})))),o.a.createElement(Be,{label:"Total Stok"},o.a.createElement("strong",null,De(this.state.totalItems))),o.a.createElement(Be,{label:"Filter"},o.a.createElement("input",{className:"form-control",placeholder:"Name",name:"productName",value:this.state.productName,onChange:this.handleInputChange})),o.a.createElement(Be,{label:"Abaikan Stok Kosong"},o.a.createElement(Da,{active:1==c,onClick:this.setIgnoreEmpty})),c&&o.a.createElement(Ia,{active:1==s,update:this.updateFilterExpDate,toggle:this.setFilterExpDate,expiredWarningDays:this.state.configuration.expiredWarningDays}),o.a.createElement(La,null)),o.a.createElement("p",null),o.a.createElement(qt,{title:"Daftar Produk"},o.a.createElement(pt,{activePage:null!==(a=this.state.filter.page)&&void 0!==a?a:0,onClick:this.loadProductsAt,limit:null!==(n=this.state.filter.limit)&&void 0!==n?n:10,totalData:this.state.totalData}),this.state.loading?o.a.createElement(Ot,null):o.a.createElement(ya,{location:this.state.selectedHealthCenter,startingNumber:(null!==(r=this.state.filter.page)&&void 0!==r?r:0)*(null!==(i=this.state.filter.limit)&&void 0!==i?i:0)+1,productStocks:this.state.productStocks})))}}]),a}(_e),ja=Object(p.a)(wa.prototype,"masterDataService",[Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=Object(p.a)(wa.prototype,"inventoryService",[Oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa),Ia=function(e){var t=e.expiredWarningDays,a=e.update,n=function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}(new Date,t),r=Ke(n),i="form-control-sm";return o.a.createElement(Be,{label:"Kadaluarsa"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement(Da,{active:1==e.active,onClick:e.toggle})),e.active&&o.a.createElement("div",{className:"col-10 input-group"},o.a.createElement("span",{className:i},"Dalam (",Fa(t),")"),o.a.createElement("input",{required:!0,type:"number",className:i,value:t,onChange:a}),o.a.createElement("span",{className:i},"Max Tanggal"),o.a.createElement("input",{onChange:e.update,required:!0,type:"date",className:i,value:r}))))},Fa=function(e){return e<0?"".concat(Math.abs(e)," Hari yang lalu"):"".concat(e," Hari")},La=function(e){return o.a.createElement(Be,null,o.a.createElement("button",{type:"submit",className:"btn btn-success"},o.a.createElement("i",{className:"fas fa-sync-alt mr-2"}),o.a.createElement("span",null,"Muat Ulang")))},Aa=function(e){var t;return o.a.createElement(Be,{label:"Lokasi"},o.a.createElement("select",{key:"select-health-center",onChange:e.updateLocation,value:null!==(t=e.selectedLocation.id)&&void 0!==t?t:"",className:"form-control"},e.locations.map((function(e,t){var a;return o.a.createElement("option",{key:"slct-loc-stk-".concat(t),value:null!==(a=e.id)&&void 0!==a?a:""},e.name)}))))},xa=Object(g.g)(Object(v.b)(q)(Ta));!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR"}(ka||(ka={}));var Ra=function(){function e(){var t=this;Object(f.a)(this,e),this.entityName="",this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.editable=!0,this.deletable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1,this.addElement=function(e){t.elements.push(e)},this.setOrder=function(){for(var e=[],a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];for(var o=0;o<t.elements.length;o++){var i=n.indexOf(t.elements[o].id);i>=0&&(e[i]=t.elements[o])}t.elements=e.filter((function(e){return null!=e}))},this.keepProperties=function(){var e=[];e:for(var a=0;a<t.elements.length;a++)for(var n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];if(t.elements[a].id==r){e.push(t.elements[a]);continue e}}t.elements=e,console.debug("new elements: {}",t.elements)}}return Object(s.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();Ra.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},Ra.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r,o=a[n],i={label:null!==(r=o.labelName)&&void 0!==r?r:o.id,value:o.id,isDate:"date"==o.type,filterable:o.filterable,orderable:o.orderable};t.push(i)}return t},Ra.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==ka.FIELD_TYPE_TEXTEDITOR)return!0;return!1};var Ma=function(e){var t,a,n,i=e.headerName,l=e.filterClass,c=e.fieldsFilter;return o.a.createElement(r.Fragment,null,o.a.createElement("input",{key:"filter-day-"+i,autoComplete:"off",value:null!==(t=c[i+"-day"])&&void 0!==t?t:"",onChange:e.onChange,name:i+"-day",className:l,placeholder:"day"}),o.a.createElement("input",{key:"filter-month-"+i,autoComplete:"off",value:null!==(a=c[i+"-month"])&&void 0!==a?a:"",onChange:e.onChange,name:i+"-month",className:l,placeholder:"month"}),o.a.createElement("input",{key:"filter-year-"+i,autoComplete:"off",value:null!==(n=c[i+"-year"])&&void 0!==n?n:"",onChange:e.onChange,name:i+"-year",className:l,placeholder:"year"}))},_a=function(e){if(1!=e.show)return null;var t=e.headerName;return o.a.createElement("div",{className:"input-group-append btn-group"},o.a.createElement("button",{"data-ordertype":"asc",onClick:e.onClick,"data-orderby":t,className:"btn btn-outline-secondary btn-sm"},o.a.createElement("i",{"data-ordertype":"asc",onClick:e.onClick,"data-orderby":t,className:"fas fa-angle-up"})),o.a.createElement("button",{"data-ordertype":"desc",onClick:e.onClick,"data-orderby":t,className:"btn btn-outline-secondary btn-sm"},o.a.createElement("i",{"data-ordertype":"desc",onClick:e.onClick,"data-orderby":t,className:"fas fa-angle-down"})))},Ua=function(e){var t=e.headerProps,a=e.fieldsFilter,n=e.orderButtonOnClick,r=e.filterOnChange;return o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No"),t.map((function(t,i){var l,c=t.filterable&&t.isDate,s=t.value,u="dth-".concat(i,"-").concat(s);if(!t.filterable&&!t.orderable)return o.a.createElement("th",{key:u},o.a.createElement("p",{children:t.label}));return o.a.createElement("th",{key:u},o.a.createElement("p",{children:t.label}),o.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},c?o.a.createElement(Ma,{headerName:s,fieldsFilter:a,filterClass:"form-control input-filter",onChange:e.filterOnChange}):t.filterable&&o.a.createElement("input",{key:"filter-common-"+s,autoComplete:"off",value:null!==(l=a[s])&&void 0!==l?l:"",onChange:r,placeholder:t.label,className:"form-control input-filter",name:s}),o.a.createElement(_a,{show:t.orderable,headerName:s,onClick:n})))})),o.a.createElement("th",null,"Action")))},Ha=function e(){Object(f.a)(this,e),this.label="",this.value="",this.isDate=!1,this.filterable=!0,this.orderable=!0};Ha.fromEntityProperty=function(e){return Ra.getHeaderLabels(e)};var Ya,Ba,Wa,qa,za,Va,Ka=function e(){Object(f.a)(this,e),this.ignoreBaseField=void 0,this.id="0",this.type="text",this.className=void 0,this.labelName="Label",this.optionItemName=void 0,this.optionValueName=void 0,this.entityReferenceName=void 0,this.entityReferenceClass=void 0,this.detailFields=void 0,this.multiple=void 0,this.defaultValues=void 0,this.plainListValues=[],this.options=void 0,this.identity=void 0,this.required=void 0,this.editable=!0,this.filterable=!0,this.orderable=!0,this.entityProperty=void 0,this.additionalMap=void 0,this.fieldType=ka.FIELD_TYPE_TEXT};Ka.isList=function(e){return e.fieldType==ka.FIELD_TYPE_FIXED_LIST||e.fieldType==ka.FIELD_TYPE_DYNAMIC_LIST};var Ga,Xa,Qa,Ja,Za,$a,en,tn,an,nn,rn,on,ln,cn,sn,un,dn,mn,pn,fn,hn,vn,gn,bn,En,yn,Nn,Cn,On,wn,jn,Sn,kn,Dn,Pn,Tn,In,Fn,Ln,An,xn,Rn,Mn,_n,Un,Hn,Yn,Bn,Wn,qn,zn,Vn,Kn,Gn,Xn,Qn,Jn,Zn,$n,er,tr,ar,nr=function e(){Object(f.a)(this,e),this.entityProperty=void 0,this.entityPropertyNotLoaded=!1,this.filter=new Ye,this.items=[],this.inventoryConfig=new oa,this.totalData=0},rr=(Ya=Object(h.resolve)(Nt),Ba=Object(h.resolve)(dt),Va=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Inventory"),Object(c.a)(n,"masterDataService",qa,Object(u.a)(n)),Object(c.a)(n,"inventoryService",za,Object(u.a)(n)),n.headerProps=[],n.state=new nr,n.entityPropertyLoaded=function(e){if(!e.entityProperty)throw new Error("Invalid property!");var t=n.adjustProperty(e.entityProperty);n.setState({entityProperty:t,entityPropertyNotLoaded:!1},(function(){n.loadItems(0)}))},n.adjustProperty=function(e){var t=Object.assign(new Ra,e);t.keepProperties("id","product","stock","expiredDate");var a=new Ka;return a.id="location",a.labelName="Location",a.orderable=!1,t.addElement(a),t.setOrder("product","stock","expiredDate","location","id"),t},n.entityPropertyNotLoaded=function(e){n.setState({entityProperty:void 0,entityPropertyNotLoaded:!0})},n.loadEntityProperty=function(){n.commonAjax(n.masterDataService.loadEntityProperty,n.entityPropertyLoaded,n.entityPropertyNotLoaded,"productflow")},n.loadItems=function(e){var t,a=Object.assign(new Ye,n.state.filter);a.page=null!==e&&void 0!==e?e:null!==(t=a.page)&&void 0!==t?t:0,Ye.validateFieldsFilter(a),n.commonAjax(n.inventoryService.filterStocks,n.itemsLoaded,n.showCommonErrorAlert,a)},n.itemsLoaded=function(e){n.setState({items:e.entities,totalData:e.totalData,filter:e.filter,config:e.configuration})},n.filterOnChange=function(e){e.preventDefault();var t=n.state.filter;Ye.setFieldsFilterValueFromInput(t,e.target),n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=n.state.filter;Ye.setOrderPropertyFromDataSet(t,e.target.dataset),n.setState({filter:t},(function(){n.loadItems(0)}))},n.getHeaderProps=function(){return n.state.entityProperty?(n.headerProps.length>0||(n.headerProps=Ha.fromEntityProperty(n.state.entityProperty)),n.headerProps):(n.showCommonErrorAlert("Invalid Entity Property"),[])},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=20,n.setState({filter:t})},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadItems(t)},n.bgClass=function(e){if(!e.expiredDate)return"";var t=new Date(e.expiredDate),a=new Date;if(t<=a)return"bg-danger";var r=n.state.inventoryConfig;return(t.getTime()-a.getTime())/864e5<=r.expiredWarningDays?"bg-warning":""},n.state.filter.limit=20,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.loadEntityProperty()}},{key:"render",value:function(){var e,t,a,n,r=this;if(this.state.entityPropertyNotLoaded)return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement(ft,null,o.a.createElement("h3",null,"Config Not Loaded"),o.a.createElement(it,{onClick:this.loadEntityProperty,children:"Reload Config"})));if(!this.state.entityProperty)return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement(Ot,null));var i=this.state,l=i.filter,c=i.items,s=i.totalData;return o.a.createElement("div",{className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting()),o.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},o.a.createElement(lt,{title:"Filter",toggleable:!0},o.a.createElement("div",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{value:(null!==(e=l.page)&&void 0!==e?e:0)+1,onChange:function(e){r.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{value:null!==(t=l.limit)&&void 0!==t?t:5,onChange:function(e){return r.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),o.a.createElement("div",{className:"col-12"},o.a.createElement("p",null)),o.a.createElement("div",{className:"col-3"},o.a.createElement(or,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),o.a.createElement(pt,{limit:null!==(a=l.limit)&&void 0!==a?a:20,totalData:null!==s&&void 0!==s?s:0,activePage:null!==(n=l.page)&&void 0!==n?n:0,onClick:this.loadItems}),o.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},o.a.createElement("table",{className:"table"},o.a.createElement(Ua,{headerProps:this.getHeaderProps(),fieldsFilter:l.fieldsFilter,filterOnChange:this.filterOnChange,orderButtonOnClick:this.orderButtonOnClick}),o.a.createElement("tbody",null,c.map((function(e,t){var a,n,i,c,s,u,d,m,p="TRANS_IN"==(null===(a=e.transaction)||void 0===a?void 0:a.type)?null===(n=e.transaction)||void 0===n||null===(i=n.healthCenterLocation)||void 0===i?void 0:i.name:null===(c=e.transaction)||void 0===c||null===(s=c.healthCenterDestination)||void 0===s?void 0:s.name;return o.a.createElement("tr",{key:"stock-item-"+e.id,className:r.bgClass(e)},o.a.createElement("td",null,t+1+(null!==(u=l.page)&&void 0!==u?u:0)*(null!==(d=l.limit)&&void 0!==d?d:20)),o.a.createElement("td",{children:null===(m=e.product)||void 0===m?void 0:m.name}),o.a.createElement("td",{children:e.stock}),o.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),o.a.createElement("td",{children:p}),o.a.createElement("td",{children:e.id}))})))))))}}]),a}(_e),Wa=Va,qa=Object(p.a)(Wa.prototype,"masterDataService",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),za=Object(p.a)(Wa.prototype,"inventoryService",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wa),or=function(e){return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},o.a.createElement("i",{className:"fas fa-play-circle mr-2"}),o.a.createElement("span",null,"Apply Filter")),o.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},o.a.createElement("i",{className:"fas fa-sync-alt mr-2"}),o.a.createElement("span",null,"Reset")))},ir=Object(g.g)(Object(v.b)(q)(rr)),lr=(a(120),function e(){Object(f.a)(this,e),this.loading=!1,this.username="",this.password=""}),cr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=new lr,e.startLoading=function(){return e.setState({loading:!0})},e.endLoading=function(){return e.setState({loading:!1})},e.updateCredentialProperty=function(t){var a=t.target,n=a.getAttribute("name");null!=n&&e.setState(Object(_.a)({},n,a.value))},e}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.password,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"Login",className:"text-center"},o.a.createElement(dr,null),o.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},o.a.createElement(ur,{value:this.state.username,onChange:this.updateCredentialProperty}),o.a.createElement(sr,{value:this.state.password,onChange:this.updateCredentialProperty}),this.state.loading?o.a.createElement(Ot,null):o.a.createElement("button",{className:"btn btn-lg btn-dark btn-block",type:"submit"},"Masuk"),o.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(W),sr=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Kata Sandi"),o.a.createElement("input",{name:"password",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control border border-dark",placeholder:"Password",required:!0}))},ur=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Nama Pengguna"),o.a.createElement("input",{name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control border border-dark",placeholder:"Username",required:!0,autoFocus:!0}))},dr=function(){return o.a.createElement("svg",{style:{marginTop:"20px"},width:"200",height:"201"},o.a.createElement("g",{fill:"transparent",stroke:"black",strokeWidth:3},o.a.createElement("path",{className:"animated-svg house",d:"M 100 0 L 0 100 L 15 100 L 15 200 L 185 200  L 185 100 L 200 100  Z"}),o.a.createElement("circle",{className:"animated-svg circle",cx:100,cy:122,r:68}),o.a.createElement("path",{className:"animated-svg plus",d:"M 41 111 L 88 111 L 88 64 L 113 64 \r L 113 111 L 158 111 L 158 135 L 113 135 \r L 113 181 L 88 181 L 88 135 L 41 135 Z"})))},mr=Object(g.g)(Object(v.b)(q,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:Ee().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(cr)),pr=(a(121),function(){function e(){Object(f.a)(this,e)}return Object(s.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,r=0;r<n.length;r++){var i=n[r],l=i.id,c=e[l];if(null!=c){switch(i.fieldType){case ka.FIELD_TYPE_DATE:c=new Date(c).toLocaleDateString("ID");break;case ka.FIELD_TYPE_DATETIME:c=new Date(c).toLocaleDateString("ID")+" "+new Date(c).toLocaleTimeString();break;case ka.FIELD_TYPE_IMAGE:var s=new String(c).split("~")[0];c=o.a.createElement("img",{src:ye()+s,width:"50",height:"50"});break;case ka.FIELD_TYPE_COLOR:c=o.a.createElement("strong",{style:{color:c}},c);break;case ka.FIELD_TYPE_NUMBER:c=De(c);break;case ka.FIELD_TYPE_TEXTEDITOR:c=o.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(c).length>100?new String(c).substring(0,100)+"...":c}});break;case ka.FIELD_TYPE_CHECKBOX:c=1==c?o.a.createElement("i",null,"true"):o.a.createElement("i",null,"false");break;case ka.FIELD_TYPE_FIXED_LIST:case ka.FIELD_TYPE_DYNAMIC_LIST:default:var u;if(i.optionItemName&&""!=i.optionItemName)c=e[l][null!==(u=i.optionItemName)&&void 0!==u?u:"id"];else c=e[l]}a.push(c)}else a.push(c)}return a}}]),e}()),fr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).prepopulateForm=void 0,e.getEntityElement=function(){return e.props.entityElement},e.getRequiredAttr=function(){return{required:1==e.getEntityElement().required}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(W),hr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=o.a.createRef(),n.changeSingleImageData=function(e){var t=Object(u.a)(n);Na(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(u.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=ye()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement(o.a.Fragment,null,this.state.showInputFile?o.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",name:t.id,className:"form-control"}):o.a.createElement(r.Fragment,null,o.a.createElement("p",null),o.a.createElement(it,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),o.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),o.a.createElement(vr,{imageData:this.state.singlePreviewData}),o.a.createElement(it,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(fr),vr=function(e){return 0!=e.show&&e.imageData?o.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},gr=Object(g.g)(Object(v.b)(q)(hr)),br=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=o.a.createRef(),n.setImageData=function(e,t){var a=Object(u.a)(n);Na(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(u.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,o=0;o<a.length;o++){var i=a[o];t.set(o,i),r.push(o)}n.setState({previewData:t,inputElements:r})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement(o.a.Fragment,null,this.state.inputElements.map((function(a){var n=e.state.previewData.get(a),i=void 0==n||""==new String(n).trim(),l=!i&&Er(n);return o.a.createElement(r.Fragment,{key:"IMG"+a+t.id},i?o.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?o.a.createElement("div",null,o.a.createElement("input",{value:n,type:"hidden",name:t.id}),o.a.createElement(yr,{imageData:n})):i?null:o.a.createElement("div",null,o.a.createElement("input",{value:n,type:"hidden",name:t.id,className:"form-control"}),o.a.createElement(yr,{imageData:ye()+n}),o.a.createElement("p",{className:"badge badge-warning"},n)),o.a.createElement(it,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),o.a.createElement("p",null),o.a.createElement(it,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(fr),Er=function(e){return e&&e.startsWith("data:image")},yr=function(e){return 0!=e.show&&e.imageData?o.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},Nr=Object(g.g)(Object(v.b)(q)(br)),Cr=(Ga=Object(h.resolve)(Nt),Ja=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object(c.a)(e,"masterDataService",Qa,Object(u.a)(e)),e.state={inputList:[],singlePreviewData:void 0},e.ref=o.a.createRef(),e.inputListLoaded=function(t){if(!t.entities||0==t.entities.length)throw new Error("Not found");e.setState({inputList:t.entities}),e.prepopulateForm()},e.loadInputList=function(){var t=e.getEntityElement().entityReferenceClass;e.commonAjax(e.masterDataService.loadAllEntities,e.inputListLoaded,e.showCommonErrorAlert,t)},e.isNotReady=function(){return 0==e.state.inputList.length},e.validateInputType=function(){console.debug("validateInputType"),e.isNotReady()&&e.loadInputList()},e.prepopulateForm=function(){if(e.props.recordToEdit&&e.ref.current){var t=e.getEntityElement().id,a=e.props.recordToEdit[t];if(a){var n;if(0!=e.state.inputList.length){var r=e.getEntityElement().optionValueName;r&&(n=a[r])&&(e.ref.current.value=n)}}}},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return o.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return o.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?o.a.createElement("option",{key:"fid-"+Se()+"-",value:t[a]},t[n]):null})))}}]),a}(fr),Xa=Ja,Qa=Object(p.a)(Xa.prototype,"masterDataService",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xa),Or=Object(g.g)(Object(v.b)(q)(Cr)),wr=(a(122),function e(){Object(f.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1}),jr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=new wr,e.contentRef=o.a.createRef(),e.formatDoc=function(t,a){var n=e.contentRef.current;if(n){if(console.debug("commmand: ",t),e.validateMode()){var r=document.execCommand(t,!1,a);console.debug("EXECUTED: ",r," editable: ",n.contentEditable),n.focus()}}else console.debug("oDOc is missing")},e.validateMode=function(){return!e.state.editMode||(alert('Uncheck "Show HTML".'),e.contentRef.current&&e.contentRef.current.focus(),!1)},e.setValue=function(t){e.contentRef.current&&e.setState({fieldValue:e.contentRef.current.innerHTML,updated:!0})},e.setDocMode=function(t){var a=e.contentRef.current;if(a){var n;if(t){n=document.createTextNode(a.innerHTML),a.innerHTML="";var r=document.createElement("pre");a.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(n),a.appendChild(r)}else document.all?a.innerHTML=a.innerText:((n=document.createRange()).selectNodeContents(a.firstChild),a.innerHTML=n.toString()),a.contentEditable="true";a.focus()}},e.printDoc=function(){e.validateMode()},e.prepopulateForm=function(){if(e.props.recordToEdit&&e.contentRef.current){var t=e.getEntityElement().id,a=e.props.recordToEdit[t];a&&(e.contentRef.current.innerHTML=a,e.setState({fieldValue:a,updated:!0}))}},e.setEditMode=function(t){e.setDocMode(t),e.setState({editMode:t})},e.paleteCommand=function(t){var a=t.target,n=a.dataset.command,r=a.dataset.value;"clean"==n?e.clean():e.formatDoc(n,r)},e.clean=function(){var t=Object(u.a)(e);e.showConfirmationDanger("Clean content?").then((function(e){e&&t.contentRef.current&&(t.contentRef.current.innerHTML="")}))},e.contentOnChange=function(t){e.setState({updated:!1})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement("div",null,o.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),o.a.createElement("div",{id:"toolBar1",className:"input-group"},o.a.createElement(Pr,{onChange:this.formatDoc}),o.a.createElement(Tr,{onChange:this.formatDoc}),o.a.createElement(Sr,{onChange:this.formatDoc}),o.a.createElement(Dr,{onChange:this.formatDoc}),o.a.createElement(kr,{onChange:this.formatDoc})),o.a.createElement("div",{id:"toolBar2"},o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),o.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},o.a.createElement("p",null,"Fill content")),o.a.createElement("p",null),o.a.createElement(Ct,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),o.a.createElement(Ct,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),o.a.createElement(Ct,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),o.a.createElement(Ct,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(fr),Sr=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),o.a.createElement("option",{value:"1"},"Very small"),o.a.createElement("option",{value:"2"},"A bit small"),o.a.createElement("option",{value:"3"},"Normal"),o.a.createElement("option",{value:"4"},"Medium-large"),o.a.createElement("option",{value:"5"},"Big"),o.a.createElement("option",{value:"6"},"Very big"),o.a.createElement("option",{value:"7"},"Maximum"))},kr=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),o.a.createElement("option",{value:"red"},"Red"),o.a.createElement("option",{value:"green"},"Green"),o.a.createElement("option",{value:"black"},"Black"))},Dr=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},o.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),o.a.createElement("option",{value:"red"},"Red"),o.a.createElement("option",{value:"blue"},"Blue"),o.a.createElement("option",{value:"green"},"Green"),o.a.createElement("option",{value:"black"},"Black"))},Pr=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},o.a.createElement("option",{value:"-",selected:!0},"- formatting -"),o.a.createElement("option",{value:"h1"},"Title 1 <h1>"),o.a.createElement("option",{value:"h2"},"Title 2 <h2>"),o.a.createElement("option",{value:"h3"},"Title 3 <h3>"),o.a.createElement("option",{value:"h4"},"Title 4 <h4>"),o.a.createElement("option",{value:"h5"},"Title 5 <h5>"),o.a.createElement("option",{value:"h6"},"Subtitle <h6>"),o.a.createElement("option",{value:"p"},"Paragraph <p>"),o.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},Tr=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),o.a.createElement("option",{value:"Arial"},"Arial"),o.a.createElement("option",{value:"Arial Black"},"Arial Black"),o.a.createElement("option",{value:"Courier New"},"Courier New"),o.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},Ir=Object(g.g)(Object(v.b)(q)(jr)),Fr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return o.a.createElement(r.Fragment,null,o.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),o.a.createElement(Da,{active:a,onClick:function(t){return e.setState({checked:t})},yesLabel:"Ya",noLabel:"Tidak"}))}}]),a}(fr),Lr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).ref=o.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r=void 0;switch(e.fieldType){case ka.FIELD_TYPE_DATE:var o=new Date(a);if(!o)break;r=Ke(o);break;case ka.FIELD_TYPE_NUMBER:r=new String(a);break;default:r=a}if(r)if(e.optionItemName&&""!=e.optionItemName){var i,l=r;n.ref.current.value=l[null!==(i=e.optionItemName)&&void 0!==i?i:"id"]}else n.ref.current.value=r}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return o.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=o.a.createElement("p",null,e.fieldType);switch(e.fieldType){case ka.FIELD_TYPE_PLAIN_LIST:a=o.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return o.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case ka.FIELD_TYPE_TEXTAREA:a=o.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;case ka.FIELD_TYPE_NUMBER:a=o.a.createElement("input",Object.assign({type:e.type,step:.001},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=o.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(fr),Ar=function e(){Object(f.a)(this,e),this.inputList=[],this.searchValue=""},xr=(Za=Object(h.resolve)(Nt),$a=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object(c.a)(e,"masterDataService",en,Object(u.a)(e)),e.state=new Ar,e.ref=o.a.createRef(),e.inputRef=o.a.createRef(),e.inputListLoaded=function(t){if(!t.entities||0==t.entities.length)throw new Error(e.getEntityElement().labelName+" Not found");e.setState({inputList:t.entities},(function(){e.inputRef.current&&e.inputRef.current.focus()}))},e.loadInputList=function(){var t,a=e.getEntityElement(),n=a.entityReferenceClass,r=a.optionItemName;if(r){var o=Object.assign(new yt,{entity:n,filter:Object.assign(new Ye,{limit:0,page:0,fieldsFilter:Object(_.a)({},r,null===(t=e.inputRef.current)||void 0===t?void 0:t.innerHTML)})});e.commonAjax(e.masterDataService.loadItems,e.inputListLoaded,e.showCommonErrorAlert,o)}},e.prepopulateForm=function(){if(e.props.recordToEdit&&e.ref.current){var t=e.getEntityElement().id,a=e.props.recordToEdit[t];a&&e.setState({inputList:[a],searchValue:""},(function(){var t,n=e.getEntityElement().optionValueName;n&&(t=a[n])&&(e.ref.current.value=t)}))}},e.search=function(t){if(13==t.keyCode){if(e.inputRef.current){var a=e.inputRef.current;a.innerHTML=new String(a.innerText).trim()}return t.preventDefault(),e.loadInputList(),!1}},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var r=e.entityReferenceClass+" "+a;return o.a.createElement("div",null,o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text"},r)),o.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement(Ct,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),o.a.createElement(Ct,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),o.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?o.a.createElement("option",{key:"fid-"+Se()+"-",value:e[t]},e[a]):null}))))}}]),a}(fr),en=Object(p.a)($a.prototype,"masterDataService",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$a),Rr=Object(g.g)(Object(v.b)(q)(xr)),Mr=function e(){Object(f.a)(this,e),this.hour=(new Date).getHours(),this.minute=(new Date).getMinutes(),this.second=(new Date).getSeconds()},_r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],Ur=function(){for(var e=[],t=1;t<60;t++)e.push(t);return e},Hr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state=new Mr,n.minutes=void 0,n.seconds=void 0,n.setDefaultValue=function(){try{var e=n.props.value.split(":");n.setState({hour:parseInt(e[0]),minute:parseInt(e[1]),second:parseInt(e[2])})}catch(t){}},n.updateValue=function(e){var t=e.target;if(t){var a=t.name;n.setState(Object(_.a)({},a,t.value),n.onChange)}},n.setNow=function(){var e=new Date;n.setState({hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},n.onChange)},n.onChange=function(){n.props.onChange(n.state.hour,n.state.minute,n.state.second)},n.minutes=Ur(),n.seconds=Ur(),n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"form-control bg-light"},o.a.createElement("select",{name:"hour",style:{border:"none"},value:this.state.hour,onChange:this.updateValue},_r.map((function(e){return o.a.createElement("option",{key:"HOUR-"+e,value:e},Pe(e))}))),o.a.createElement("select",{name:"minute",style:{border:"none"},value:this.state.minute,onChange:this.updateValue},this.minutes.map((function(e){return o.a.createElement("option",{key:"MIN-"+e,value:e},Pe(e))}))),o.a.createElement("select",{name:"second",style:{border:"none"},value:this.state.second,onChange:this.updateValue},this.seconds.map((function(e){return o.a.createElement("option",{key:"SEC-"+e,value:e},Pe(e))}))),o.a.createElement("a",{style:{marginLeft:5},onClick:this.setNow},o.a.createElement("i",{className:"fas fa-history"})))}}]),a}(r.Component),Yr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).timeRef=o.a.createRef(),n.updateTime=function(e,t,a){[Pe(e),Pe[t],Pe(a)].join(":");var r=n.props.value;r.setHours(e),r.setMinutes(t),r.setSeconds(a),r.setMilliseconds(0),n.setState({date:r},(function(){n.props.onChange(n.props.value)}))},n.updateDate=function(e){var t=e.target,a=new Date(t.value),r=n.props.value;r.setDate(a.getDate()),r.setMonth(a.getMonth()),r.setFullYear(a.getFullYear()),n.setState({date:r},(function(){n.props.onChange(n.props.value)}))},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.timeRef.current&&this.timeRef.current.setDefaultValue()}},{key:"render",value:function(){var e,t=this.props.value;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-1 text-center d-flex align-items-center"},o.a.createElement("i",{className:"far fa-calendar-alt"})),o.a.createElement("div",{className:"col-md-5"},o.a.createElement("input",{onChange:this.updateDate,className:"form-control",value:Ke(t),type:"date"})),o.a.createElement("div",{className:"col-md-1 text-center d-flex align-items-center"},o.a.createElement("i",{className:"far fa-clock"})),o.a.createElement("div",{className:"col-md-5"},o.a.createElement(Hr,{ref:this.timeRef,value:(e=t,[Pe(e.getHours()),Pe(e.getMinutes()),Pe(e.getSeconds())].join(":")),onChange:this.updateTime})))}}]),a}(r.Component),Br=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={checked:!1,value:new Date},n.inputRef=o.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({value:new Date(t)})}},n.onChange=function(e){n.setState({value:e})},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement();return console.debug("Date time value: ",this.state.value),o.a.createElement(r.Fragment,null,o.a.createElement("input",{type:"hidden",name:e.id,value:this.state.value.getTime()}),o.a.createElement(Yr,{ref:this.inputRef,onChange:this.onChange,value:this.state.value}))}}]),a}(fr),Wr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getEntityElement=function(){return e.props.entityElement},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=o.a.createElement("p",null,e.fieldType);if(e.editable)switch(e.fieldType){case ka.FIELD_TYPE_DYNAMIC_LIST:t=o.a.createElement(Rr,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_FIXED_LIST:t=o.a.createElement(Or,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_TEXTEDITOR:t=o.a.createElement(Ir,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_IMAGE:t=e.multiple?o.a.createElement(Nr,{recordToEdit:this.props.recordToEdit,entityElement:e}):o.a.createElement(gr,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_CHECKBOX:t=o.a.createElement(Fr,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_DATETIME:t=o.a.createElement(Br,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ka.FIELD_TYPE_PLAIN_LIST:case ka.FIELD_TYPE_TEXTAREA:default:t=o.a.createElement(Lr,{recordToEdit:this.props.recordToEdit,entityElement:e})}else t=o.a.createElement(Lr,{recordToEdit:this.props.recordToEdit,entityElement:e});var a=o.a.createElement("span",null,e.labelName,e.editable&&e.required?o.a.createElement("i",{className:"text-danger"},"*"):null);return o.a.createElement(Be,{orientation:"vertical",label:a},t)}}]),a}(W),qr=Object(g.g)(Object(v.b)(q)(Wr)),zr=(tn=Object(h.resolve)(Nt),an=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"masterDataService",nn,Object(u.a)(n)),n.editMode=!1,n.recordToEdit=void 0,n.onSubmit=function(e){e.preventDefault();var t=e.target;n.showConfirmation("Save data?").then((function(e){e&&n.submit(t)}))},n.submit=function(e){var t=new FormData(e),a={},r=new Array,o=[],i=!1;t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r=n.getEntityElement(t);if(!r)return!1;switch(r.fieldType){case ka.FIELD_TYPE_CHECKBOX:a[t].push("true"==e);break;case ka.FIELD_TYPE_DYNAMIC_LIST:case ka.FIELD_TYPE_FIXED_LIST:var l=r.optionValueName;l&&a[t].push(Object(_.a)({},l,e));break;case ka.FIELD_TYPE_IMAGE:console.debug(t," is image"),"NULLED"==e?(console.debug("NULLED VALUE ADDED: ",t),o.push(t)):(new String(e).startsWith("data:image")&&(i=!0),a[t].push(e));break;default:a[t].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,o);console.debug("Record object to save: ",t,"realtimeProgress: ",i),n.ajaxSubmit(t,i)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(E.a)(Object(E.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var o=e[r];1==o.length?a[r]=o[0]:o.length>1&&(a[r]=o.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved"),n.props.recordSavedCallback&&n.props.recordSavedCallback()},e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(s.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return Ra.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?o.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return o.a.createElement("div",{id:"MasterDataForm"},o.a.createElement(it,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left",children:"Back"}),o.a.createElement("form",{onSubmit:this.onSubmit,id:"record-form"},o.a.createElement(lt,{title:o.a.createElement("span",null,e.alias," Record Form ",t),footerContent:o.a.createElement(Vr,null)},o.a.createElement(Kr,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(W),nn=Object(p.a)(an.prototype,"masterDataService",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an),Vr=function(e){return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),o.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Kr=function(e){var t=e.entityProperty.elements,a=new Array,n=0,r=Ra.hasTextEditorField(t);a.push(new Array);for(var i=0;i<t.length;i++){var l=t[i];!r&&i>0&&i%5==0&&(n++,a.push(new Array)),a[n].push(l)}return o.a.createElement("div",{className:"row"},a.map((function(t,a){return o.a.createElement("div",{key:"GROUPED_ELEMENT_".concat(a),className:r?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-".concat(e.entityProperty.entityName+t.id);return o.a.createElement(qr,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},Gr=Object(g.g)(Object(v.b)(q)(zr)),Xr=(rn=Object(h.resolve)(Nt),on=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(c.a)(e,"masterDataService",ln,Object(u.a)(e)),e.delete=function(t){var a=Object(u.a)(e);e.showConfirmationDanger("Delete record?").then((function(e){e&&a.doDelete()}))},e.doDelete=function(){var t=e.props.record,a=e.props.entityProperty,n=Ra.getRecordId(t,a);a.withProgressWhenUpdated?e.commonAjaxWithProgress(e.masterDataService.delete,e.recordDeleted,e.showCommonErrorAlert,a.entityName,n):e.commonAjax(e.masterDataService.delete,e.recordDeleted,e.showCommonErrorAlert,a.entityName,n)},e.getRecordById=function(){var t=e.props.record,a=e.props.entityProperty,n=Ra.getRecordId(t,a);e.commonAjax(e.masterDataService.getById,e.recordLoaded,e.showCommonErrorAlert,a.entityName,n)},e.recordLoaded=function(t){if(!t.entities||0==t.entities.length)throw new Error("Record not found");e.props.showEditForm&&e.props.showEditForm(t)},e.recordDeleted=function(t){e.showInfo("Record deleted"),e.props.reload()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.entityProperty;return 0==e.editable?null:o.a.createElement(r.Fragment,null,o.a.createElement(it,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),o.a.createElement(it,{show:1==e.deletable,onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(W),ln=Object(p.a)(on.prototype,"masterDataService",[rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on),Qr=Object(g.g)(Object(v.b)(q,(function(e){return{}}))(Xr)),Jr=function(e){var t="";if("transaction"==e.entityProperty.entityName)t="/transaction/detail/"+e.record.code;else{if("product"!=e.entityProperty.entityName)return null;t="/dashboard/statistic/product/"+e.record.code}return o.a.createElement(Ct,{className:"btn btn-sm btn-dark",iconClassName:"fas fa-external-link-alt",to:t,attributes:{target:"_blank"}})},Zr=(cn=Object(h.resolve)(Nt),sn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"masterDataService",un,Object(u.a)(n)),n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.loadItems=function(e){var t,a=Object.assign(new Ye,n.state.filter),r=n.entityProperty.entityName;a.page=null!==(t=null!==e&&void 0!==e?e:a.page)&&void 0!==t?t:0,Ye.validateFieldsFilter(a);var o=Object.assign(new yt,{entity:r,filter:a});n.commonAjax(n.masterDataService.loadItems,n.itemsLoaded,n.showCommonErrorAlert,o)},n.itemsLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=Ra.getHeaderLabels(n.props.entityProperty),n.loadItems(0))},n.getRecordNumberingOrder=function(e){var t=n.state.filter,a=t.page,r=t.limit;return(null!==a&&void 0!==a?a:0)*(null!==r&&void 0!==r?r:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadItems(t)},n.filterOnChange=function(e){e.preventDefault();var t=n.state.filter;Ye.setFieldsFilterValueFromInput(t,e.target),n.setState({filter:t})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=n.state.filter;Ye.setOrderPropertyFromDataSet(t,e.target.dataset),n.setState({filter:t},(function(){n.loadItems(0)}))},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0},n.scrollTop))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.printRecord=function(){return n.props.printRecord(n.state.filter)},n.hideForm=function(e){return n.setState({showForm:!1})},n.entityProperty=n.props.entityProperty,n.headerProps=Ra.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:Object.assign(new Ye,{limit:5,page:0,fieldsFilter:{}})},n}return Object(s.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n=this;if(void 0==this.state.recordData)return o.a.createElement(Ot,null);var r=this.entityProperty,i=this.headerProps,l=1==this.state.filter.exacts,c=this.state.recordData.entities?this.state.recordData.entities:[];if(!i||!c)return o.a.createElement(ft,null);if(1==this.state.showForm)return o.a.createElement(Gr,{recordToEdit:this.recordToEdit,entityProperty:r,recordSavedCallback:this.loadItems,onClose:this.hideForm});var s=this.state.filter,u=1==r.creatable&&1==r.editable,d=null!==(e=s.page)&&void 0!==e?e:0,m=null!==(t=s.limit)&&void 0!==t?t:5;return o.a.createElement("div",{id:"MasterDataList"},o.a.createElement("div",{className:"btn-group mb-2"},o.a.createElement(it,{onClick:this.showCreateForm,iconClassName:"fas fa-plus",children:"Add Record",show:u}),o.a.createElement(it,{onClick:this.printRecord,iconClassName:"fas fa-file",children:"Print Record"})),o.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},o.a.createElement(lt,{title:"Filter",toggleable:!0},o.a.createElement("div",{className:"form-group row"},o.a.createElement($r,{value:d+1,onChange:this.updateFilterPage,placeholder:"go to page"}),o.a.createElement($r,{value:m,onChange:this.updateFilterLimit,placeholder:"record per page"}),o.a.createElement("div",{className:"col-12"},o.a.createElement("p",null)),o.a.createElement("div",{className:"col-3"},o.a.createElement(Da,{active:l,yesLabel:"exact",noLabel:"not exact",onClick:this.setExactSearch})),o.a.createElement("div",{className:"col-3"},o.a.createElement(to,{onSubmit:this.filterFormSubmit,onReset:this.filterReset})))),o.a.createElement(pt,{limit:m,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:d,onClick:this.loadItems}),o.a.createElement(lt,{title:"Data List"},o.a.createElement(eo,{loading:this.state.loading}),o.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},o.a.createElement("table",{className:"table"},o.a.createElement(Ua,{headerProps:i,fieldsFilter:s.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange}),o.a.createElement("tbody",null,c.map((function(e,t){var a=n.getRecordNumberingOrder(t),i=pr.parseValues(e,r);return o.a.createElement("tr",{key:"trresult-".concat(t)},o.a.createElement("td",null,a),i.map((function(e){return o.a.createElement("td",{key:"tdu-".concat(Se()),children:e})})),o.a.createElement("td",null,o.a.createElement("div",{className:"btn-group"},o.a.createElement(Jr,{record:e,entityProperty:r}),o.a.createElement(Qr,{showEditForm:n.showEditForm,entityProperty:r,record:e,reload:n.loadItems}))))}))))))))}}]),a}(W),un=Object(p.a)(sn.prototype,"masterDataService",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn),$r=function(e){return o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{type:"number",value:e.value,className:"form-control",placeholder:e.placeholder,onChange:function(t){e.onChange(t.target.value)},min:"1"}))},eo=function(e){return 1!=e.loading?null:o.a.createElement("div",{className:"w-100 pt-5 bg-light",style:{height:"100%",opacity:.5,position:"absolute",zIndex:100}},o.a.createElement(Ot,{show:e.loading}))},to=function(e){return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-light btn-sm border"},o.a.createElement("i",{className:"fas fa-play-circle mr-2"}),o.a.createElement("span",null,"Apply Filter")),o.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-light btn-sm border"},o.a.createElement("i",{className:"fas fa-sync-alt mr-2"}),o.a.createElement("span",null,"Reset")))},ao=Object(g.g)(Object(v.b)(q)(Zr)),no=(dn=Object(h.resolve)(Nt),mn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"masterDataService",pn,Object(u.a)(n)),n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r=Object.assign(new yt,{entity:t.entityName,filter:e});n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty(),this.scrollTop()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(na.a)(Object(ra.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){if(void 0==this.state.entityProperty)return o.a.createElement("div",{className:" container-fluid section-body",style:{paddingTop:"20px"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-4 text-right"},o.a.createElement("div",{className:"spinner-border",role:"status"})),o.a.createElement("div",{className:"col-8"},o.a.createElement("h4",null,"Loading configuration"))));var e=this.state.entityProperty.alias;return o.a.createElement("div",{className:"section-body container-fluid"},o.a.createElement("h2",null,e),o.a.createElement("hr",null),o.a.createElement(ao,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(W),pn=Object(p.a)(mn.prototype,"masterDataService",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn),ro=Object(g.g)(Object(v.b)(q)(no)),oo=(fn=Object(h.resolve)(Nt),hn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Master Data"),Object(c.a)(n,"masterDataService",vn,Object(u.a)(n)),n.state={code:void 0},n.managementPropertiesLoaded=function(e){n.masterDataService.managementProperties=e.generalList?e.generalList:[],n.setSidebarMenus(),n.refresh()},n.setSidebarMenus=function(){for(var e=[],t=n.masterDataService.managementProperties,a=0;a<t.length;a++){var r=t[a];e.push(Object.assign(new Te,{name:r.label,url:r.entityName,code:r.entityName,menuClass:r.iconClassName}))}console.debug("this.props.setSidebarMenus: ",n.props.setSidebarMenus),n.props.setSidebarMenus&&n.props.setSidebarMenus(e)},n.loadManagamenetPages=function(){if(n.masterDataService.managementProperties.length>0)return n.setSidebarMenus(),void n.refresh();n.commonAjax(n.masterDataService.loadManagementProperties,n.managementPropertiesLoaded,n.showCommonErrorAlert)},n.getCode=function(){return n.props.match.params.code},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(na.a)(Object(ra.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages(),this.scrollTop()}},{key:"componentDidUpdate",value:function(){this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return o.a.createElement(ro,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return o.a.createElement("div",{className:"section-body container-fluid"},o.a.createElement(Ot,null));var e=this.masterDataService.managementProperties;return o.a.createElement("div",{className:"section-body container-fluid"},this.titleTag(),o.a.createElement("div",{className:"row"},e.map((function(e){return o.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center mb-5"},o.a.createElement("h2",null,o.a.createElement(we.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},o.a.createElement("i",{className:e.iconClassName}))),o.a.createElement("p",null,e.label))}))))}}]),a}(_e),vn=Object(p.a)(hn.prototype,"masterDataService",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hn),io=Object(g.g)(Object(v.b)(q)(oo)),lo=(gn=Object(h.resolve)(Nt),bn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(f.a)(this,a),r=t.call(this,e,n),Object(c.a)(r,"masterDataService",En,Object(u.a)(r)),r.saveRecord=function(e){e.preventDefault(),0!=r.state.fieldChanged()&&r.showConfirmation("Save Data?").then((function(e){e&&r.doSaveRecord()}))},r.doSaveRecord=function(){},r.postRecordSaved=function(e){},r.recordSaved=function(e){r.showInfo("Record Has Been Saved!");var t=r.state.editFields;for(var a in t)t[a]=!1;r.setState({editFields:t},(function(){r.postRecordSaved(e)}))},r}return a}(_e),En=Object(p.a)(bn.prototype,"masterDataService",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn),co=function(e){var t=e.edit,a=e.name,n=e.toggleInput,r=e.value,i=e.updateProperty,l=Object(rt.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?o.a.createElement(so,{updateProperty:i,name:a,toggleInput:n,value:r,type:l.type}):o.a.createElement(uo,{name:a,toggleInput:n,value:r,type:l.type})},so=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.updateProperty,i=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"col-md-10"},o.a.createElement("input",{type:null!==i&&void 0!==i?i:"text",name:t,onChange:r,value:n,className:"form-control"})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},uo=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("p",{style:{backgroundColor:"color"==r?n:"#fff"}},"color"==r?"Sample Color":n),"color"==r?o.a.createElement("p",null,n):null),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},mo=function(e){var t=e.name,a=e.edit,n=e.toggleInput,i=e.updateProperty;return a?o.a.createElement(r.Fragment,null,o.a.createElement("div",null,o.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"false"},onClick:n,className:" btn btn-secondary btn-sm"},"cancel")),o.a.createElement("input",{onChange:i,className:"form control",accept:"image/*",type:"file",name:t})):o.a.createElement("div",null,o.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"true"},onClick:n,className:" btn btn-info btn-sm"},"edit image"))},po=function e(){Object(f.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1,this.iconUrl=!1},fo=function e(){var t=this;Object(f.a)(this,e),this.applicationProfile=void 0,this.editFields=new po,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ho=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e,"Profile Aplikasi")).state=new fo,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a)(t.files?t.files[0].name:void 0)&&Na(t).then((function(e){n.setAppProfileField(a,e)})).catch(console.error)}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({applicationProfile:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon||e.iconUrl?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e=n.state,t=e.applicationProfile,a=e.editFields;if(t){var r=t.backgroundUrl,o=t.pageIcon,i=t.iconUrl,l=new H;for(var c in a){a[c]&&"backgroundUrl"!=c&&"pageIcon"!=c&&"iconUrl"!=c&&(l[c]=t[c])}return a.backgroundUrl&&(null===r||void 0===r?void 0:r.startsWith("data:image"))&&(l.backgroundUrl=r),a.pageIcon&&(null===o||void 0===o?void 0:o.startsWith("data:image"))&&(l.pageIcon=t.pageIcon),a.iconUrl&&(null===i||void 0===i?void 0:i.startsWith("data:image"))&&(l.iconUrl=i),l}},n.postRecordSaved=function(e){n.props.setApplicationProfile(e.applicationProfile)},n.state.applicationProfile=Object.assign(new H,n.getApplicationProfile()),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.applicationProfile,a=e.editFields;if(!t)return null;var n=t.backgroundUrl,r=t.pageIcon,i=t.iconUrl,l=t.name,c=t.welcomingMessage,s=t.shortDescription,u=t.about,d=t.address,m=t.contact,p=t.color,f=t.fontColor,h=(null===n||void 0===n?void 0:n.startsWith("data:image"))?n:ye()+n,v=this.updateProfileProperty;return o.a.createElement("div",{id:"ApplicationProfile",className:"container-fluid section-body"},this.titleTag(),o.a.createElement(qt,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center mb-5"},o.a.createElement("img",{height:"100",className:"border border-primary mb-5",src:h}),o.a.createElement(mo,{name:"backgroundUrl",edit:a.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Be,{label:"Name"},o.a.createElement(co,{edit:a.name,updateProperty:v,name:"name",toggleInput:this.toggleInput,value:l})),o.a.createElement(Be,{label:"Welcoming Message"},o.a.createElement(co,{edit:a.welcomingMessage,updateProperty:v,name:"welcomingMessage",toggleInput:this.toggleInput,value:c})),o.a.createElement(Be,{label:"Short Description"},o.a.createElement(co,{edit:a.shortDescription,updateProperty:v,name:"shortDescription",toggleInput:this.toggleInput,value:s})),o.a.createElement(Be,{label:"Address"},o.a.createElement(co,{edit:a.address,updateProperty:v,name:"address",toggleInput:this.toggleInput,value:d})),o.a.createElement(Be,{label:"About"},o.a.createElement(co,{edit:a.about,updateProperty:v,name:"about",toggleInput:this.toggleInput,value:u})),o.a.createElement(Be,{label:"Contact"},o.a.createElement(co,{edit:a.contact,updateProperty:v,name:"contact",toggleInput:this.toggleInput,value:m})),o.a.createElement(Be,{label:"Background Color"},o.a.createElement(co,{type:"color",edit:a.color,updateProperty:v,name:"color",toggleInput:this.toggleInput,value:p})),o.a.createElement(Be,{label:"Font Color"},o.a.createElement(co,{type:"color",edit:a.fontColor,updateProperty:v,name:"fontColor",toggleInput:this.toggleInput,value:f})),o.a.createElement(Be,{label:"Application Icon"},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:(null===r||void 0===r?void 0:r.startsWith("data:image"))?r:ye()+r}),o.a.createElement(mo,{name:"pageIcon",edit:a.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Be,{label:"Logo"},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:(null===i||void 0===i?void 0:i.startsWith("data:image"))?i:ye()+i}),o.a.createElement(mo,{name:"iconUrl",edit:a.iconUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Be,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(lo),vo=Object(g.g)(Object(v.b)(q,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(ho)),go=function e(){Object(f.a)(this,e),this.cycleTime=!1,this.leadTime=!1,this.expiredWarningDays=!1},bo=function e(){var t=this;Object(f.a)(this,e),this.config=void 0,this.editFields=new go,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Eo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e,"Konfigurasi Persediaan")).actualConfig=new oa,n.state=new bo,n.loadConfiguration=function(){n.commonAjax(n.masterDataService.getByKey,n.configLoaded,n.showCommonErrorAlert,"configuration","code","APP_CONFIG")},n.configLoaded=function(e){if(e.entities&&e.entities.length>0){var t=Object.assign(new oa,e.entities[0]);n.actualConfig=Object.assign(new oa,e.entities[0]),n.setState({config:t})}},n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.config;a&&(a[t.name]=t.value,n.setState({config:a}))}},n.setProperty=function(e,t){var a=n.state.config;a&&(a[e]=t,n.setState({config:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.config,r=n.actualConfig;if(null!=t&&a){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({config:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&n.commonAjax(n.masterDataService.updateConfiguration,n.recordSaved,n.showCommonErrorAlert,e)},n.getEditedRecord=function(){var e=n.state,t=e.config,a=e.editFields;if(t){var r=new oa;for(var o in a)r[o]=t[o];return r}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.loadConfiguration()}},{key:"render",value:function(){var e=this.state,t=e.config,a=e.editFields;return t?o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Inventory Configuration"),o.a.createElement(qt,{title:"Inventory Configuration"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement(Be,{label:"Cycle Time"},o.a.createElement(co,{type:"number",edit:a.cycleTime,updateProperty:this.updateProfileProperty,name:"cycleTime",toggleInput:this.toggleInput,value:t.cycleTime})),o.a.createElement(Be,{label:"Lead Time"},o.a.createElement(co,{type:"number",edit:a.leadTime,updateProperty:this.updateProfileProperty,name:"leadTime",toggleInput:this.toggleInput,value:t.leadTime})),o.a.createElement(Be,{label:"Exp Date Warning"},o.a.createElement(co,{type:"number",edit:a.expiredWarningDays,updateProperty:this.updateProfileProperty,name:"expiredWarningDays",toggleInput:this.toggleInput,value:t.expiredWarningDays})),o.a.createElement(Be,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null)))):o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement(Ot,null))}}]),a}(lo),yo=Object(g.g)(Object(v.b)(q)(Eo)),No=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e,"Settings")}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"SettingsMain",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting()))}}]),a}(_e),Co=Object(g.g)(Object(v.b)(q,(function(e){return{}}))(No)),Oo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.password=void 0,e.profileImage=void 0,e.authorities=void 0,e.requestId=void 0,e.processingDate=void 0,e}return a}(U),wo=Object(y.a)()(yn=function e(){Object(f.a)(this,e),this.updateProfile=function(e){var t=Object.assign(new yt,{user:e}),a=Ee().concat("api/app/account/updateprofile");return st(a,t)},this.requestApplicationId=function(e,t){var a=Ee()+"api/public/requestid";st(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;pe(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){(function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){te.a.post(e,a,{headers:{"Content-Type":"application/json",requestId:de()}}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))})(Ee()+"api/public/requestid",{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){t(),console.error("ERROR requestApplicationIdNoAuth: ",e)}))}})||yn,jo=function e(){var t=this;Object(f.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,password:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},So=(Nn=Object(h.resolve)(wo),Cn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Profil Pemgguna"),Object(c.a)(n,"userService",On,Object(u.a)(n)),n.state=new jo,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(u.a)(n);(t.files?t.files[0].name:void 0)&&Na(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({user:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getEditedRecord=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new Oo;for(var o in a){a[o]&&"profileImage"!=o&&(r[o]=t[o])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.postRecordSaved=function(e){n.props.setLoggedUser(e.user)},n.state.user=Object.assign(new Oo,n.getLoggedUser()),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.editFields;if(!t)return null;var n=t.profileImage,r=t.username,i=t.displayName,l=t.password,c=(null===n||void 0===n?void 0:n.startsWith("data:image"))?n:ye()+n;return o.a.createElement("div",{id:"UserProfile",className:"container-fluid section-body"},this.titleTag(),o.a.createElement(qt,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center mb-5"},o.a.createElement("img",{width:"100",height:"100",className:"rounded-circle border border-primary mb-5",src:c}),o.a.createElement(mo,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),o.a.createElement(Be,{label:"User Name"},o.a.createElement(co,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:r})),o.a.createElement(Be,{label:"Name"},o.a.createElement(co,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:i})),o.a.createElement(Be,{label:"Password"},o.a.createElement(co,{edit:a.password,updateProperty:this.updateProfileProperty,name:"password",toggleInput:this.toggleInput,value:l})),o.a.createElement(Be,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(lo),On=Object(p.a)(Cn.prototype,"userService",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cn),ko=Object(g.g)(Object(v.b)(q,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:e},meta:{type:"set_logged_user"}}}(t))}}}))(So)),Do=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).transaction=void 0,e.product=new ha,e.expiredDate=new Date,e.count=0,e.usedCount=0,e.stock=0,e.suitable=!0,e.price=0,e.generic=!1,e.referenceProductFlow=void 0,e.stockLocation=void 0,e.batchNum=void 0,e.referencingItems=void 0,e}return Object(s.a)(a,null,[{key:"fromReference",value:function(e){var t=new a;return t.referenceProductFlow=Object.assign(new a,e),t.product=t.referenceProductFlow.product,t}}]),a}(U),Po=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.transactionDate=new Date,e.user=void 0,e.type=void 0,e.supplier=void 0,e.customer=void 0,e.healthCenterDestination=void 0,e.healthCenterLocation=void 0,e.productFlows=[],e.description=void 0,e.destination="CUSTOMER",e.productFlowCount=function(){return e.productFlows.length},e.addProductToFlow=function(t){var a=new Do;a.product=t,e.productFlows.push(a)},e.addProductFlow=function(t){e.productFlows.push(t)},e.hasProductFlowReferenceid=function(t){for(var a=0;a<e.productFlows.length;a++){var n=e.productFlows[a];if(n.referenceProductFlow&&n.referenceProductFlow.id==t)return!0}return!1},e.setProductFlowValue=function(t,a,n){try{e.productFlows[t][a]=n}catch(r){console.error(r)}},e.removeProductFlow=function(t){for(var a=0;a<e.productFlows.length;a++){e.productFlows[a];if(a==t){e.productFlows.splice(a,1);break}}},e}return a}(U),To=Object(y.a)()(wn=function e(){Object(f.a)(this,e),this.submitTransactionOUT=function(e){var t=Object.assign(new yt,{transaction:e}),a=Ee().concat("api/app/transaction/transactionout");return st(a,t)},this.submitTransactionIN=function(e){var t=Object.assign(new yt,{transaction:e}),a=Ee().concat("api/app/transaction/transactionin");return st(a,t)},this.getTransactionByCode=function(e){var t=Ee().concat("api/app/transaction/gettransaction/"+e);return st(t,{})},this.getTransactionRelatedRecord=function(e){var t=Ee().concat("api/app/transaction/relatedrecord/"+e);return st(t,{})},this.deleteTransactionByCode=function(e){var t=Ee().concat("api/app/transaction/deleterecord/"+e);return st(t,{})}})||wn,Io=function e(){Object(f.a)(this,e),this.loading=!1},Fo=(jn=Object(h.resolve)(sa),Sn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"reportService",kn,Object(u.a)(n)),n.state=new Io,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.receiptCreated=function(e){n.showConfirmation("Save "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.printReceipt=function(){n.commonAjaxWithProgress(n.reportService.printTransactionReceipt,n.receiptCreated,n.showCommonErrorAlert,n.props.transactionCode)},n}return Object(s.a)(a,[{key:"render",value:function(){return this.state.loading?o.a.createElement(Ct,{className:"btn btn-dark"},o.a.createElement("span",{className:"spinner-border spinner-border-sm"}),"Loading..."):o.a.createElement(Ct,{onClick:this.printReceipt,show:void 0!=this.props.transactionCode,iconClassName:"fas fa-file",className:"btn btn-dark"},"Cetak Struk")}}]),a}(W),kn=Object(p.a)(Sn.prototype,"reportService",[jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn),Lo=Object(g.g)(Object(v.b)(q)(Fo)),Ao=function e(){Object(f.a)(this,e),this.transaction=void 0,this.transactionCode=void 0,this.dataNotFound=!1,this.loading=!1},xo=(Dn=Object(h.resolve)(To),Pn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Rincian Transaksi"),Object(c.a)(n,"transactionService",Tn,Object(u.a)(n)),n.state=new Ao,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");n.setState({transaction:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transaction:void 0})},n.onSubmit=function(e){e.preventDefault(),n.loadData()},n.loadData=function(){console.debug(" this.state.transactionCode: ",n.state.transactionCode),n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.recordDeleted=function(e){n.showInfo("Record has been successfully deleted"),n.loadData()},n.recordNotDeleted=function(e){var t;console.error(e),n.showError("Cannot delete transaction "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+", please delete all related stock/ product flow data")},n.deleteRecord=function(e){var t;n.state.transaction&&n.showConfirmationDanger("Delete Record with code: "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+"?").then((function(e){var t;e&&n.commonAjax(n.transactionService.deleteTransactionByCode,n.recordDeleted,n.recordNotDeleted,null===(t=n.state.transaction)||void 0===t?void 0:t.code)}))},n.validateTransactionFromProps=function(){if(n.props.match.params&&n.props.match.params.code){var e=n.props.match.params.code;n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,e)}else if(n.props.location.state){var t=n.props.location.state.transaction;t&&n.setState({transaction:Object.assign(new Po,t)})}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.validateTransactionFromProps(),document.title="Transaction Detail"}},{key:"render",value:function(){var e,t;return o.a.createElement("div",{id:"TransactionDetail",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},o.a.createElement(lt,{title:"Cari dengan kode",footerContent:o.a.createElement(r.Fragment,null,o.a.createElement(Ct,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Daftar Record Transaksi"),o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Cari"}))},o.a.createElement(Be,{label:"Kode"},o.a.createElement("input",{required:!0,onChange:this.handleInputChange,value:null!==(e=this.state.transactionCode)&&void 0!==e?e:"",name:"transactionCode",type:"text",placeholder:"Kode Transaksi",className:"form-control"})))),o.a.createElement("div",{className:"col-md-6"}),o.a.createElement("div",{className:"col-md-12"},this.state.loading?o.a.createElement(Ot,null):o.a.createElement(r.Fragment,null,o.a.createElement(ft,{show:1==this.state.dataNotFound},"Transaksi tidak ditemukan"),o.a.createElement(Ro,{show:void 0!=this.state.transaction,transaction:this.state.transaction}),o.a.createElement("div",{className:"btn-group"},o.a.createElement(Ct,{show:void 0!=this.state.transaction,onClick:this.deleteRecord,iconClassName:"fas fa-times",className:"btn btn-danger"},"Hapus Transaksi"),o.a.createElement(Lo,{transactionCode:null===(t=this.state.transaction)||void 0===t?void 0:t.code}))))))}}]),a}(_e),Tn=Object(p.a)(Pn.prototype,"transactionService",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn),Ro=function(e){var t,a,n,i,l;if(0==e.show)return null;var c=e.transaction,s=c.productFlows?c.productFlows:[],u="TRANS_OUT"==c.type,d=new Date(null!==(t=c.transactionDate)&&void 0!==t?t:new Date).toLocaleString("ID"),m=s.map((function(e){return e.price*e.count})).reduce((function(e,t){return e+t}),0),p=s.map((function(e){var t;return parseInt(null!==(t=e.count.toString())&&void 0!==t?t:0)})).reduce((function(e,t){return e+t}),0);return o.a.createElement(lt,{title:"Transaction Data"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(Be,{label:"Id Record",orientation:"horizontal",children:c.id}),o.a.createElement(Be,{label:"Kode",orientation:"horizontal",children:c.code}),o.a.createElement(Be,{label:"Tipe",orientation:"horizontal",children:c.type}),o.a.createElement(Be,{label:"Tanggal",orientation:"horizontal",children:d})),o.a.createElement("div",{className:"col-md-6"},o.a.createElement(r.Fragment,null,o.a.createElement(Be,{show:"TRANS_OUT"==c.type,label:"Pelanggan",orientation:"horizontal",children:null===(a=c.customer)||void 0===a?void 0:a.name}),o.a.createElement(Be,{show:"TRANS_OUT_TO_WAREHOUSE"==c.type,label:"Puskesmas",orientation:"horizontal",children:null===(n=c.healthCenterDestination)||void 0===n?void 0:n.name}),o.a.createElement(Be,{show:"TRANS_IN"==c.type,label:"Pemasok",orientation:"horizontal",children:null===(i=c.supplier)||void 0===i?void 0:i.name})),o.a.createElement(Be,{label:"User",orientation:"horizontal",children:null===(l=c.user)||void 0===l?void 0:l.displayName})),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"alert alert-info"},o.a.createElement("h5",null,"Note:"),c.description)),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("h3",null,"Products"),o.a.createElement("table",{className:"table table-striped"},ht("No","Id Record","Nama","Qty","Unit","Generic","Kadaluarsa","Batch","Harga @Unit","Total Harga",u?"Id Stok":"Used Qty"),o.a.createElement("tbody",null,s.map((function(e,t){var a,n,r,i=null!==(a=e.product)&&void 0!==a?a:new ha,l=e.price;return o.a.createElement("tr",{key:"pf-tr-".concat(t)},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.id),o.a.createElement("td",null,i.name," (",i.code,")"),o.a.createElement("td",null,De(e.count)),o.a.createElement("td",null,null===(n=i.unit)||void 0===n?void 0:n.name),o.a.createElement("td",null,e.generic?"Yes":"No"),o.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),o.a.createElement("td",null,e.batchNum),o.a.createElement("td",null,De(l)),o.a.createElement("td",null,De((null!==l&&void 0!==l?l:0)*(null!==(r=e.count)&&void 0!==r?r:0))),o.a.createElement("td",null,u?e.referenceProductFlow?e.referenceProductFlow.id:"-":De(e.usedCount)))})),o.a.createElement("tr",{className:"text-bolder"},o.a.createElement("td",{colSpan:3}),o.a.createElement("td",null,De(p)),o.a.createElement("td",{colSpan:4}),o.a.createElement("td",{colSpan:2},De(m))))))))},Mo=Object(g.g)(Object(v.b)(q,(function(e){return{}}))(xo)),_o=(In=Object(h.resolve)(Nt),Fn=Object(h.resolve)(dt),Ln=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e,n){var i;return Object(f.a)(this,a),i=t.call(this,e,n),Object(c.a)(i,"masterDataService",An,Object(u.a)(i)),Object(c.a)(i,"inventoryService",xn,Object(u.a)(i)),i.setTransaction=function(e){i.setState({transaction:e})},i.validateTransactionFromProps=function(){if(i.props.location.state){var e=i.props.location.state.transaction;e&&i.setState({transaction:Object.assign(new Po,e)})}},i.removeProductFlow=function(e){i.showConfirmationDanger("Delete Product?").then((function(t){if(t){var a=i.state.transaction;a.removeProductFlow(e),i.setTransaction(a)}}))},i.removeAll=function(){i.showConfirmationDanger("Remove All?").then((function(e){if(e){var t=i.state.transaction;t.productFlows=[],i.setTransaction(t)}}))},i.didMountCallback=function(){},i.updateTransactionGeneralField=function(e){var t,a=e.target.name;t="date"==e.target.type?new Date(e.target.value):e.target.value;var n=i.state.transaction;n[a]=t,i.setTransaction(n)},i.updateProductFlow=function(e){var t=e.target,a=t.dataset.index,n=t.value;if(a){var r=i.state.transaction;"date"==t.type?n=new Date(n):"checkbox"==t.type&&(n=1==t.checked),r.setProductFlowValue(parseInt(a),t.name,n),i.setTransaction(r)}},i.updateTransactionDate=function(e){var t=i.state.transaction;t.transactionDate=e,i.setTransaction(t)},i.buttonSubmitTransaction=function(e){var t,a,n=null!==(t=e.transactionDate)&&void 0!==t?t:new Date;return o.a.createElement(r.Fragment,null,o.a.createElement(Be,{label:"Tanggal"},n.toLocaleDateString("ID")," - ",n.toLocaleTimeString(),o.a.createElement(Yr,{onChange:i.updateTransactionDate,value:null!==n&&void 0!==n?n:new Date})),o.a.createElement(Be,{label:"Catatan"},o.a.createElement("textarea",{value:null!==(a=e.description)&&void 0!==a?a:"",name:"description",onChange:i.updateTransactionGeneralField,className:"form-control"})),o.a.createElement("input",{type:"submit",className:"btn btn-success"}))},i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.validateTransactionFromProps(),this.didMountCallback()}}]),a}(_e),An=Object(p.a)(Ln.prototype,"masterDataService",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xn=Object(p.a)(Ln.prototype,"inventoryService",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln),Uo=function(e){var t,a;return o.a.createElement("form",null,o.a.createElement(lt,{toggleable:!0,title:"Health Center Destination"},o.a.createElement(Be,{label:"Health Center List"},o.a.createElement("select",{value:null!==(t=null===(a=e.value)||void 0===a?void 0:a.id)&&void 0!==t?t:-1,className:"form-control",onChange:e.setHealthCenter},e.healthCenters.map((function(e,t){var a;return o.a.createElement("option",{value:null!==(a=e.id)&&void 0!==a?a:0,key:"hc-frm-".concat(t)},e.name)}))))))},Ho=function(e){var t,a,n=e.transaction,r=n.destination,i=n.healthCenterDestination,l=n.customer;return o.a.createElement(Be,null,"HEALTH_CENTER"==r?null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:o.a.createElement("i",{className:"text-danger"},"Tidak ada puskesmas tujuan"):null,"CUSTOMER"==r?null!==(a=null===l||void 0===l?void 0:l.name)&&void 0!==a?a:o.a.createElement("span",{className:"text-danger"},o.a.createElement("i",{className:"fas fa-exclamation-circle"})," Tidak ada pelanggan"):null)},Yo=function(e){var t,a,n,r=e.productFlow,i=e.index,l=r.product,c=r.referenceProductFlow,s=r.count;return o.a.createElement("tr",null,o.a.createElement("td",null,e.index+1),o.a.createElement("td",null,null===c||void 0===c?void 0:c.id),o.a.createElement("td",null,l.name),o.a.createElement("td",null,null===c||void 0===c?void 0:c.stock),o.a.createElement("td",null,o.a.createElement("input",{required:!0,min:1,max:null!==(t=null===c||void 0===c?void 0:c.stock)&&void 0!==t?t:1,type:"number",className:"form-control",name:"count","data-index":i,onChange:e.updateProductFlow,value:s})),o.a.createElement("td",null,null===(a=l.unit)||void 0===a?void 0:a.name),o.a.createElement("td",null,(null===c||void 0===c?void 0:c.generic)?"Yes":"No"," "),o.a.createElement("td",null,new Date(null!==(n=null===c||void 0===c?void 0:c.expiredDate)&&void 0!==n?n:new Date).toLocaleDateString("ID")),o.a.createElement("td",null,null===c||void 0===c?void 0:c.batchNum),o.a.createElement("td",null,o.a.createElement(it,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){return e.remove(i)}})))},Bo=(Rn=Object(h.resolve)(Nt),Mn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(c.a)(e,"masterDataService",_n,Object(u.a)(e)),e.state={recordNotFound:!1,loading:!1,customerName:""},e.updateField=function(t){var a=t.target,n=a.getAttribute("name");null!=n&&e.setState(Object(_.a)({},n,a.value),e.loadRecords)},e.startLoading=function(){return e.setState({loading:!0})},e.endLoading=function(){return e.setState({loading:!1})},e.searchRecord=function(t){t.preventDefault(),t.preventDefault(),""!=e.state.customerName.trim()&&e.loadRecords()},e.recordsLoaded=function(t){if(!t.entities||!t.entities[0])throw new Error("Pelanggan tidak ditemukan");e.setState({recordList:t.entities,recordNotFound:!1})},e.setCustomer=function(t){e.setState({customer:t,customerName:t.name,recordList:void 0}),e.props.setCustomer&&e.props.setCustomer(t)},e.recordsNotFound=function(t){e.setState({recordNotFound:!0})},e.loadRecords=function(){e.state.loading||e.commonAjax(e.masterDataService.getRecordsByKeyLike,e.recordsLoaded,e.recordsNotFound,"customer","name",e.state.customerName)},e.reset=function(t){e.setState({customerName:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,i=a.customer,l=a.recordNotFound,c=null!==(e=this.state.recordList)&&void 0!==e?e:[];return o.a.createElement("form",{onSubmit:this.searchRecord},o.a.createElement(lt,{toggleable:!0,title:"Pilih Pelanggan",footerContent:o.a.createElement(r.Fragment,null,o.a.createElement(Ct,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/customer",className:"btn btn-outline-secondary"}),o.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),o.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},o.a.createElement("div",{className:"form-group"},o.a.createElement(Be,{label:"Nama"},o.a.createElement("input",{placeholder:"Nama",value:this.state.customerName,onChange:this.updateField,required:!0,className:"form-control",name:"customerName"}),c.length>0?o.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},c.map((function(e){return o.a.createElement("div",{className:"option-item",onClick:function(){return t.setCustomer(e)},style:{cursor:"pointer"},key:"CUST-"+e.id},e.name)})),o.a.createElement("a",{onClick:this.recordsNotFound},o.a.createElement("i",{className:"fas fa-times mr-2"}),"close")):null)),o.a.createElement(Wo,{loading:n,customer:i,notFound:l})))}}]),a}(W),_n=Object(p.a)(Mn.prototype,"masterDataService",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn),Wo=function(e){var t={height:"120px"};if(e.loading)return o.a.createElement("div",{style:t},o.a.createElement(Ot,null));if(1==e.notFound)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-warning"},"Pelanggan tidak ditemukan"));if(!e.customer)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pelanggan"));var a=e.customer;return o.a.createElement("div",{style:t},o.a.createElement("h2",null,a.name),o.a.createElement("p",null,a.age," tahun"),o.a.createElement("address",null,a.address,o.a.createElement("br",null)))},qo=Object(g.g)(Object(v.b)(q)(Bo)),zo=function e(){Object(f.a)(this,e),this.selectedProduct=void 0,this.transaction=new Po,this.availableProducts=void 0,this.healthCenters=[],this.loadingProducts=!1},Vo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e,"Distribusi")).state=new zo,n.updateDestination=function(e){var t=e.target.value,a=n.state.transaction;"CUSTOMER"==t?a.healthCenterDestination=void 0:"HEALTH_CENTER"==t&&(a.customer=void 0,a.healthCenterLocation=n.getMasterHealthCenter(),a.healthCenterDestination=n.state.healthCenters[0]),a.destination=t,n.setState({selectedProduct:void 0,availableProducts:[],transaction:a})},n.healthCentersLoaded=function(e){if(e.entities&&0!=e.entities.length){var t=n.state.transaction;t.healthCenterLocation||(t.healthCenterLocation=n.getMasterHealthCenter()),n.masterDataService.setHealthCenters(e.entities),n.setState({healthCenters:e.entities,transaction:t})}else n.setState({healthCenters:[{id:-1,name:"NO DATA, Please Check Master Data"}]})},n.loadHealthCenters=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state.transaction;t.healthCenterLocation=void 0,!e&&n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.setState({healthCenters:[],transaction:t,availableProduct:[]},(function(){n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)}))},n.setProduct=function(e){n.setState({selectedProduct:e},n.loadAvailableProducts)},n.availableProductsLoaded=function(e){n.setState({availableProducts:e.entities,loadingProducts:!1})},n.availableProductsNotLoaded=function(e){console.error(e),n.setState({loadingProducts:!1})},n.loadAvailableProducts=function(){n.state.selectedProduct&&n.state.transaction.healthCenterLocation?n.state.loadingProducts||(n.commonAjax(n.inventoryService.getAvailableProducts,n.availableProductsLoaded,n.availableProductsNotLoaded,n.state.selectedProduct.code,n.state.transaction.healthCenterLocation),n.setState({loadingProducts:!0})):console.warn("(!this.state.selectedProduct || !this.state.selectedHealthCenter)")},n.didMountCallback=function(){n.loadHealthCenters()},n.addToCart=function(e){var t=Do.fromReference(e),a=n.state.transaction;a.addProductFlow(t),n.setTransaction(a)},n.updateSelectedHealthCenter=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));"HEALTH_CENTER"!=n.state.transaction.destination&&n.showConfirmation("Ubah Lokasi").then((function(e){if(e){var t=new Po;t.healthCenterLocation=a[0],a.length>0&&n.setState({selectedProduct:void 0,availableProducts:[],transaction:t})}}))},n.setCustomer=function(e){var t=n.state.transaction;t.customer=e,n.setTransaction(t)},n.submit=function(e){e.preventDefault(),n.state.transaction.healthCenterLocation&&(n.state.transaction.customer||n.state.transaction.healthCenterDestination)?n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productout/confirm",state:{transaction:n.state.transaction}})})):n.showError("Silakan lengkapi kolom")},n.setHealthCenterDestination=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return e.id==parseInt(null!==(a=t.value)&&void 0!==a?a:"0")}));if(0!=a.length){var r=n.state.transaction;r.healthCenterDestination=a[0],n.setTransaction(r)}},n.state.transaction.healthCenterLocation=n.getMasterHealthCenter(),n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a,n,r,i=this,l=null!==(e=this.state.availableProducts)&&void 0!==e?e:[],c=this.state.transaction,s=this.state.healthCenters;return c.healthCenterLocation&&0!=s.length?o.a.createElement("div",{className:"container-fluid section-body"},this.titleTag(),o.a.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"alert alert-info"},this.userGreeting(),o.a.createElement("p",null),o.a.createElement(Be,{label:"Lokasi"},o.a.createElement("select",{autoComplete:"off",value:null!==(t=null===(a=c.healthCenterLocation)||void 0===a?void 0:a.id)&&void 0!==t?t:0,onChange:this.updateSelectedHealthCenter,className:"form-control"},s.map((function(e,t){var a;return o.a.createElement("option",{key:"opt-location-"+t,value:null!==(a=e.id)&&void 0!==a?a:0},e.name)})))),o.a.createElement(Be,{label:"Tujuan"},o.a.createElement("select",{autoComplete:"off",value:c.destination,onChange:this.updateDestination,className:"form-control"},o.a.createElement("option",{value:"CUSTOMER"},"Pelanggan"),(null===(n=c.healthCenterLocation)||void 0===n?void 0:n.id)==this.getMasterHealthCenter().id&&o.a.createElement("option",{value:"HEALTH_CENTER"},"Puskesmas"))),o.a.createElement(Ho,{transaction:c}),o.a.createElement(it,{iconClassName:"fas fa-sync-alt",className:"btn btn-secondary btn-sm",onClick:function(e){return i.loadHealthCenters(!0)},children:"Reload Location"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement(St,{setProduct:this.setProduct})),o.a.createElement("div",{className:"col-6"},"CUSTOMER"===c.destination?o.a.createElement(qo,{setCustomer:this.setCustomer}):o.a.createElement(Uo,{value:c.healthCenterDestination,setHealthCenter:this.setHealthCenterDestination,healthCenters:this.state.healthCenters}))),o.a.createElement(lt,{toggleable:!0,title:"Produk tersedia di "+(null===(r=c.healthCenterLocation)||void 0===r?void 0:r.name)},o.a.createElement("table",{className:"table table-striped"},ht("No","Id Stok","Nama","Jumlah Masuk","Digunakan","Stok","Unit","Generik","Kadaluarsa","Batch","Opsi"),o.a.createElement("tbody",null,this.state.loadingProducts?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:9},o.a.createElement(Ot,null))):0==l.length?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:9},o.a.createElement(va,{children:"Tidak ada data"}))):l.map((function(e,t){var a,n,r,l=null!==(a=e.product)&&void 0!==a?a:new ha,s=c.hasProductFlowReferenceid(null!==(n=e.id)&&void 0!==n?n:0);return o.a.createElement("tr",{key:"pf-tr-"+t},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.id),o.a.createElement("td",null,l.name," (",l.code,")"),o.a.createElement("td",null,e.count),o.a.createElement("td",null,e.usedCount),o.a.createElement("td",null,De(e.stock)),o.a.createElement("td",null,null===(r=l.unit)||void 0===r?void 0:r.name),o.a.createElement("td",null,e.generic?"Yes":"No"),o.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),o.a.createElement("td",null,e.batchNum),o.a.createElement("td",null,s&&o.a.createElement("i",{className:"fas fa-check text-success"}),o.a.createElement(it,{show:0==s,onClick:function(t){return i.addToCart(e)},iconClassName:"fas fa-plus",className:"btn btn-dark btn-sm"})))}))))),o.a.createElement("p",null),o.a.createElement(qt,{title:"Daftar Produk"},o.a.createElement("form",{onSubmit:this.submit},o.a.createElement("table",{className:"table table-striped"},ht("No","Id Stok","Nama","Stok","Qty","Unit","Generk","Kadaluarsa","Batch","Opsi"),o.a.createElement("tbody",null,c.productFlows.map((function(e,t){return o.a.createElement(Yo,{updateProductFlow:i.updateProductFlow,productFlow:e,key:"PF_ITEM_"+t,index:t,remove:i.removeProductFlow})})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:9},o.a.createElement(it,{show:c.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All"))))),(c.customer||c.healthCenterDestination)&&c.productFlowCount()>0&&this.buttonSubmitTransaction(c))),o.a.createElement("p",null)):o.a.createElement("div",{className:"container-fluid section-body"},this.titleTag(),o.a.createElement(Ot,null))}}]),a}(_o),Ko=Object(g.g)(Object(v.b)(q)(Vo)),Go=function e(){Object(f.a)(this,e),this.transaction=void 0},Xo=(Un=Object(h.resolve)(To),Hn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Konfirmasi Transaksi"),Object(c.a)(n,"transactionService",Yn,Object(u.a)(n)),n.state=new Go,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Po,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productout",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Po:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaction Success"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionOUT,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.validateTransactionFromProps()}},{key:"render",value:function(){var e,t,a,n,i,l=this.state.transaction;return l?o.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),o.a.createElement(qt,{title:"Information"},l.code?o.a.createElement(Be,{label:"Kode"},l.code):null,o.a.createElement(Be,{label:"Tanggal"},new Date(l.transactionDate).toLocaleString()),o.a.createElement(Be,{label:"Lokasi"},null===(e=l.healthCenterLocation)||void 0===e?void 0:e.name),o.a.createElement(Be,{label:"Pelanggan"},null!==(t=null===(a=l.customer)||void 0===a?void 0:a.name)&&void 0!==t?t:"-"),o.a.createElement(Be,{label:"Puskesmas"},null!==(n=null===(i=l.healthCenterDestination)||void 0===i?void 0:i.name)&&void 0!==n?n:"-"),o.a.createElement(Be,{label:"Catatan"}," ",l.description,"  "),o.a.createElement(r.Fragment,null,o.a.createElement(it,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Back"}),o.a.createElement(it,{show:void 0==l.code,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"}))),o.a.createElement("p",null),o.a.createElement(qt,{title:"Product List"},o.a.createElement("table",{className:"table table-striped"},ht("No","Id Stok","Nama","Stok","Qty","Unit","Generik","Kadaluarsa","Batch"),o.a.createElement("tbody",null,l.productFlows.map((function(e,t){return o.a.createElement(Qo,{productFlow:e,index:t,key:"pf-tr-cnfm-".concat(t)})}))))),o.a.createElement("p",null)):null}}]),a}(_e),Yn=Object(p.a)(Hn.prototype,"transactionService",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn),Qo=function(e){var t,a=e.productFlow,n=e.index,r=a.product,i=a.referenceProductFlow,l=a.expiredDate,c=a.count;return o.a.createElement("tr",null,o.a.createElement("td",null,n+1),o.a.createElement("td",null,null===i||void 0===i?void 0:i.id),o.a.createElement("td",null,r.name),o.a.createElement("td",null,null===i||void 0===i?void 0:i.stock," "),o.a.createElement("td",null,De(c)),o.a.createElement("td",null,null===(t=r.unit)||void 0===t?void 0:t.name),o.a.createElement("td",null,(null===i||void 0===i?void 0:i.generic)?"Yes":"No"),o.a.createElement("td",null,new Date(l).toLocaleDateString("ID")),o.a.createElement("td",null,null===i||void 0===i?void 0:i.batchNum))},Jo=Object(g.g)(Object(v.b)(q)(Xo)),Zo=function e(){Object(f.a)(this,e),this.transaction=void 0,this.transactionCode=void 0,this.dataNotFound=!1,this.loading=!1},$o=(Bn=Object(h.resolve)(To),Wn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Pemetaan Stok Transaksi"),Object(c.a)(n,"transactionService",qn,Object(u.a)(n)),n.state=new Zo,n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");n.setState({transaction:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transaction:void 0})},n.onSubmit=function(e){e.preventDefault(),n.loadData()},n.loadData=function(){n.commonAjaxWithProgress(n.transactionService.getTransactionRelatedRecord,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.validateTransactionFromProps=function(){if(n.props.match.params&&n.props.match.params.code){var e=n.props.match.params.code;n.commonAjaxWithProgress(n.transactionService.getTransactionRelatedRecord,n.recordLoaded,n.recordNotLoaded,e)}else if(n.props.location.state){var t=n.props.location.state.transaction;t&&n.setState({transaction:Object.assign(new Po,t)})}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.validateTransactionFromProps()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.transaction,n=e.dataNotFound,i=e.transactionCode;return o.a.createElement("div",{id:"TransactionRelatedRecord",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},o.a.createElement(lt,{title:"Cari dengan kode",footerContent:o.a.createElement(r.Fragment,null,o.a.createElement(Ct,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Daftar Record Transaksi"),o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Cari"}))},o.a.createElement(Be,{label:"Kode"},o.a.createElement("input",{value:null!==i&&void 0!==i?i:"",required:!0,onChange:this.handleInputChange,type:"text",name:"transactionCode",placeholder:"Kode Transaksi",className:"form-control"})))),o.a.createElement("div",{className:"col-md-6"}),o.a.createElement("div",{className:"col-md-12"},t?o.a.createElement(Ot,null):o.a.createElement(r.Fragment,null,o.a.createElement(ft,{show:1==n},"Transaksi tidak ditemukan"),o.a.createElement(ei,{show:void 0!=a,transaction:a})))))}}]),a}(_e),qn=Object(p.a)(Wn.prototype,"transactionService",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn),ei=function(e){var t;if(0==e.show||!e.transaction)return null;var a=e.transaction,n=a.user,i=a.type,l=a.supplier,c=a.customer,s=a.healthCenterDestination,u=a.description,d=a.productFlows?a.productFlows:[],m=new Date(null!==(t=a.transactionDate)&&void 0!==t?t:new Date).toLocaleString("ID");return o.a.createElement(lt,{title:"Transaction Data"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(Be,{label:"Id Record",orientation:"horizontal",children:a.id}),o.a.createElement(Be,{label:"Kode",orientation:"horizontal",children:a.code}),o.a.createElement(Be,{label:"Tipe",orientation:"horizontal",children:a.type}),o.a.createElement(Be,{label:"Tanggal",orientation:"horizontal",children:m})),o.a.createElement("div",{className:"col-md-6"},o.a.createElement(r.Fragment,null,o.a.createElement(Be,{show:"TRANS_OUT"==i,label:"Pelanggan",orientation:"horizontal",children:null===c||void 0===c?void 0:c.name}),o.a.createElement(Be,{show:"TRANS_OUT_TO_WAREHOUSE"==i,label:"Puskesmas",orientation:"horizontal",children:null===s||void 0===s?void 0:s.name}),o.a.createElement(Be,{show:"TRANS_IN"==i,label:"Pemasok",orientation:"horizontal",children:null===l||void 0===l?void 0:l.name})),o.a.createElement(Be,{label:"User",orientation:"horizontal",children:null===n||void 0===n?void 0:n.displayName})),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"alert alert-info"},o.a.createElement("h5",null,"Note:"),u)),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("h3",null,"Products"),o.a.createElement("table",{className:"table xtable-striped"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No"),o.a.createElement("th",{colSpan:4},"Name"),o.a.createElement("th",null,"Qty"),o.a.createElement("th",null,"Trans. Code"),o.a.createElement("th",null,"Date"))),o.a.createElement("tbody",null,d.map((function(e,t){var a,n,i,l,c,s,u=null!==(a=e.referencingItems)&&void 0!==a?a:[];return o.a.createElement(r.Fragment,{key:"main-pf-".concat(t)},o.a.createElement("tr",null,o.a.createElement("td",{children:t+1}),o.a.createElement("td",{colSpan:4},"Item Id: ",e.id,o.a.createElement("br",null),null===(n=e.product)||void 0===n?void 0:n.name," | ",null===(i=e.product)||void 0===i||null===(l=i.unit)||void 0===l?void 0:l.name),o.a.createElement("td",null,e.count),o.a.createElement("td",null,null===(c=e.transaction)||void 0===c?void 0:c.code,o.a.createElement("br",null),"(",null===(s=e.transaction)||void 0===s?void 0:s.type,")"),o.a.createElement("td",null,ti(e.transaction))),u&&o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",{style:{fontSize:"0.7em"},colSpan:7},"Usage List")),u.map((function(e,a){var n,i,l,c=null!==(n=e.referencingItems)&&void 0!==n?n:[];return o.a.createElement(r.Fragment,{key:"ref-pf-".concat(a,"-").concat(t)},o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",{children:a+1}),o.a.createElement("td",{colSpan:3},"Item Id: ",e.id),o.a.createElement("td",null,e.count),o.a.createElement("td",null,null===(i=e.transaction)||void 0===i?void 0:i.code,o.a.createElement("br",null),"(",null===(l=e.transaction)||void 0===l?void 0:l.type,")"),o.a.createElement("td",null,ti(e.transaction))),c.length>0&&o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2}),o.a.createElement("td",{style:{fontSize:"0.7em"},colSpan:6},"Usage List")),c.map((function(e,n){var i,l;return o.a.createElement(r.Fragment,{key:"ref-pf2-".concat(a,"-").concat(t,"-").concat(n)},o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2}),o.a.createElement("td",{children:n+1}),o.a.createElement("td",{colSpan:2},"Item Id: ",e.id),o.a.createElement("td",null,e.count),o.a.createElement("td",null,null===(i=e.transaction)||void 0===i?void 0:i.code,o.a.createElement("br",null),"(",null===(l=e.transaction)||void 0===l?void 0:l.type,")"),o.a.createElement("td",null,ti(e.transaction))))})))})))})))))))},ti=function(e){if(!e||!e.transactionDate)return null;var t=new Date(e.transactionDate);return t.toLocaleDateString("ID")+" "+t.toLocaleTimeString()},ai=Object(g.g)(Object(v.b)(q)($o)),ni=(zn=Object(h.resolve)(Nt),Vn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(c.a)(e,"masterDataService",Kn,Object(u.a)(e)),e.state={recordNotFound:!1,loading:!1,supplierName:""},e.updateField=function(t){var a=t.target,n=a.getAttribute("name");null!=n&&e.setState(Object(_.a)({},n,a.value),e.loadRecords)},e.startLoading=function(){return e.setState({loading:!0})},e.endLoading=function(){return e.setState({loading:!1})},e.searchRecord=function(t){t.preventDefault(),""!=e.state.supplierName.trim()&&e.loadRecords()},e.recordsLoaded=function(t){if(console.debug("response: ",t),!t.entities||!t.entities[0])throw new Error("Pemasok tidak ditemukan");e.setState({recordList:t.entities,recordNotFound:!1})},e.setSupplier=function(t){e.setState({supplierName:t.name,supplier:t,recordList:void 0,recordNotFound:!1}),e.props.setSupplier&&e.props.setSupplier(t)},e.recordsNotFound=function(t){e.setState({recordNotFound:!0,supplier:void 0,recordList:void 0})},e.loadRecords=function(){!e.state.loading&&e.state.supplierName&&e.commonAjax(e.masterDataService.getRecordsByKeyLike,e.recordsLoaded,e.recordsNotFound,"supplier","name",e.state.supplierName)},e.reset=function(t){e.setState({supplierName:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=null!==(e=this.state.recordList)&&void 0!==e?e:[];return o.a.createElement("form",{onSubmit:this.searchRecord},o.a.createElement(lt,{toggleable:!0,title:"Pilih Pemasok",footerContent:o.a.createElement(r.Fragment,null,o.a.createElement(Ct,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/supplier",className:"btn btn-outline-secondary"}),o.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),o.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},o.a.createElement("div",{className:"form-group"},o.a.createElement(Be,{label:"Nama"},o.a.createElement("input",{placeholder:"Nama Pemasok",required:!0,className:"form-control",onChange:this.updateField,value:null!==(t=this.state.supplierName)&&void 0!==t?t:"",name:"supplierName"}),n.length>0?o.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},n.map((function(e){return o.a.createElement("div",{className:"option-item",onClick:function(){a.setSupplier(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),o.a.createElement("a",{onClick:this.recordsNotFound},o.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),o.a.createElement(ri,{loading:this.state.loading,supplier:this.state.supplier,notFound:this.state.recordNotFound})))}}]),a}(W),Kn=Object(p.a)(Vn.prototype,"masterDataService",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vn),ri=function(e){var t={height:"120px"};if(e.loading)return o.a.createElement("div",{style:t},o.a.createElement(Ot,null));if(1==e.notFound)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-warning"},"Pemasok tidak ditemukan"));if(!e.supplier)return o.a.createElement("div",{style:t},o.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pemasok"));var a=e.supplier;return o.a.createElement("div",{style:t},o.a.createElement("h2",null,a.name),o.a.createElement("p",null,"Kode: ",a.code),o.a.createElement("address",null,a.address,o.a.createElement("br",null),o.a.createElement("abbr",{title:"Contact"},"Kontak: "),a.contact))},oi=Object(g.g)(Object(v.b)(q,(function(e){return{}}))(ni)),ii=function e(){Object(f.a)(this,e),this.transaction=new Po,this.selectedProduct=void 0},li=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e,"Suplai Pasokan")).state=new ii,n.setSupplier=function(e){var t=n.state.transaction;t.supplier=e,n.setTransaction(t)},n.setTransaction=function(e){n.setState({transaction:e})},n.setProduct=function(e){n.setState({selectedProduct:e})},n.addToCart=function(e){var t=n.state.transaction;t.addProductToFlow(e),n.setState({transaction:t,selectedProduct:void 0})},n.submit=function(e){e.preventDefault(),n.state.transaction.supplier&&0!=n.state.transaction.productFlowCount()&&n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productin/confirm",state:{transaction:n.state.transaction}})}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedProduct,n=t.transaction,r=n.productFlows,i=r.map((function(e){return e.price*e.count})).reduce((function(e,t){return e+t}),0),l=r.map((function(e){var t;return parseInt(null!==(t=e.count.toString())&&void 0!==t?t:0)})).reduce((function(e,t){return e+t}),0);return o.a.createElement("div",{className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},this.userGreeting(),o.a.createElement("p",null),o.a.createElement(Be,{label:"Lokasi"},o.a.createElement("span",{className:"form-control"},this.getMasterHealthCenter().name," "))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement(St,{setProduct:this.setProduct})),o.a.createElement("div",{className:"col-6"},o.a.createElement(oi,{setSupplier:this.setSupplier}))),o.a.createElement(qt,{title:"Rincian Produk"},a?o.a.createElement(si,{addToCart:this.addToCart,product:a}):o.a.createElement("i",null,"Tidak ada data")),o.a.createElement("p",null),o.a.createElement(qt,{title:"Daftar Produk"},o.a.createElement("form",{onSubmit:this.submit},o.a.createElement("table",{className:"table table-striped"},ht("No","Nama","Qty","Unit","Harga @Unit","Harga","Generik","Kadaluarsa","Batch","Opsi"),o.a.createElement("tbody",null,r.map((function(t,a){return o.a.createElement(ci,{updateProductFlow:e.updateProductFlow,productFlow:t,key:"PF_ITEM_"+a,index:a,remove:e.removeProductFlow})})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},o.a.createElement(it,{show:n.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All")),o.a.createElement("td",null,De(l)),o.a.createElement("td",{colSpan:2}),o.a.createElement("td",{colSpan:2},De(i)),o.a.createElement("td",{colSpan:2})))),n.supplier&&n.productFlowCount()>0&&this.buttonSubmitTransaction(n))),o.a.createElement("p",null))}}]),a}(_o),ci=function(e){var t,a,n=e.productFlow.product;return o.a.createElement("tr",null,o.a.createElement("td",null,e.index+1),o.a.createElement("td",null,n.name),o.a.createElement("td",null,o.a.createElement("input",{required:!0,min:1,type:"number",className:"form-control",name:"count","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.count})),o.a.createElement("td",null,null===(t=n.unit)||void 0===t?void 0:t.name),o.a.createElement("td",null,o.a.createElement("input",{required:!0,type:"number",step:.001,className:"form-control",name:"price","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.price})),o.a.createElement("td",null,De(e.productFlow.count*e.productFlow.price)),o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",className:"form-control",name:"generic","data-index":e.index,onChange:e.updateProductFlow,checked:1==e.productFlow.generic})),o.a.createElement("td",null,o.a.createElement("input",{required:!0,type:"date",className:"form-control",name:"expiredDate","data-index":e.index,onChange:e.updateProductFlow,value:Ke(null!==(a=e.productFlow.expiredDate)&&void 0!==a?a:new Date)})),o.a.createElement("td",null,o.a.createElement("input",{required:!0,type:"text",className:"form-control",name:"batchNum","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.batchNum})),o.a.createElement("td",null,o.a.createElement(it,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},si=function(e){var t;return o.a.createElement("div",null,o.a.createElement(Be,{label:"Nama"},e.product.name),o.a.createElement(Be,{label:"Unit"},null===(t=e.product.unit)||void 0===t?void 0:t.name),o.a.createElement(Be,{label:"Alat Kesehatan"},1==e.product.utilityTool?"Yes":"No"),o.a.createElement(Be,{label:"Deskripsi"},e.product.description),o.a.createElement(it,{className:"btn btn-dark",iconClassName:"fas fa-plus",onClick:function(t){return e.addToCart(e.product)}},"Add To Cart"))},ui=Object(g.g)(Object(v.b)(q)(li)),di=function e(){Object(f.a)(this,e),this.transaction=void 0},mi=(Gn=Object(h.resolve)(To),Xn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e,"Konfirmasi Transaksi"),Object(c.a)(n,"transactionService",Qn,Object(u.a)(n)),n.state=new di,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Po,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productin",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Po:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaksi Berhasil"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionIN,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollTop(),this.validateTransactionFromProps()}},{key:"render",value:function(){var e=this.state.transaction;if(!e)return null;var t=e.productFlows,a=e.code,n=e.supplier,r=e.transactionDate,i=e.description,l=t.map((function(e){return e.price*e.count})).reduce((function(e,t){return e+t}),0),c=t.map((function(e){var t;return parseInt(null!==(t=e.count.toString())&&void 0!==t?t:0)})).reduce((function(e,t){return e+t}),0);return o.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),o.a.createElement(qt,{title:"Information"},a&&o.a.createElement(Be,{label:"Kode"},e.code),o.a.createElement(Be,{label:"Tanggal"},new Date(r).toString()),o.a.createElement(Be,{label:"Pemasok"},null===n||void 0===n?void 0:n.name),o.a.createElement(Be,{label:"Catatan"}," ",i,"  "),o.a.createElement(it,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Kembali"}),o.a.createElement(it,{show:void 0==a,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"})),o.a.createElement("p",null),o.a.createElement(qt,{title:"Product List"},o.a.createElement("table",{className:"table table-striped"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No"),o.a.createElement("th",null,"Nama"),o.a.createElement("th",null,"Qty"),o.a.createElement("th",null,"Unit"),o.a.createElement("th",null,"Generik"),o.a.createElement("th",null,"Harga @Unit"),o.a.createElement("th",null,"Harga Total"),o.a.createElement("th",null,"Kadaluarsa"),o.a.createElement("th",null,"Batch"))),o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement(pi,{productFlow:e,index:t,key:"pf-tr-cnfm-".concat(t)})})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2}),o.a.createElement("td",null,De(c)),o.a.createElement("td",{colSpan:3}),o.a.createElement("td",{colSpan:2},De(l)))))),o.a.createElement("p",null))}}]),a}(_e),Qn=Object(p.a)(Xn.prototype,"transactionService",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn),pi=function(e){var t,a=e.productFlow,n=e.index,r=a.price,i=a.count,l=a.product,c=a.generic,s=a.expiredDate,u=a.batchNum;return o.a.createElement("tr",null,o.a.createElement("td",null,n+1),o.a.createElement("td",null,l.name),o.a.createElement("td",null,De(i)),o.a.createElement("td",null,null===(t=l.unit)||void 0===t?void 0:t.name),o.a.createElement("td",null,c?"Yes":"No"),o.a.createElement("td",null,De(r)),o.a.createElement("td",null,De(r*i)),o.a.createElement("td",null,s?new Date(s).toLocaleDateString("ID"):"-"),o.a.createElement("td",null,u))},fi=Object(g.g)(Object(v.b)(q)(mi)),hi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e,"Transaksi")}return Object(s.a)(a,[{key:"render",value:function(){var e;return o.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},this.titleTag(),o.a.createElement("div",{className:"alert alert-info"},ke(),", ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),o.a.createElement("hr",null)))}}]),a}(_e),vi=Object(g.g)(Object(v.b)(q)(hi)),gi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setSidebarMenus=function(t){e.props.setSidebarMenus(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.isUserLoggedIn(),a=o.a.createElement(g.a,{to:"/"});return o.a.createElement(r.Fragment,null,o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/login",render:function(){return o.a.createElement(mr,null)}}),o.a.createElement(g.b,{exact:!0,path:"/home",render:function(){return o.a.createElement(ea,null)}}),o.a.createElement(g.b,{exact:!0,path:"/",render:function(){return o.a.createElement(ea,null)}}),o.a.createElement(g.b,{exact:!0,path:"/about",render:function(){return o.a.createElement(Zt,null)}}),o.a.createElement(g.b,{exact:!0,path:"/management",render:function(n){return t?o.a.createElement(io,{setSidebarMenus:e.setSidebarMenus}):a}}),o.a.createElement(g.b,{exact:!0,path:"/management/:code",render:function(n){return t?o.a.createElement(io,{setSidebarMenus:e.setSidebarMenus}):a}})),o.a.createElement(bi,{loggedIn:t,redirect:a}),o.a.createElement(Ei,{loggedIn:t,redirect:a}),o.a.createElement(yi,{loggedIn:t,redirect:a}),o.a.createElement(Ni,{loggedIn:t,redirect:a}))}}]),a}(W),bi=function(e){var t=e.loggedIn,a=e.redirect;return o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/dashboard",render:function(e){return t?o.a.createElement(He,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/dashboard/info",render:function(e){return t?o.a.createElement(He,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/dashboard/productstat",render:function(e){return t?o.a.createElement(Et,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/dashboard/productstatdetail",render:function(e){return t?o.a.createElement(Qt,null):a}}))},Ei=function(e){var t=e.loggedIn,a=e.redirect;return o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/settings",render:function(e){return t?o.a.createElement(Co,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/settings/user-profile",render:function(e){return t?o.a.createElement(ko,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/settings/app-profile",render:function(e){return t?o.a.createElement(vo,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/settings/inventory-config",render:function(e){return t?o.a.createElement(yo,null):a}}))},yi=function(e){var t=e.loggedIn,a=e.redirect;return o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/transaction",render:function(e){return t?o.a.createElement(vi,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/productin",render:function(e){return t?o.a.createElement(ui,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/productin/confirm",render:function(e){return t?o.a.createElement(fi,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/productout",render:function(e){return t?o.a.createElement(Ko,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/productout/confirm",render:function(e){return t?o.a.createElement(Jo,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/detail",render:function(e){return t?o.a.createElement(Mo,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/detail/:code",render:function(e){return t?o.a.createElement(Mo,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/relatedrecord",render:function(e){return t?o.a.createElement(ai,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/transaction/relatedrecord/:code",render:function(e){return t?o.a.createElement(ai,null):a}}))},Ni=function(e){var t=e.loggedIn,a=e.redirect;return o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/inventory",render:function(e){return t?o.a.createElement(aa,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/inventory/stock",render:function(e){return t?o.a.createElement(xa,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/inventory/status",render:function(e){return t?o.a.createElement(ca,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/inventory/stockfilter",render:function(e){return t?o.a.createElement(ir,null):a}}),o.a.createElement(g.b,{exact:!0,path:"/inventory/report",render:function(e){return t?o.a.createElement(pa,null):a}}))},Ci=Object(g.g)(Object(v.b)(q,(function(e){return{}}))(gi)),Oi=(a(123),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).isSidebarActive=function(t){var a=e.props.parentMenu;if(null==a)return!1;var n=e.props.location.pathname;return a.url+"/"+t.url==n},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e,t=this,a=this.props.parentMenu;if(null==a)return null;var n=null!==(e=this.props.sidebarMenus)&&void 0!==e?e:[];return o.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},o.a.createElement(wi,{show:null!=a,brand:a}),o.a.createElement("li",null,o.a.createElement("div",{className:"sidebar-item-separator"})),n.map((function(e){var n=t.isSidebarActive(e)?"menu-active":"regular-menu";return o.a.createElement("li",{className:"sidebar-item ".concat(n),key:"SIDEBAR_".concat(e.code)},o.a.createElement(we.b,{to:"".concat(a.url,"/").concat(e.url)},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:Te.getIconClassName(e)})),o.a.createElement("span",{className:"menu-label"},e.name)))})))}}]),a}(W)),wi=function(e){return 0==e.show?null:o.a.createElement(r.Fragment,null,o.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand mb-5"},o.a.createElement("div",{className:"text-center py-5"},o.a.createElement("h3",{className:"text-dark"},o.a.createElement("i",{className:Te.getIconClassName(e.brand)})),o.a.createElement(we.b,{to:e.brand.url,style:{textDecoration:"none"}},o.a.createElement("h4",{className:"text-dark pb-5"},e.brand.name)))),o.a.createElement("li",{className:"sidebar-item-brand "},o.a.createElement(we.b,{to:e.brand.url},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:Te.getIconClassName(e.brand)})))))},ji=Object(g.g)(Object(v.b)(q,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Oi)),Si=(a(124),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/");console.debug("pathName: ",e);var a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){try{for(var t=0;t<Fe.length;t++){var a=Fe[t];if(a.url=="/"+e)return a}return null}catch(n){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(E.a)({},n.state),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return o.a.createElement("div",{id:"main-layout"},o.a.createElement(Me,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),o.a.createElement("div",{id:"page-content",className:"container-fluid"},o.a.createElement("main",{className:"container-fluid",style:{zIndex:1,position:"absolute",paddingTop:"55px"},id:e?"app-content":"content"},o.a.createElement(Ci,{setSidebarMenus:this.setSidebarMenus})),e&&o.a.createElement(ji,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu})))}}]),a}(W)),ki=Object(g.g)(Object(v.b)(q,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Si)),Di=a(82),Pi=a.n(Di),Ti=(a(162),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).intervalId=void 0,n.update=function(){n.state.timer<0&&clearInterval(n.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n.state={timer:130},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){!0===this.props.withTimer&&(this.intervalId=setInterval(this.update,1,null))}},{key:"render",value:function(){var e="custom-loading custom-loading-"+this.props.type,t=this.props,a=t.realtime,n=t.progress;return a?o.a.createElement(Ii,{progress:n,realtime:a}):o.a.createElement("div",{className:e},o.a.createElement(Ii,{progress:n,realtime:a}))}}]),a}(r.Component)),Ii=function(e){if(e.realtime){var t=e.progress;return o.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},o.a.createElement("div",{className:"col-1"},o.a.createElement("span",{className:"spinner-border spinner-border-sm mb-2 mr-2",role:"status"}),o.a.createElement("span",null,t,"%")),o.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},o.a.createElement("div",{className:"bg-primary",style:{width:"".concat(e.progress,"%"),transitionDuration:"50ms",margin:0}})))}return o.a.createElement("button",{className:"btn btn-dark",type:"button",disabled:!0},o.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status"}),o.a.createElement("span",{className:" "},"Loading..."))},Fi=Ti,Li=(Jn=Object(h.resolve)(B),Zn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"service",$n,Object(u.a)(n)),n.loadings=0,n.sockJsClient=o.a.createRef(),n.stop=function(){try{n.decrementLoadings(),0==n.loadings&&(n.state.withRealtimeProgress?n.setState({loadingPercentage:100},n.smoothEndLoading):n.setState({show:!1,loadingPercentage:0}))}catch(e){console.error(e)}},n.smoothEndLoading=function(){N((function(){n.setState({show:!1,loadingPercentage:0})}),100)},n.handleOnWebsocketMessage=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.stop(),n.setState({loadingPercentage:r})},n.start=function(e){n.setState({show:!0,withRealtimeProgress:e},n.incrementLoadings)},n.state={show:!1,withRealtimeProgress:!1,loadingPercentage:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.service.setContainer(this)}},{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"render",value:function(){var e=this,t=Ee();return o.a.createElement(r.Fragment,null,o.a.createElement(Pi.a,{url:t+"realtime-app",topics:[this.websocketTopic],onMessage:this.handleOnWebsocketMessage,ref:function(t){e.sockJsClient=t}}),this.state.show&&o.a.createElement(Fi,{realtime:this.state.withRealtimeProgress,progress:this.state.loadingPercentage,type:"loading"}))}},{key:"websocketTopic",get:function(){return"/wsResp/progress/".concat(this.props.id)}}]),a}(r.Component),$n=Object(p.a)(Zn.prototype,"service",[Jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zn),Ai=function e(){Object(f.a)(this,e),this.errorRequestAppId=!1,this.requestId=void 0,this.appIdStatus="Loading App Id"},xi=(er=Object(h.resolve)(wo),tr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(f.a)(this,a),n=t.call(this,e),Object(c.a)(n,"userService",ar,Object(u.a)(n)),n.requestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application"}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(u.a)(n)),n.refresh()}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application (Retrying)"}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(u.a)(n))}),n.errorRequestingAppId)},n.errorRequestingAppId=function(){n.setState({errorRequestAppId:!0})},n.state=new Ai,n.props.setMainApp(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"refresh",value:function(){this.forceUpdate()}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",ye()+e.pageIcon)}}(this.props.applicationProfile)}},{key:"componentDidMount",value:function(){this.requestAppId()}},{key:"render",value:function(){return this.props.requestId?o.a.createElement(r.Fragment,null,o.a.createElement(Li,{id:this.props.requestId}),o.a.createElement(M,null),o.a.createElement(ki,null)):o.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},o.a.createElement("h2",null,this.state.appIdStatus),this.state.errorRequestAppId?o.a.createElement("a",{className:"btn btn-outline-dark",onClick:this.retryRequestAppId},o.a.createElement("i",{className:"fas fa-redo"})):o.a.createElement(Ot,null))}}]),a}(r.Component),ar=Object(p.a)(tr.prototype,"userService",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr);var Ri=Object(g.g)(Object(v.b)(q,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){var a={type:"SET_REQUEST_ID",payload:Object(E.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}};return console.debug("setRequestId: ",a),a}(t,a))}}}))(xi)),Mi=new(a(165).a);Mi.bind(dt).toSelf().inSingletonScope(),Mi.bind(Nt).toSelf().inSingletonScope(),Mi.bind(sa).toSelf().inSingletonScope(),Mi.bind(To).toSelf().inSingletonScope(),Mi.bind(wo).toSelf().inSingletonScope(),Mi.bind(C).toSelf().inSingletonScope(),Mi.bind(B).toSelf().inSingletonScope();var _i=function(e){var t=ce();return o.a.createElement(v.a,{store:t},o.a.createElement(h.Provider,{container:Mi},o.a.createElement(we.a,null,o.a.createElement(Ri,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(:undefined|\.(:undefined|25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(_i,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){e.exports=a(163)},90:function(e,t,a){},95:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.1a872f06.chunk.js.map