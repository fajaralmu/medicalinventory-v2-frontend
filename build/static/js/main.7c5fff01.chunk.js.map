{"version":3,"sources":["constant/DialogType.ts","utils/EventUtil.ts","services/DialogService.tsx","component/dialog/Dialog.tsx","component/dialog/DialogContainer.tsx","models/BaseEntity.ts","models/ApplicationProfile.ts","models/HealthCenter.ts","services/LoadingService.ts","component/BaseComponent.tsx","constant/stores.js","redux/appReducer.ts","redux/types.js","redux/userReducer.js","redux/servicesReducer.ts","redux/reducers.ts","middlewares/UserMiddleware.ts","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","redux/actionCreators.ts","utils/StringUtil.ts","models/common/Menu.ts","constant/Menus.ts","component/navigation/Header.tsx","component/BasePage.tsx","component/pages/dashboard/main/DashboardMain.tsx","models/common/Filter.ts","component/form/FormGroup.tsx","utils/DateUtil.ts","component/pages/dashboard/statistic/PeriodFilter.tsx","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/common/AttachmentInfo.ts","services/Promises.ts","services/InventoryService.ts","component/navigation/NavigationButtons.tsx","component/alert/SimpleError.tsx","utils/CollectionUtil.tsx","component/pages/dashboard/statistic/ProductStat.tsx","models/common/WebRequest.ts","services/MasterDataService.ts","component/navigation/AnchorWithIcon.tsx","component/loader/Spinner.tsx","component/pages/transaction/ProductFormV2.tsx","models/stock/InventoryData.ts","component/pages/dashboard/statistic/BarChart.tsx","component/container/Card.tsx","component/pages/dashboard/statistic/ProductStatDetail.tsx","component/pages/home/AboutUs.tsx","component/pages/home/HomeMain.tsx","component/pages/inventory/InventoryMain.tsx","models/Configuration.ts","component/pages/inventory/InventoryStatus.tsx","services/ReportService.ts","component/pages/inventory/Report.tsx","models/Product.ts","component/alert/SimpleWarning.tsx","component/pages/inventory/stock/ProductStockDetail.tsx","component/pages/inventory/stock/ProductStocksTable.tsx","utils/ComponentUtil.ts","models/FieldType.ts","component/navigation/ToggleButton.tsx","component/pages/inventory/stock/ProductStocks.tsx","models/settings/EntityProperty.ts","component/pages/masterdata/DataTableHeader.tsx","models/common/HeaderProps.ts","models/settings/EntityElement.ts","component/pages/inventory/StockFilter.tsx","component/pages/login/Login.tsx","utils/EntityValues.tsx","component/pages/masterdata/form/fields/BaseField.tsx","component/pages/masterdata/form/fields/FormInputImage.tsx","component/pages/masterdata/form/fields/FormInputImageMultiple.tsx","component/pages/masterdata/form/fields/FormInputDropDown.tsx","component/pages/masterdata/form/fields/FormInputTextEditor.tsx","component/pages/masterdata/form/fields/FormInputCheckBox.tsx","component/pages/masterdata/form/fields/FormInputCoomon.tsx","component/pages/masterdata/form/fields/FormInputDropDownDynamic.tsx","component/form/InputTime.tsx","component/form/InputDateTime.tsx","component/pages/masterdata/form/fields/FormInputDateTime.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/ExternalEditForm.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/settings/BaseUpdateProfilePage.tsx","component/pages/settings/settingHelper.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/settings/EditInventoryConfiguration.tsx","component/pages/settings/SettingsMain.tsx","models/User.ts","services/UserService.ts","component/pages/settings/UserProfile.tsx","models/ProductFlow.ts","models/Transaction.ts","services/TransactionService.ts","component/pages/transaction/detail/PrintReceipt.tsx","component/pages/transaction/detail/TransactionDetail.tsx","component/pages/transaction/BaseTransactionPage.tsx","component/pages/transaction/distribution/transactionOutForms.tsx","component/pages/transaction/distribution/CustomerFormV2.tsx","component/pages/transaction/distribution/TransactionOut.tsx","component/pages/transaction/distribution/TransactionOutConfirmation.tsx","component/pages/transaction/related/TransactionRelatedRecord.tsx","component/pages/transaction/supply/SupplierFormV2.tsx","component/pages/transaction/supply/TransactionIn.tsx","component/pages/transaction/supply/TransactionInConfirmation.tsx","component/pages/transaction/TransactionMain.tsx","component/layout/Routing.tsx","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","component/loader/Loader.tsx","LoadingContainer.tsx","App.tsx","inversify.config.ts","Root.tsx","serviceWorker.js","index.js"],"names":["DialogType","doItLater","callback","intervalMs","timeout","setTimeout","clearTimeout","DialogService","injectable","container","setContainer","showInfo","title","message","isShown","invokeLater","show","INFO","console","info","showWarning","WARNING","showError","messageContent","Error","trim","toLowerCase","startsWith","dangerouslySetInnerHTML","__html","ERROR","showConfirmDanger","showConfirm","showConfirmWarning","type","Promise","resolve","reject","e","dismissAlert","showContent","content","closeObserver","close","el","createElement","props","showNoButtons","State","backColor","marginTop","Backdrop","style","transitionDuration","backgroundColor","bgColor","className","Footer","ref","yesButton","onClick","onConfirm","yesLabel","yesOnly","cancelButton","onCancel","Header","id","onClose","Dialog","React","createRef","state","setState","focusCancelBtn","this","current","focus","stringContent","maxWidth","dialogStyle","marginLeft","marginRight","modalDialogClass","headerClassName","maxHeight","overflow","children","INFO_NO_BUTTONS","Component","DialogContainer","dialogTitle","dialogContent","dialogYesOnly","dialogOnConfirm","dialogOnCancel","onCloseCallback","dialogType","dialogOnClose","resetProps","undefined","closeObj","display","forceUpdate","dialogService","BaseEntity","createdDate","modifiedDate","nulledFields","ApplicationProfile","name","appCode","shortDescription","about","welcomingMessage","address","contact","website","iconUrl","pageIcon","backgroundUrl","footerIconClass","color","fontColor","HealthCenter","code","monthlyProductCount","LoadingService","c","start","realtime","stop","BaseComponent","parentApp","getInventoryData","inventoryData","getInventoryConfig","inventoryConfig","getMasterHealthCenter","masterHealthCenter","setPageTitle","document","getApplicationProfile","applicationProfile","handleInputChange","event","value","target","HTMLInputElement","checked","doAjax","method","withProgress","successCallback","errorCallback","startLoading","params","then","response","catch","alert","finally","endLoading","scrollTop","opt","top","behavior","window","scrollTo","commonAjax","commonAjaxWithProgress","getLoggedUser","user","loggedUser","password","isUserLoggedIn","loginStatus","showConfirmation","body","dialog","showConfirmationDanger","showCommonErrorAlert","error","data","mainApp","loading","mapCommonUserStateToProps","userState","requestId","services","servicesState","appState","initState","reducer","action","payload","loginKey","loginFailed","loginAttempt","assetsPath","result","debug","referer","refresh","setLoginKeyCookie","rootReducer","combineReducers","shopReducer","userReducer","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","axios","post","url","headers","responseJson","loginSuccess","log","common","newAction","Object","assign","dispatch","getLoggedUserMiddleware","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","commonAuthorizedHeader","getRequestId","getLoginKey","LOGIN_KEY","getState","getCookie","updateAccessToken","axiosResponse","accessToken","setCookie","cookieValue","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","ca","decodeURIComponent","split","i","length","charAt","substring","indexOf","devMode","getElementById","rootValue","contextPath","concat","baseImageUrl","getAssetsPath","usedHost","apiAccount","performLogout","index","uniqueId","string","String","getUTCMilliseconds","toString","greeting","hour","getHours","beautifyNominal","val","replace","twoDigits","Menu","description","pathVariables","active","menuClass","authenticated","showSidebar","subMenus","defaultMenuIconClassName","getIconClassName","menu","menuSet","menus","IState","showNavLinks","toggleNavLinks","onLogout","ok","setMenu","element","push","getMenus","position","zIndex","padding","margin","label","href","map","activeMenuCode","key","to","setMenuNull","NavBarTop","fontSize","UserIcon","width","src","profileImage","displayName","withRouter","connect","BasePage","additionalText","Fragment","DashboardMain","titleTag","userGreeting","Filter","limit","page","orderType","orderBy","contains","beginsWith","exacts","day","year","month","module","fieldsFilter","dayTo","monthTo","yearTo","maxValue","ignoreEmptyValue","filterExpDate","flag","FLAG_DEFAULT","useExistingFilterPage","FLAG_ALL","validateFieldsFilter","filter","setOrderPropertyFromDataSet","f","dataset","setFieldsFilterValue","setFieldsFilterValueFromInput","input","FormGroup","orientation","MONTHS","leapMonths","regularMonths","getMonthDays","getInputReadableDate","date","getFullYear","getMonth","getDate","join","PeriodFilter","getDayToArray","count","days","getDayFromArray","render","withDay","onChange","fullPeriod","AnchorButton","btnClassName","attributes","iconClassName","Modal","useState","open","setOpen","toggleable","marginBottom","attrs","footerContent","aria-label","aria-hidden","showFooter","AttachmentInfo","Blob","dataUrl","commonAjaxPostCalls","endpoint","request","Axios","rawAxiosResponse","commonAjaxPostCallsWithBlob","responseType","fileName","rawSplit","extension","blob","URL","createObjectURL","attachmentInfo","InventoryService","getAvailableProducts","productCode","location","healthcenter","getProductsInHealthCenter","adjustStocks","getInventoriesData","getProductUsage","getProductListWithUsage","filterStocks","generateButtonValues","totalData","currentPage","displayed_buttons","buttonCount","Math","ceil","min","max","NavigationButtons","buttonIndexes","activePage","lastIndex","nextPage","previusPage","SimpleError","tableHeader","values","recordList","ProductStat","updateFilter","getAttribute","parseInt","setFilter","preventDefault","loadRecords","loadRecordsAtPage","inventoryService","usageDataLoaded","entities","updateFieldsFilter","products","onSubmit","startNumber","ProductList","product","unit","WebRequest","entity","profile","customer","supplier","inventoryConfiguration","transaction","entityObject","orderedEntities","regularTransaction","imageData","MasterDataService","managementProperties","entityPropertyMap","Map","healthCenters","getProductByCode","getByKey","getProductsByName","getRecordsByKeyLike","loadHealthCenters","updateApplicationProfile","updateConfiguration","config","setHealthCenters","getHealthCenters","set","get","req","model","editMode","AnchorWithIcon","tyle","Spinner","innerDivs","Array","height","visibility","ProductFormV2","recordNotFound","productName","updateField","reset","searchRecord","recordsLoaded","setProduct","recordsNotFound","masterDataService","placeholder","required","p","cursor","notFound","ProductDetail","InventoryData","inventories","totalItemsSum","totalExpiredSum","totalWillExpiredSum","periodicReviewResult","getLabel","getAmount","toDataSets","list","res","hoveredIndex","updated","DashboardBarChart","middleYAxisValue","bottomYAxisValue","offsetX","offsetY","baseYIndex","baseHeight","lineWidth","maxAmount","cashflows","updateSizes","dataSet","round","hover","unHover","minHeight","overflowX","paddingTop","paddingBottom","onMouseOut","version","baseProfile","xmlns","percentage","labelY","labelX","transform","hovered","onMouseOver","fill","x","y","textAnchor","cx","cy","r","Card","inventoriesData","selectedItem","ProductStatDetail","selectInventory","item","UsageDetail","UsageChart","PeriodicReviewResultContent","review","safetyStock","targetStockLevel","orderSize","AboutUs","appProfile","HomeMain","imageUrl","backgroundImage","role","InventoryMain","Configuration","expiredWarningDays","leadTime","cycleTime","configuration","InventoryStatus","inventoriesDataLoaded","setInventoryData","loadInventoriesData","force","totalSaveSum","inventory","safe","totalItems","expiredItems","willExpiredItems","colSpan","ReportService","loadStockOpnameReport","loadMontlyReport","printTransactionReceipt","printReceiveRequestSheet","selectedHealthCenter","period","Report","healthCentersLoaded","loadHealthCenter","updateLocation","h","reportCreated","attachment","download","click","updatePeriod","loadStockOpname","toLocaleDateString","reportService","selectedMonthName","autoComplete","healthCenter","ReportButton","Product","utilityTool","imageNames","getDefaultImageUrl","SimpleWarning","ProductStockDetail","stock","number","productFlows","productFlow","usedCount","expiredDate","stockLocation","ProductImage","ProductStocksTable","productStocks","startingNumber","producFlows","toBase64v2","fileInput","reader","FileReader","readAsDataURL","files","onload","onerror","FieldType","ToggleButton","noLabel","activeLabel","gap","disabled","ProductStocks","updateFilterExpDate","getHtmlInputElement","selectedDate","diffDay","a","b","utc1","UTC","utc2","floor","getDiffDays","loadProducts","productLoaded","generalList","loadProductsAt","productLoadingError","doLoadProduct","getLocations","allLocObject","locations","getDisplayedRecordOptions","range","options","counter","setIgnoreEmpty","setFilterExpDate","updateLimit","selectedLocation","update","toggle","ExpDateFilter","expDateFilterWithin","setDate","addDays","dateValue","_class","expDayLabel","abs","SubmitBtn","LocationSelect","EntityProperty","entityName","alias","fieldNames","idField","detailFieldName","editable","deletable","creatable","elements","fieldNameList","withProgressWhenUpdated","addElement","setOrder","properties","keepProperties","loop","record","prop","identity","getEntityElement","getHeaderLabels","header","labelName","isDate","filterable","orderable","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","FilterDate","headerName","filterClass","SortButton","data-ordertype","data-orderby","DataTableHeader","headerProps","orderButtonOnClick","filterOnChange","headerProp","k","minWidth","HeaderProps","fromEntityProperty","EntityElement","ignoreBaseField","optionItemName","optionValueName","entityReferenceName","entityReferenceClass","detailFields","multiple","defaultValues","plainListValues","entityProperty","additionalMap","FIELD_TYPE_TEXT","isList","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","entityPropertyNotLoaded","items","StockFilter","entityPropertyLoaded","adjustProperty","loadItems","loadEntityProperty","itemsLoaded","getHeaderProps","updateFilterPage","updateFilterLimit","filterReset","filterFormSubmit","bgClass","expDate","now","onReset","healthCenterLocation","healthCenterDestination","SubmitResetButton","username","Login","updateCredentialProperty","performLogin","history","login","PasswordField","UsernameField","autoFocus","Icon","stroke","strokeWidth","EntityValues","object","elemnents","elementid","FIELD_TYPE_DATE","FIELD_TYPE_DATETIME","toLocaleTimeString","FIELD_TYPE_IMAGE","imgLink","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","FIELD_TYPE_CHECKBOX","BaseField","prepopulateForm","entityElement","getRequiredAttr","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","doRemoveImage","recordToEdit","defaultValue","fullUrl","accept","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","imageName","isNull","isBase64","isBase64Image","FormInputDropDown","inputList","inputListLoaded","loadInputList","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","option","optionItemValue","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","clean","contentOnChange","onMouseDown","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputCheckbox","FormInputCommon","dateObj","valueAsObj","requiredAttr","FIELD_TYPE_PLAIN_LIST","FIELD_TYPE_TEXTAREA","step","searchValue","FormInputDropDownDynamic","inputRef","searchKey","search","keyCode","div","onKeyDown","minute","getMinutes","second","getSeconds","hours","minutesOrSeconds","arr","InputTime","minutes","seconds","setDefaultValue","updateValue","setNow","border","sec","InputDateTime","timeRef","updateTime","m","s","setHours","setMinutes","setSeconds","setMilliseconds","updateDate","inputDate","setMonth","setFullYear","FormInputDateTime","FormInputField","formLabel","MasterDataForm","form","submit","formData","FormData","promises","hasImageField","forEach","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","realtimeProgress","getEntityProperty","save","recordSaved","recordSavedCallback","editModeStr","SubmitReset","InputFields","groupedElements","hasTextEditor","ei","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","ExternalEditForm","link","MasterDataList","recordData","checkDefaultData","getRecordNumberingOrder","setExactSearch","showForm","showCreateForm","printRecord","hideForm","entityProp","exactsSearch","showAddBtn","parseValues","LimitOffsetField","Loading","opacity","MasterDataManagement","loadingEntityProperty","setEntityProperty","setTitle","property","generateReport","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","setSidebarMenus","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","BaseUpdateProfilePage","saveRecord","fieldChanged","doSaveRecord","postRecordSaved","editFields","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","EditFields","EditApplicationProfile","updateProfileProperty","updateImageField","setAppProfileField","actualAppProfile","propertyName","enabled","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","updateProp","EditInventoryConfiguration","actualConfig","loadConfiguration","configLoaded","setProperty","getEditedRecord","SettingsMain","User","authorities","processingDate","UserService","updateProfile","requestApplicationId","callbackSuccess","callbackError","requestApplicationIdNoAuth","commonAjaxPublicPostCalls","UserProfile","updateProfleImage","setProfileImage","actualLoggedUser","userService","editedUser","setLoggedUser","avatarUrl","ProductFlow","suitable","price","generic","referenceProductFlow","referencingItems","availableProductFlow","pf","Transaction","transactionDate","destination","productFlowCount","addProductToFlow","addProductFlow","hasProductFlowReferenceid","setProductFlowValue","removeProductFlow","TransactionService","submitTransactionOUT","submitTransactionIN","getTransactionByCode","getTransactionRelatedRecord","deleteTransactionByCode","PrintReceipt","receiptCreated","printReceipt","transactionCode","dataNotFound","TransactionDetail","recordNotLoaded","loadData","transactionService","recordNotDeleted","deleteRecord","validateTransactionFromProps","TransactionData","isTransOut","toLocaleString","totalPrices","reduce","prev","totalQty","BaseTransactionPage","setTransaction","removeAll","didMountCallback","updateTransactionGeneralField","updateProductFlow","updateTransactionDate","buttonSubmitTransaction","HealthCenterForm","setHealthCenter","iem","DestinationInfo","ProductFlowItemInput","data-index","remove","CustomerFormV2","customerName","setCustomer","CustomerDetail","age","selectedProduct","availableProducts","loadingProducts","TransactionOut","updateDestination","availableProduct","loadAvailableProducts","availableProductsLoaded","availableProductsNotLoaded","warn","addToCart","fromReference","updateSelectedHealthCenter","pathname","setHealthCenterDestination","selecteds","alreadyAdded","TransactionOutConfirmation","back","onSuccess","confirm","ProductFlowRow","TransactionRelatedRecord","refItemsLv1","transactionDateTime","rfItemlv1","refItemsLv2","rfItemlv2","r2","SupplierFormV2","supplierName","setSupplier","SupplierDetail","TransactionIn","SelectedProductDetail","TransactionInConfirmation","TransactionMain","Routing","isLoggedIn","redirect","exact","path","loggedIn","Dashboard","Setting","Inventory","SideBar","isSidebarActive","parentMenu","pathName","addEventListener","handleScroll","removeEventListener","srcElement","brand","menuClassName","Brand","textDecoration","MainLayout","currentPathName","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","Loader","intervalId","timer","clearInterval","endMessage","withTimer","setInterval","progress","LoaderContent","LoadingContainer","loadings","sockJsClient","decrementLoadings","withRealtimeProgress","loadingPercentage","smoothEndLoading","handleOnWebsocketMessage","msg","percentageFloat","incrementLoadings","service","topics","websocketTopic","onMessage","client","errorRequestAppId","appIdStatus","App","requestAppId","setRequestId","retryRequestAppId","errorRequestingAppId","setMainApp","querySelector","setAttribute","head","updateFavicon","ret","actions","Container","bind","toSelf","inSingletonScope","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7c5fff01.chunk.js","sourcesContent":["export enum DialogType {\n    INFO, WARNING, ERROR,\n    INFO_NO_BUTTONS,\n}","export const doItLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n       callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}","import React, { Component, createElement, ReactElement } from \"react\";\nimport { injectable } from \"inversify\";\nimport \"reflect-metadata\";\nimport DialogContainer from \"../component/dialog/DialogContainer\";\n// import DialogPrompt from \"../components/dialog/DialogPrompt\";\nimport { DialogType } from \"../constant/DialogType\";\nimport { doItLater as invokeLater } from \"../utils/EventUtil\";\n\n// ms\nconst INVOCATION_WAIT_DELAY = 500;\n\n@injectable()\nexport default class DialogService {\n    private container: DialogContainer;\n    public setContainer = (container:DialogContainer) => {\n        this.container = container;\n    }\n    public showInfo = (title:string, message:string) => {\n        if (this.container.isShown)\n        {\n            invokeLater(()=>{\n                this.showInfo(title, message)\n            }, INVOCATION_WAIT_DELAY);\n            return;\n        }\n        this.container.show(\n            DialogType.INFO,\n            title,\n            message,\n            true,\n            console.info\n        );\n    }\n    public showWarning = (title:string, message:string) => {\n        if (this.container.isShown)\n        {\n            invokeLater(()=>{\n                this.showWarning(title, message)\n            }, INVOCATION_WAIT_DELAY);\n            return;\n        }\n        this.container.show(\n            DialogType.WARNING,\n            title,\n            message,\n            true,\n            console.info\n        );\n    }\n    public showError = (title:string, message:string|Error) => {\n        if (this.container.isShown)\n        {\n            invokeLater(()=>{\n                this.showError(title, message)\n            }, INVOCATION_WAIT_DELAY);\n            return;\n        }\n        let messageContent;\n        if (message instanceof Error) {\n            messageContent = message.message;\n        } else {\n            if (typeof message === 'string' && message.trim().toLowerCase().startsWith(\"<!doctype html\")) {\n                messageContent = (\n                    <div dangerouslySetInnerHTML={{\n                        __html: message\n                    }}>\n\n                    </div>\n                )\n            } if (typeof message === 'object') {\n                messageContent = message['result'];\n            } else {\n                messageContent = !message || message.trim() === \"\" ? \"Unexpected error\" : message.trim();\n            }\n        }\n        this.container.show(\n            DialogType.ERROR,\n            title,\n            messageContent,\n            true,\n            ()=>{},\n            ()=>{},\n            \"Ok\"\n        );\n        \n    }\n\n    public showConfirmDanger = (title:string, message:string) => {\n        return this.showConfirm(title, message, DialogType.ERROR);\n    }\n    public showConfirmWarning = (title:string, message:string) => {\n        return this.showConfirm(title, message, DialogType.WARNING);\n    }\n\n    public showConfirm = (title:string, message:string, type:DialogType = DialogType.INFO) => {\n        \n        return new Promise<boolean>((resolve, reject)=>{\n            if (this.container.isShown)\n            {\n                invokeLater(()=>{ \n                    this.container.show(\n                        type,\n                        title,\n                        message,\n                        false,\n                        (e:any) => {\n                            resolve(true);\n                        },\n                        (e:any) => {\n                            resolve(false);\n                        }\n                    );\n                }, INVOCATION_WAIT_DELAY);\n                return;\n            }\n            this.container.show(\n                type,\n                title,\n                message,\n                false,\n                (e:any) => {\n                    resolve(true);\n                },\n                (e:any) => {\n                    resolve(false);\n                }\n            );\n        });\n    }\n    \n    public dismissAlert = () => {\n        this.container.dismissAlert();\n    }\n\n    public showContent = ( title:string, content: ReactElement<any, typeof Component> ) => {\n        return new Promise<boolean>((resolve, reject) => {\n            let closeObserver = {\n                close : () => {\n\n                }\n            };\n            let el = createElement(content.type, {...content.props, closeObserver});\n            this.container.showNoButtons(  title, el, (e:any) => { resolve(false) }, closeObserver  );\n        });\n    }\n} \n\ninterface DialogPromptProps  {\n    message:string,\n    onChange:(val:string)=>any\n}","import React, { Component, Fragment } from 'react'\nimport { DialogType } from  '../../constant/DialogType';\nimport { doItLater as invokeLater } from '../../utils/EventUtil';\n\ntype ButtonRef              = React.RefObject< HTMLButtonElement >;\nconst initialMargin         = '-560px';\nconst transitionDuration    = '250ms';\nconst BACK_COLOR            = 'rgba(100,100,100,0.7)';\n\nconst TITLE = 'Medical Inventory';\n\nclass State {\n    backColor: string = 'transparent';\n    marginTop: string = initialMargin;\n}\ninterface Props  {\n    onConfirm:(arg:any)=>any;\n    onCancel:(arg:any)=>any;\n    onClose:(arg:any)=>any;\n\n    type:DialogType;\n    yesOnly:boolean;\n    yesLabel:string;\n\n    title?:string;\n\n    children:any;\n}\nclass Dialog extends Component<Props, State> {\n    yesButton:ButtonRef     = React.createRef();\n    cancelButton:ButtonRef  = React.createRef();\n    state:State             = new State();\n\n    constructor(props:any) {\n        super(props);\n    }\n    onConfirm = (e:any) => {        \n        this.close(()=>{\n            this.props.onConfirm(e);\n        });\n    }\n    close = (callback:()=>any)=> {\n        invokeLater(()=>{\n            this.setState({ backColor:'transparent', marginTop: initialMargin }, ()=>{\n                invokeLater(callback, 100);\n            });\n        }, 100);\n    }\n    onCancel = (e:any) => {\n        this.close(()=>{\n            if (this.props.onCancel) {\n                this.props.onCancel(e);\n            }\n        });\n    }\n    onClose = (e:any) => {\n        this.close(()=>{\n            this.props.onClose(e);\n        });\n    }\n\n    componentDidMount() {\n        const focusCancelBtn = this.props.type === DialogType.ERROR || this.props.type === DialogType.WARNING ;\n        if (!focusCancelBtn && this.yesButton.current)  {\n            this.yesButton.current.focus();\n        }  else if (focusCancelBtn && this.cancelButton.current)  {\n            this.cancelButton.current.focus();\n        } else if (focusCancelBtn && this.yesButton.current) {\n            this.yesButton.current.focus();\n        }\n\n        invokeLater(()=>{\n            let marginTop = this.stringContent ? '30vh' : '0vh';\n            this.setState({backColor:BACK_COLOR, marginTop: marginTop})\n        }, 100);\n    }\n\n    get stringContent() { return typeof this.props.children === \"string\"; }\n\n    get headerClassName() : string\n    {\n        switch (this.props.type) {\n            case DialogType.INFO:\n            case DialogType.INFO_NO_BUTTONS : \n                                      return \"bg-info text-light\";\n            case DialogType.WARNING : return \"bg-warning text-dark\";\n            case DialogType.ERROR   : return \"bg-danger text-light\";\n        \n            default                 : return \"bg-secondary\";\n        }\n    }\n\n    render() {\n        const title     = this.props.title ? this.props.title:  \"Info\";\n        const yesOnly   = this.props.yesOnly === true;\n        const maxWidth  = this.stringContent? '500px': '85vw';\n\n        const dialogStyle = {\n            transitionDuration:  transitionDuration,\n            marginTop: this.state.marginTop,\n            maxWidth: maxWidth,\n            marginLeft: 'auto',\n            marginRight: 'auto'\n        };\n        const modalDialogClass =  this.stringContent ? \"modal-dialog -modal-dialog-centered\" : \"-modal-dialog-centered\";\n        return (\n            <Fragment>\n                <Backdrop bgColor={this.state.backColor} />\n                <div className=\"modal show d-block\">\n                    <div \n                        className={modalDialogClass}\n                        style={dialogStyle}\n                    >\n                        <div className=\"modal-content mt-5\">\n                            <Header \n                                className={this.headerClassName} \n                                title={title} \n                                onClose={this.onClose} \n                            />\n                            <div className=\"modal-body\" style={{ maxHeight: '70vh', overflow: 'auto' }} >{this.props.children}</div>\n                            { this.props.type === DialogType.INFO_NO_BUTTONS? \n                            <div className={\"modal-footer \"} >\n                                <h6 className='w-100 text-center'>{TITLE}</h6>\n                            </div> \n                            :\n                            <Footer \n                                cancelButton={this.cancelButton} \n                                yesLabel={this.props.yesLabel}\n                                yesButton={this.yesButton} \n                                yesOnly={yesOnly} \n                                onConfirm={this.onConfirm} \n                                onCancel={this.onCancel} \n                            /> }\n                        </div>\n                    </div>\n                </div>\n            </Fragment>\n        )\n    }\n}\n\nfunction Backdrop(props:{bgColor:string}) {\n    const style = { transitionDuration:transitionDuration, backgroundColor: props.bgColor };\n    return (\n        <div className=\"modal-backdrop\" style={style} />\n    );\n}\n\nfunction Footer(props:{yesLabel:string, yesButton:ButtonRef, cancelButton:ButtonRef, yesOnly:boolean, onConfirm:(e:any)=>any, onCancel?:(e:any)=>any}) {\n    return (\n        <div className={\"modal-footer\"} >\n            <button \n                ref={props.yesButton} \n                type=\"button\"\n                onClick={props.onConfirm} \n                className=\"btn btn-outline-primary\" >\n                {props.yesLabel}\n            </button>\n            {props.yesOnly ? \n                null : \n                <button \n                    ref={props.cancelButton} \n                    type=\"button\"\n                    onClick={props.onCancel} \n                    className=\"btn btn-outline-secondary\" >\n                    No\n                </button>}\n        </div>\n    )\n}\n\nfunction Header(props:{ title:string, className:string, onClose:(e:any)=>any }) {\n    return (\n        <div className={\"modal-header \" + props.className} >\n            <h5 className=\"modal-title\" id=\"exampleModalCenterTitle\" >{props.title}</h5>\n            <button onClick={props.onClose} type=\"button\" className=\"close btn btn-text text-light\" >\n                <span><i className=\"fas fa-times\" /></span>\n            </button>\n        </div>\n    )\n}\n\nexport default Dialog;","import { resolve } from \"inversify-react\";\nimport React, { ReactElement, RefObject } from \"react\";\nimport { Component } from \"react\";\nimport { DialogType } from \"../../constant/DialogType\";\nimport DialogService from \"../../services/DialogService\";\nimport Dialog from \"./Dialog\";\n\ntype DialogState = { show: boolean };\n\nexport default class DialogContainer extends Component<any, DialogState> {\n    \n    // dialog props\n    dialogTitle: string;\n    dialogContent: any;\n    dialogYesOnly: boolean;\n\n    yesLabel: string = \"Yes\";\n\n    dialogOnConfirm: (e: any) => any;\n    dialogOnCancel: (e: any) => any;\n\n    onCloseCallback?: (e: any) => any;\n\n\n\n    dialogType: DialogType = DialogType.INFO;\n\n    @resolve(DialogService)\n    private dialogService: DialogService;\n    private ref: RefObject<Dialog> = React.createRef();\n\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            show: false,\n        };\n    }\n    \n\n    // fired when confirmed/canceled\n    public dismissAlert = () => {\n        if (this.ref.current) {\n            this.ref.current.close(() => {\n                this.setState({ show: false });\n            })\n            return;\n        }\n        this.setState({ show: false });\n    }\n\n    // fired when pressing [X] button\n    dialogOnClose = (e: any) => {\n\n        this.setState({ show: false }, () => {\n            if (this.onCloseCallback) {\n                this.onCloseCallback(e);\n            }\n\n            this.resetProps();\n        });\n    }\n    setContent(content: ReactElement<any, typeof Component>) {\n        this.dialogContent = content;\n        this.forceUpdate();\n    }\n    componentDidMount() {\n        this.dialogService.setContainer(this);\n    }\n    resetProps = () => {\n        this.onCloseCallback = undefined;\n        this.yesLabel = \"Yes\";\n    }\n    get isShown() { return this.state.show }\n\n    public showNoButtons = (title: string, content: any, onClose: (e: any) => any, closeObj?: { close: () => any }) => {\n        this.dialogType = DialogType.INFO_NO_BUTTONS;\n        this.dialogTitle = title;\n        this.dialogContent = content;\n        if (closeObj)\n            closeObj.close = this.dismissAlert;\n\n        this.display();\n    }\n    public show = (\n        type: DialogType,\n        title: string,\n        content: any,\n        yesOnly: boolean,\n        onConfirm: (e: any) => any,\n        onCancel?: (e: any) => any,\n        yesLabel?: string\n    ) => {\n\n        this.dialogType = type;\n        this.dialogTitle = title;\n        this.dialogContent = content;\n        this.dialogYesOnly = yesOnly;\n        this.yesLabel = yesLabel ? yesLabel : this.yesLabel;\n\n        this.dialogOnConfirm = (e: any) => {\n            this.dismissAlert();\n            onConfirm(e);\n        }\n        this.onCloseCallback = onCancel;\n        if (!yesOnly) {\n\n            this.dialogOnCancel = (e: any) => {\n                this.dismissAlert();\n                if (onCancel) {\n                    onCancel(e);\n                }\n            };\n        }\n        this.display();\n    }\n\n    display() {\n        this.setState({ show: true });\n    }\n\n    render(): React.ReactNode {\n\n        return (\n            this.state.show ?\n                <Dialog\n                    ref={this.ref}\n                    title={this.dialogTitle}\n                    yesOnly={this.dialogYesOnly}\n                    onConfirm={this.dialogOnConfirm}\n                    onCancel={this.dialogOnCancel}\n                    onClose={this.dialogOnClose}\n                    type={this.dialogType}\n\n                    yesLabel={this.yesLabel}\n                >\n                    {this.dialogContent}\n                </Dialog> : null\n        );\n    }\n}\n","\r\nexport default class BaseEntity{\r\n\tid?:undefined|number = undefined;\r\n\tcreatedDate?:Date;\r\n\tmodifiedDate?:Date;\r\n\tnulledFields?:string[] | undefined;\r\n\r\n\t// get identity(){\r\n\t// \tif (this.id && this.id != undefined) return this.id;\r\n\t// \treturn 0;\r\n\t// }\r\n\t \r\n\r\n}\r\n","import BaseEntity from './BaseEntity';\r\n\r\nexport default class ApplicationProfile extends BaseEntity{\r\n\tname?:string;\r\n\tappCode?:string;\r\n\tshortDescription?:string;\r\n\tabout?:string;\r\n\twelcomingMessage?:string;\r\n\taddress?:string;\r\n\tcontact?:string;\r\n\twebsite?:string;\r\n\ticonUrl?:string;\r\n\tpageIcon?:string;\r\n\tbackgroundUrl?:string;\r\n\tfooterIconClass?:string;\r\n\tcolor?:string;\r\n\tfontColor?:string;\r\n\r\n}\r\n","import BaseEntity from './BaseEntity';\r\n\r\nexport default class HealthCenter extends BaseEntity{\r\n\tcode?:string;\r\n\tname?:string;\r\n\taddress?:string;\r\n\tmonthlyProductCount?:number;\r\n\r\n}\r\n","import { injectable } from \"inversify\";\nimport LoadingContainer from \"../LoadingContainer\";\n\n@injectable()\nexport default class LoadingService {\n    private container: LoadingContainer | undefined;\n\n    setContainer = (c: LoadingContainer) => this.container = c;\n    start = (realtime = false) => {\n        this.container?.start(realtime);\n    }\n    stop = () => {\n        this.container?.stop();\n    }\n}","import { Component, ChangeEvent } from 'react';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport InventoryData from '../models/stock/InventoryData';\r\nimport Configuration from './../models/Configuration';\r\nimport { doItLater } from './../utils/EventUtil';\r\nimport { resolve } from 'inversify-react';\r\nimport DialogService from './../services/DialogService';\r\nimport App from '../App';\r\nimport LoadingService from './../services/LoadingService';\r\n\r\nexport default abstract class BaseComponent extends Component<any, any> {\r\n\r\n    @resolve(DialogService)\r\n    private dialog: DialogService;\r\n    @resolve(LoadingService)\r\n    private loading: LoadingService;\r\n\r\n    parentApp: typeof App;\r\n    state: any = { };\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = this.props.mainApp;\r\n\r\n    }\r\n    getInventoryData = (): InventoryData | undefined => {\r\n        return this.props.inventoryData;\r\n    }\r\n    getInventoryConfig = (): Configuration | undefined => {\r\n        return this.props.inventoryConfig;\r\n    }\r\n    getMasterHealthCenter = (): HealthCenter => {\r\n        return this.props.masterHealthCenter ?? new HealthCenter();\r\n    }\r\n    setPageTitle = (title: string) => {\r\n        document.title = title;\r\n    }\r\n    getApplicationProfile = (): ApplicationProfile => {\r\n        return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange = (event: ChangeEvent) =>{\r\n        const target = event.target as HTMLInputElement | HTMLTextAreaElement;\r\n\r\n        let value;\r\n        if (target instanceof HTMLInputElement) {\r\n            if (target.type === 'checkbox') {\r\n                value = target.checked;\r\n            } else {\r\n                value = target.value;\r\n            }\r\n        } else {\r\n            value = target.value;\r\n        }\r\n        this.setState({ [target.name]: value });\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.loading.start(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.loading.stop();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax = (method: Function, withProgress: boolean, successCallback: Function, errorCallback:undefined| Function, ...params: any) => {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then((response: WebResponse) => {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch((e) => {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e: any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    scrollTop = () => {\r\n        // console.info(\"SCROLL TOP\");\r\n        const opt:ScrollToOptions = { top:0,  behavior: 'smooth' };\r\n        doItLater(()=>{\r\n        window.scrollTo(opt);\r\n        }, 100);\r\n    }\r\n    commonAjax = (method: Function, successCallback: Function, errorCallback: Function, ...params: any) => {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress = (method: Function, successCallback: Function, errorCallback: Function, ...params: any) => {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser = (): User | undefined => {\r\n        const user: User | undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n\r\n    isUserLoggedIn = (): boolean => {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation = (body: any): Promise<boolean> => {\r\n        return this.dialog.showConfirm(\"Konfirmasi\", body);\r\n\r\n    }\r\n    showConfirmationDanger = (body: any): Promise<any> => {\r\n        return this.dialog.showConfirmDanger(\"Konfirmasi\", body);\r\n    }\r\n    showInfo(body: any) {\r\n        this.dialog.showInfo(\"Information\", body);\r\n    }\r\n    showError(body: any) {\r\n        this.dialog.showError(\"Error\", body);\r\n    }\r\n    refresh() {\r\n        this.forceUpdate();;\r\n    }\r\n\r\n    showCommonErrorAlert = (e: any) => {\r\n        console.error(e);\r\n\r\n        let message;\r\n        if (e.response && e.response.data) {\r\n            console.error(\"e.response: \", e.response);\r\n            message = e.response.data.message;\r\n        } else {\r\n            message = e;\r\n        }\r\n        this.showError(\"Operation Failed: \" + message);\r\n    }\r\n    \r\n}","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        masterHealthCenter: state.userState.masterHealthCenter,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n\r\n        //app\r\n        mainApp: state.appState.mainApp,\r\n        inventoryData: state.appState.inventoryData,\r\n        inventoryConfig: state.appState.inventoryConfig,\r\n    }\r\n}","import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined,\r\n    inventoryData: undefined,\r\n    inventoryConfig: undefined,\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n        case types.SET_INVENTORY_DATA:\r\n\r\n        return {...state, inventoryData: action.payload.inventoryData, inventoryConfig: action.payload.inventoryConfig}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n  \r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";   \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\"; \r\nexport const SET_REQUEST_ID = \"SET_REQUEST_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";   \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";\r\nexport const SET_INVENTORY_DATA = \"SET_INVENTORY_DATA\";","import * as types from './types'\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport { setLoginKeyCookie } from './../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: new ApplicationProfile(),\r\n    masterHealthCenter: new HealthCenter(),\r\n    assetsPath: \"/\",\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n   \r\n    let result = {};\r\n   \r\n    switch (action.type) {\r\n        case types.SET_REQUEST_ID: \r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                masterHealthCenter: action.payload.masterHealthCenter??{},\r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus);\r\n            if (action.payload.referer) {\r\n                action.payload.referer.refresh();\r\n            }\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n           \r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            }; \r\n            setLoginKeyCookie(null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser, \r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;"," \r\nexport const initState: { } = {\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","import * as shopReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: shopReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState:any = {\r\n    appState: shopReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nimport axios, { AxiosResponse } from 'axios';\r\n\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then((response: AxiosResponse) => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        common.updateAccessToken(response);\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n \r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    })\r\n    .then((response: AxiosResponse) => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(console.log)\r\n    .finally(() => {\r\n        action.meta.app.endLoading();\r\n        action.meta.app.refresh();\r\n    });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n    .then((response: AxiosResponse) => {\r\n        const responseJson = response.data;\r\n        let logoutSuccess = false;\r\n        if (responseJson.code == \"00\") {\r\n            logoutSuccess = true;\r\n        } else {\r\n            alert(\"Logout Failed\");\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: !logoutSuccess\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(console.log)\r\n    .finally(() => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer, initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware,  \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","import { AxiosResponse } from 'axios';\r\nimport {  getStore } from '../redux/configureStore';\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\nexport const commonHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(), \r\n    }\r\n};\r\n\r\nconst LOGIN_KEY:string = \"medical-inventory-login-key\";\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\nexport const getLoginKey = () => {\r\n    return getCookie(LOGIN_KEY);\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse: AxiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(LOGIN_KEY, accessToken);\r\n    }\r\n}\r\nexport const setLoginKeyCookie = (cookieValue:any) => {\r\n    setCookie(LOGIN_KEY, cookieValue);\r\n}\r\nexport const setCookie = function (cname, cvalue, exdays=1) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/medicalinventory/\" : document.getElementById(\"rootPath\").value;\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => { return getAssetsPath()+ \"images/\"}; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport InventoryData from '../models/stock/InventoryData';\r\nimport WebResponse from '../models/common/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n} \r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n \r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n \r\nexport const  setInventoryData = (payload: WebResponse) => ({\r\n    type: types.SET_INVENTORY_DATA,\r\n    payload: {inventoryData:payload.inventoryData, inventoryConfig: payload.configuration},\r\n    meta: { type: types.SET_INVENTORY_DATA }\r\n})\r\n\r\nexport const setRequestId = (data:WebResponse, app) => {\r\n   \r\n    const ret= {\r\n        type: types.SET_REQUEST_ID,\r\n        payload: { loginStatus: data.loggedIn, referer:app, ...data },\r\n        meta: {\r\n            type: types.SET_REQUEST_ID, \r\n        }\r\n    };\r\n    console.debug(\"setRequestId: \", ret);\r\n    return ret;\r\n}\r\n\r\n","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport const greeting = (): string => {\r\n\r\n\tlet hour = new Date().getHours();\r\n\tlet time: string = \"Datang\";\r\n\tif (hour >= 3 && hour < 11) {\r\n\t\ttime = \"Pagi\";\r\n\t} else if (hour >= 11 && hour < 15) {\r\n\t\ttime = \"Siang\";\r\n\t} else if (hour >= 15 && hour < 18) {\r\n\t\ttime = \"Sore\";\r\n\t} else {\r\n\t\ttime = \"Malam\";\r\n\t}\r\n\r\n\treturn \"Selamat \"+time;\r\n\r\n}\r\n\r\nexport function beautifyNominal(val: any) {\r\n\treturn new String(val). toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\r\n\t \r\n}\r\n  \r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String: string): number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3)) * 0.5624896334383812;\r\n\tvar sizeInKb = sizeInBytes / 1000;\r\n\treturn sizeInBytes;\r\n}\r\nexport const twoDigits = (value:number) :string => {\r\n    if (value >= 10) {\r\n        return   value.toString();\r\n    }\r\n    return \"0\"+value;\r\n}","import BaseEntity from '../BaseEntity'; \nimport { uniqueId } from '../../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname:undefined|string;\n\tdescription:undefined|string;\n\turl:undefined|string;\n\tpathVariables:undefined|string; \n\ticonUrl:undefined|string;\n\tcolor:undefined|string;\n\tfontColor:undefined|string;\n\n\t//\n\tactive:undefined|boolean = false;\n\tmenuClass:undefined|string = \"fas fa-folder\";\n\tauthenticated:undefined|boolean = false;\n\tshowSidebar:undefined|boolean  = false;\n\tsubMenus:undefined|Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\nimport Menu from '../models/common/Menu';\r\n\r\nlet menuSet:Menu[] = [];\r\n\r\nexport const getMenus = () => {\r\n    if (menuSet.length > 0) {\r\n        return menuSet;\r\n    }\r\n    menuSet  = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst menus: Menu[] = [\r\n    Object.assign(new Menu(),{\r\n        code: 'home',\r\n        name: \"Beranda\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    }),\r\n    \r\n    Object.assign(new Menu(),{\r\n        code: 'dashboard',\r\n        name: \"Dasbor\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_info',\r\n                name: 'Info Persediaan',\r\n                url: 'info',\r\n                menuClass: 'fas fa-info-circle'\r\n            },\r\n            {\r\n                code: 'productstat',\r\n                name: 'Statistik Produk',\r\n                url: 'productstat',\r\n                menuClass: 'fas fa-chart-line'\r\n            },\r\n            {\r\n                code: 'productstatdetail',\r\n                name: 'Statistik Produk Detail',\r\n                url: 'productstatdetail',\r\n                menuClass: 'fas fa-chart-line'\r\n            }\r\n        ]\r\n    }),\r\n    \r\n    Object.assign(new Menu(),{\r\n        code: 'inventory',\r\n        name: \"Persediaan\",\r\n        url: \"/inventory\",\r\n        menuClass: \"fas fa-warehouse\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'inventory_stocks',\r\n                name: 'Stok',\r\n                url: 'stock',\r\n                menuClass: 'fas fa-archive'\r\n\r\n            },\r\n            {\r\n                code: 'inventory_status',\r\n                name: 'Status',\r\n                url: 'status',\r\n                menuClass: 'fa fa-exclamation-circle'\r\n            },\r\n            {\r\n                code: 'stockfilter',\r\n                name: 'Filter Stok',\r\n                url: 'stockfilter',\r\n                menuClass: 'fas fa-layer-group'\r\n            }\r\n            ,\r\n            {\r\n                code: 'report',\r\n                name: 'Laporan',\r\n                url: 'report',\r\n                menuClass: 'fas fa-file-alt'\r\n            }\r\n        ]\r\n    }),\r\n    \r\n    Object.assign(new Menu(),{\r\n        code: 'transaction',\r\n        name: \"Transaksi\",\r\n        url: \"/transaction\",\r\n        menuClass: \"fas fa-book\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'transaction_in',\r\n                name: 'Pasokan',\r\n                url: 'productin',\r\n                menuClass: 'fas fa-arrow-down'\r\n\r\n            },\r\n            {\r\n                code: 'transaction_out',\r\n                name: 'Distribusi',\r\n                url: 'productout',\r\n                menuClass: 'fas fa-arrow-up'\r\n            },\r\n            {\r\n                code: 'transaction_detail',\r\n                name: 'Detail',\r\n                url: 'detail',\r\n                menuClass: 'fas fa-file-alt'\r\n            },\r\n            {\r\n                code: 'transaction_related_record',\r\n                name: 'Related Record',\r\n                url: 'relatedrecord',\r\n                menuClass: 'fas fa-code-branch'\r\n            }\r\n        ]\r\n    }),\r\n    \r\n    Object.assign(new Menu(),{\r\n        code: 'management',\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true\r\n    }),\r\n    \r\n    Object.assign(new Menu(),{\r\n        code: 'settings',\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profil Pengguna',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Setting Aplikasi',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n            },\r\n            {\r\n                code: 'inventory_config',\r\n                name: 'Konfigurasi Persediaan',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'inventory-config',\r\n            },\r\n            \r\n        ]\r\n    }),\r\n];\r\n","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nimport User from './../../models/User';\r\nimport { baseImageUrl } from './../../constant/Url'; \r\nimport Menu from '../../models/common/Menu';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            (ok) => {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        this.setState({ showNavLinks: false });\r\n        this.props.setMenu(menu);\r\n\r\n    }\r\n    render() {\r\n        const { showNavLinks } = this.state;\r\n        const menus = getMenus();\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <div\r\n                className=\"bg-dark container-fluid\"\r\n                style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}\r\n            >\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav\r\n                    id=\"navbar\"\r\n                    className=\"navbar navbar-expand-lg navbar-dark bg-dark w-100\"\r\n                >\r\n                    <a\r\n                        id=\"navbar-brand\"\r\n                        className=\"navbar-brand\"\r\n                        href=\"#\"\r\n                    >\r\n                        {this.getApplicationProfile().name}\r\n                    </a>\r\n                    <button\r\n                        onClick={this.toggleNavLinks}\r\n                        className=\"navbar-toggler\"\r\n                        type=\"button\"\r\n                    >\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={`collapse navbar-collapse ${showNavLinks ? 'show' : ''}`} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map((menu) => {\r\n                                if (menu == null || (menu.authenticated && !user)) return null;\r\n                                // if (menu.userAuthorized && menu.userAuthorized(user) == false) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                const className = \"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\");\r\n                                return (\r\n                                    <li\r\n                                        key={\"header-menu-\" + new String(menu.code)}\r\n                                        className={className}>\r\n                                        <Link\r\n                                            onClick={() => this.setMenu(menu)}\r\n                                            className=\"nav-link\"\r\n                                            to={menu.url}>\r\n                                                <span>{menu.name}</span>\r\n                                        </Link>\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull}\r\n                                onLogout={this.onLogout} user={user} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" className=\"container-fluid pl-1\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: { user: User | undefined, setMenuNull(): any, onLogout(e): any }) => {\r\n    if (props.user) {\r\n        return (\r\n            <Fragment>\r\n                <Link\r\n                    onClick={props.setMenuNull} \r\n                    className=\"btn btn-light btn-sm my-2 mr-2 my-sm-0\"\r\n                    to='/settings/user-profile'\r\n                >\r\n                    <img width=\"20\" src={baseImageUrl() + props.user.profileImage} className=\"rounded rounded-circle mr-2\" />\r\n                    <span>{props.user.displayName}</span>\r\n                </Link>\r\n                <a \r\n                    className=\"btn btn-danger btn-sm  my-2 my-sm-0 mr-2\"\r\n                    onClick={props.onLogout}\r\n                >\r\n                    <i className=\"fas fa-sign-out-alt mr-2\" />Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link\r\n            onClick={props.setMenuNull}\r\n            className=\"btn btn-sm btn-info my-2 my-sm-0 mr-2\"\r\n            to='/login'\r\n        >\r\n                <i className=\"fas fa-sign-in-alt mr-2\" />\r\n                <span>Login</span>\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","import React from 'react'\nimport { greeting } from '../utils/StringUtil';\nimport BaseComponent from './BaseComponent';\nexport default abstract class BasePage extends BaseComponent {\n\n    protected title: undefined | string;\n    constructor(props, title: string) {\n        super(props);\n        this.title = title;\n        if (this.title) {\n            document.title = this.title;\n        }\n    }\n    componentDidMount() {\n        this.scrollTop();\n    }\n    userGreeting() {\n        return <>{greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr /></>\n    }\n    titleTag(additionalText?: string) {\n        return (\n            <React.Fragment>\n                <h2>{this.title} {additionalText ?? \"\"}</h2>\n                <hr />\n            </React.Fragment>\n        )\n    }\n}","\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage';\r\n\r\nclass DashboardMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Dasbor\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div  className=\"section-body container-fluid\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DashboardMain))"," \r\nexport default class Filter{\r\n    \r\n\tstatic FLAG_ALL:string = \"ALL\";\r\n\tstatic FLAG_DEFAULT:string = \"DEFAULT\";\r\n\tlimit? :number; \r\n\tpage? :number = 0;\r\n\torderType?:string;\r\n\torderBy?:string;\r\n\tcontains?:boolean;\r\n\tbeginsWith?:boolean;\r\n\texacts?:boolean;\r\n\tday?:number;\r\n\tyear?:number;\r\n\tmonth?:number;\r\n\tmodule?:string;\r\n\tfieldsFilter?:any = {};\r\n\tdayTo?:number;\r\n\tmonthTo?:number;\r\n\tyearTo?:number;\r\n\tmaxValue?:number;\r\n\tignoreEmptyValue?:boolean = false;\r\n\tfilterExpDate?:boolean = false;\r\n\tflag?:string = Filter.FLAG_DEFAULT;\r\n\t//\r\n\tuseExistingFilterPage?:boolean = false; \r\n \r\n\r\n\tpublic static validateFieldsFilter = (filter:Filter):void => {\r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        } \r\n    }\r\n\tpublic static setOrderPropertyFromDataSet = (f:Filter, dataset: DOMStringMap) =>{\r\n\t\tif (dataset['orderby']) {\r\n\t\t\tf.orderBy = dataset['orderby'];\r\n\t\t}\r\n\t\tif (dataset['ordertype']) {\r\n\t\t\tf.orderType = dataset['ordertype'];\r\n\t\t}\r\n\t}\r\n\tpublic static setFieldsFilterValue = (f:Filter, name: string, value: any) => {\r\n        if (f.fieldsFilter == undefined) {\r\n            f.fieldsFilter = {};\r\n        }\r\n        f.fieldsFilter[name] = value;\r\n    }\r\n\tpublic static setFieldsFilterValueFromInput = (f:Filter, input: any) => {\r\n\t\tconst name = input.name;\r\n\t\tconst value = input.value;\r\n\t\tFilter.setFieldsFilterValue(f, name, value);\r\n    }\r\n\r\n}\r\n","\r\nimport React, { Component } from 'react';\r\nconst FormGroup = (props: {\r\n    label?: any,\r\n    show?: boolean,\r\n    orientation?: 'vertical' | 'horizontal',\r\n    style?: any,\r\n    className?: string,\r\n    children: any,\r\n}) => {\r\n    if (props.show === false) {\r\n        return null;\r\n    }\r\n    const orientation = props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n    return (\r\n        <div style={props.style} className={\"form-group \" + props.className + \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n            <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}>\r\n                <strong>{props.label ?? null}\r\n                </strong>\r\n            </label>\r\n            <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormGroup;","import { join } from \"path\";\r\nimport { twoDigits } from \"./StringUtil\";\r\n\r\nexport const MONTHS = [\r\n    \"Januari\",\r\n    \"Februari\",\r\n    \"Maret\",\r\n    \"April\",\r\n    \"Mei\",\r\n    \"Juni\",\r\n    \"Juli\",\r\n    \"Ahustus\",\r\n    \"September\",\r\n    \"Oktober\",\r\n    \"November\",\r\n    \"Desember\"\r\n]\r\n\r\nconst leapMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getCurrentMonthDays = (month:number) : number=> {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\nexport const getMonthDays = (month:number, year:number) : number=> {\r\n    if(year % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n\r\nexport const getTime = (d:Date) => {\r\n\r\n    return [\r\n        twoDigits(d.getHours()),\r\n        twoDigits(d.getMinutes()),\r\n        twoDigits(d.getSeconds())\r\n    ].join(\":\");\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n    const year = date.getFullYear();\r\n\r\n    const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n    return arr.join(\"-\");\r\n}\r\nexport function addDays(date:Date, days:number) :Date{\r\n    const result:Date = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n  export const getDiffDays = (a:Date, b:Date) : number => {\r\n    // Discard the time and time-zone information.\r\n\r\n    console.debug(\"DIFF DATE \",a,\" vs \", b);\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate()); \r\n    return Math.floor((utc2 - utc1) / _MS_PER_DAY);\r\n}\r\n\r\n\r\n\r\n\r\n","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport { MONTHS, getMonthDays } from './../../../../utils/DateUtil';\r\nconst year = new Date().getFullYear();\r\ninterface Props {\r\n    filter: Filter;\r\n    onChange(e: ChangeEvent): any;\r\n    fullPeriod: boolean;\r\n    withDay?:boolean;\r\n}\r\nexport default class PeriodFilter extends Component<Props, any> {\r\n\r\n    getDayToArray = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const count = getMonthDays(filter.monthTo??1, filter.yearTo??year);\r\n        const days:number[] = [];\r\n        for (let i = 1 ; i <= count; i++) {\r\n            days.push(i);      \r\n        }\r\n        return days;\r\n    }\r\n    getDayFromArray = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const count = getMonthDays(filter.month??1, filter.year??year);\r\n        const days:number[] = [];\r\n        for (let i = 1 ; i <= count; i++) {\r\n            days.push(i);      \r\n        }\r\n        return days;\r\n    }\r\n    render = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const withDay:boolean  = this.props.withDay == true;\r\n        return (\r\n            <Fragment>\r\n                {withDay?\r\n                <FormGroup label=\"Day\">\r\n                <select  onChange={this.props.onChange} name=\"day\" value={filter.day??1} className=\"form-control\" >\r\n                    {this.getDayFromArray().map(day=>{\r\n                        return <option key={\"day-from-\"+day} value={day} >{day}</option>\r\n                    })}\r\n                </select>\r\n                </FormGroup>:null\r\n                }\r\n                <FormGroup label=\"Month\">\r\n                    <select onChange={this.props.onChange} value={filter.month??1} name=\"month\" className=\"form-control\">\r\n                        {MONTHS\r\n                            .map((name, i) => {\r\n                                return (\r\n                                    <option key={\"filter-month-from-\" + i} value={i + 1}>{name}</option>\r\n                                )\r\n                            })}\r\n                    </select>\r\n                </FormGroup>\r\n                <FormGroup label=\"Year\">\r\n                    <input onChange={this.props.onChange} name=\"year\" type=\"number\" value={filter.year??year} className=\"form-control\" />\r\n                </FormGroup>\r\n                {this.props.fullPeriod ?\r\n                    <Fragment>\r\n                         {withDay?\r\n                        <FormGroup label=\"Day\">\r\n                         <select  onChange={this.props.onChange} name=\"dayTo\" value={filter.dayTo??1} className=\"form-control\" >\r\n                            {this.getDayToArray().map(day=>{\r\n                                return <option key={\"day-from-\"+day} value={day} >{day}</option>\r\n                            })}\r\n                        </select> </FormGroup>:null\r\n                        }\r\n                        <FormGroup label=\"Month To\">\r\n                            <select onChange={this.props.onChange} value={filter.monthTo??1} name=\"monthTo\" className=\"form-control\">\r\n                                {MONTHS\r\n                                    .map((name, i) => {\r\n                                        return (\r\n                                            <option key={\"filter-month-from-\" + i} value={i + 1}>{name}</option>\r\n                                        )\r\n                                    })}\r\n                            </select>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Year To\">\r\n                            <input  onChange={this.props.onChange} name=\"yearTo\" type=\"number\" value={filter.yearTo??year} className=\"form-control\" />\r\n                        </FormGroup>\r\n                    </Fragment> : null\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}","\r\nimport React from 'react';\r\ninterface IProps {\r\n    show?: undefined | boolean;\r\n    className?: undefined | string;\r\n    style?: undefined | any;\r\n    onClick?: undefined | any;\r\n    iconClassName?: undefined | string;\r\n    attributes?: undefined | any;\r\n    children?: any;\r\n}\r\nconst AnchorButton = (props: IProps) => {\r\n    if (props.show == false) return null;\r\n    const btnClassName = props.className ?? \"btn btn-outline-secondary\";\r\n    return (\r\n        <a\r\n            style={props.style}\r\n            onClick={props.onClick}\r\n            className={btnClassName}\r\n            {...props.attributes}\r\n        >\r\n            {\r\n                props.iconClassName &&\r\n                <i className={`${props.iconClassName} ${props.children ? 'mr-2' : ''}`} />\r\n            }\r\n            {props.children}\r\n        </a>\r\n    )\r\n\r\n}\r\n\r\nexport default AnchorButton;\r\n","\r\nimport React, { Component, useState } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nconst Modal = (props: {\r\n    title?: any,\r\n    toggleable?: boolean,\r\n    showFooter?: boolean,\r\n    show?: boolean,\r\n    style?: any,\r\n    footerContent?: any,\r\n    children?: any,\r\n}) => {\r\n    const [open, setOpen] = useState(false);\r\n    if (props.show === false) { \r\n        return null;\r\n    }\r\n    const showModal = () => setOpen(true);\r\n    const hideModal = () => setOpen(false);\r\n\r\n    const title = props.title ?? \"Title\";\r\n    if (props.toggleable === true && !open) {\r\n        return (\r\n            <AnchorButton\r\n                style={{ marginBottom: '10px' }}\r\n                onClick={showModal}\r\n                iconClassName=\"fas fa-angle-down\"\r\n            >\r\n                Show {title}\r\n            </AnchorButton>\r\n        )\r\n    }\r\n    const attrs = (({ style, show, footerContent, toggleable, ...props }) => props)(props) // remove b and c\r\n    return (\r\n        <div {...attrs} className=\"modal-content \" style={{ ...props.style, marginBottom: '10px' }}>\r\n            <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">{title}</h5>\r\n                {\r\n                    props.toggleable &&\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-sm\"\r\n                        onClick={hideModal}\r\n                        aria-label=\"Close\"\r\n                    >\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times' />\r\n                        </span>\r\n                    </button>\r\n                }\r\n            </div>\r\n            <div className=\"modal-body\">\r\n                {props.children}\r\n            </div>\r\n            {props.footerContent || props.showFooter === true ?\r\n                <div className=\"modal-footer\">\r\n                    {props.footerContent}\r\n                </div>\r\n                : null}\r\n        </div>\r\n    );\r\n}\r\nexport default Modal;\r\n","\r\nexport default class AttachmentInfo {\r\n    name:string = \"\";\r\n    data:Blob = new Blob();\r\n    dataUrl:string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader, commonHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from '../models/common/AttachmentInfo';\r\nimport Axios, { AxiosResponse } from 'axios';\r\n \r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload:undefined| any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        Axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then((axiosResponse: AxiosResponse) => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPublicPostCalls = (endpoint: string, payload:undefined| any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        Axios.post(endpoint, request, {\r\n            headers: commonHeader()\r\n        })\r\n            .then((axiosResponse: AxiosResponse) => {\r\n                \r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload:undefined| any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        Axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then((axiosResponse: AxiosResponse) => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.data = blob;\r\n                attachmentInfo.dataUrl = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","import \"reflect-metadata\"\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from '../models/common/Filter';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport default class InventoryService {\r\n    getAvailableProducts = (productCode: string, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/availableproducts/\"+productCode)\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location\r\n        });\r\n    }\r\n\r\n    getProductsInHealthCenter = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproducts\")\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    adjustStocks = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/recalculatestock\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    getInventoriesData = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getinventoriesdata\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    getProductUsage = (request: WebRequest) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproductusage\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getProductListWithUsage = (filter: Filter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproductswithusage\")\r\n        return commonAjaxPostCalls(endpoint, {filter:filter});\r\n    }\r\n    filterStocks = (filter: Filter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/filter\")\r\n        return commonAjaxPostCalls(endpoint, {filter:filter});\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nconst NavigationButtons = (props: IProps) => {\r\n    const buttonIndexes = generateButtonValues(props.limit, props.totalData, props.activePage);\r\n    \r\n    if (buttonIndexes.length == 0) {\r\n        return null;\r\n    }\r\n    \r\n    const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n    const nextPage = props.activePage + 1 >= lastIndex ? 0 : props.activePage + 1;\r\n    const previusPage = props.activePage - 1 < 0 ? lastIndex - 1 : props.activePage - 1;\r\n\r\n    const clickPrevPage = () => props.onClick(previusPage);\r\n    const clickNextPage = () => props.onClick(nextPage);\r\n    return (\r\n        <div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\">\r\n                        <a className=\"page-link\" onClick={clickPrevPage}>\r\n                            Previous\r\n                        </a>\r\n                    </li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        const onClick = () => props.onClick(page - 1);\r\n                        return (\r\n                            <li\r\n                                key={`NAV-${uniqueId()}`}\r\n                                className={\"page-item \" + (page - 1 == props.activePage ? \"active\" : \"\")}\r\n                            >\r\n                                <a className=\"page-link\" onClick={onClick} >{page}</a>\r\n                            </li>\r\n                        )\r\n                    })}\r\n                    <li className=\"page-item\">\r\n                        <a className=\"page-link\" onClick={clickNextPage}>\r\n                            Next\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n\r\nexport default NavigationButtons;\r\n","\r\nimport React, { Component } from 'react'\r\nconst SimpleError = (props: { show?: boolean, children?: any }) => {\r\n    const { show, children } = props;\r\n    if (show === false) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div className=\"alert alert-danger\">\r\n            {children ?? \"Error Occured\"}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SimpleError;","import React from 'react'\r\nimport { uniqueId } from './StringUtil';\r\nexport const tableHeader = (...values:any[]) => {\r\n   \r\n    return (<thead>\r\n        <tr>\r\n            {values.map((value)=>{\r\n                if (null == value) return null;\r\n                return <th key={uniqueId()}>{value}</th>\r\n            })}\r\n        </tr>\r\n    </thead>)\r\n}\r\nexport const groupArray = function (array, division) {\r\n    if (null == array || array.length == 0) { return [] }\r\n    const groupedArray = new Array();\r\n    const itemPerDivision = Math.ceil(array.length / division)\r\n\r\n    if (itemPerDivision == 1) {\r\n        groupedArray.push(array);\r\n        return groupedArray;\r\n    }\r\n\r\n    for (let i = 0; i < division; i++) {\r\n        groupedArray.push(new Array());\r\n    }\r\n\r\n    let index = 1;\r\n    let divisionIndex = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const element = array[i];\r\n        groupedArray[divisionIndex].push(element);\r\n\r\n        index++;\r\n        if (index > itemPerDivision) {\r\n            divisionIndex++;\r\n            index = 1;\r\n        }\r\n    }\r\n\r\n    return groupedArray;\r\n}\r\n","\r\n\r\nimport React, { ChangeEvent, FormEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage'; \r\nimport Filter from '../../../../models/common/Filter';\r\nimport PeriodFilter from './PeriodFilter';\r\nimport Modal from '../../../container/Modal'; \r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport WebResponse from '../../../../models/common/WebResponse'; \r\nimport FormGroup from '../../../form/FormGroup'; \r\nimport NavigationButtons from '../../../navigation/NavigationButtons'; \r\nimport Product from './../../../../models/Product';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\nimport { beautifyNominal } from './../../../../utils/StringUtil';\r\nimport { resolve } from 'inversify-react';\r\nclass State {\r\n    filter: Filter = new Filter();\r\n    recordList:undefined| Product[];\r\n    totalData: number = 0;\r\n}\r\nclass ProductStat extends BasePage {\r\n    @resolve(InventoryService)\r\n    private inventoryService: InventoryService;\r\n    \r\n    state: State = new State();\r\n    \r\n    constructor(props: any) {\r\n        super(props, \"Penggunaan Produk\");\r\n        const date: Date = new Date();\r\n        this.state.filter.year = this.state.filter.yearTo = date.getFullYear();\r\n        this.state.filter.month = this.state.filter.monthTo = date.getMonth() + 1;\r\n        this.state.filter.day = this.state.filter.dayTo = 1;\r\n        this.state.filter.limit = 10;\r\n        this.state.filter.fieldsFilter['name'] = \"\";\r\n    }\r\n\r\n    updateFilter = (e: ChangeEvent) => {\r\n        const target: any = e.target;\r\n        const name = target.getAttribute(\"name\"), value = target.value;\r\n        if (!name || !value) return;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilter = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        this.loadRecords();\r\n    }\r\n    loadRecordsAtPage = (page:number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter }, this.loadRecords);\r\n    }\r\n    loadRecords = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductListWithUsage,\r\n            this.usageDataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    usageDataLoaded = (response: WebResponse) => {\r\n        this.setState({ recordList: response.entities, totalData: response.totalData });\r\n    }\r\n    updateFieldsFilter = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter[target.name] = target.value;\r\n        this.setState({filter: filter});\r\n    }\r\n    \r\n    render() {\r\n        const products:Product[]|undefined = this.state.recordList;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                {this.titleTag()}\r\n                <Modal title=\"Periode\" >\r\n                    <form onSubmit={this.setFilter}>\r\n                        <PeriodFilter withDay fullPeriod filter={this.state.filter} onChange={this.updateFilter} />\r\n                        <FormGroup label=\"Limit\" >\r\n                            <input value={this.state.filter.limit??5} type=\"number\" min={1} \r\n                                name=\"limit\" className=\"form-control\"  onChange={this.updateFilter}\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Search by name\">\r\n                            <input value={this.state.filter.fieldsFilter['name']??\"\"} onChange={this.updateFieldsFilter} name=\"name\" className=\"form-control\" />\r\n                        </FormGroup>\r\n                        <button type=\"submit\" className=\"btn btn-dark\">Apply</button>\r\n                    </form>\r\n                </Modal>\r\n                <NavigationButtons\r\n                    activePage={this.state.filter.page??0}\r\n                    limit={this.state.filter.limit??10}\r\n                    totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage} />\r\n\r\n                {products?\r\n                    <ProductList products={products} startNumber={(this.state.filter.page??0) * (this.state.filter.limit??10)} />:\r\n                    <SimpleError>No data</SimpleError>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductList = (props:{products: Product[], startNumber:number}) => {\r\n    return (\r\n        <table className=\"table table-striped\" > \r\n                {tableHeader(\"No\", \"Name\", \"Usage\", \"Unit\")} \r\n            <tbody>\r\n                {props.products.map((product, i)=>{\r\n                    return (\r\n                        <tr key={\"product-stat-item-\"+i}>\r\n                            <td>{props.startNumber+i+1}</td>\r\n                            <td>{product.name}</td>\r\n                            <td>{beautifyNominal(product.count??0)}</td>\r\n                            <td>{product.unit?.name}</td>\r\n                        </tr>\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStat))"," \nimport User from '../User'; \nimport BaseEntity from '../BaseEntity';   \nimport Filter from './Filter'; \nimport ApplicationProfile from '../ApplicationProfile'; \nimport Customer from '../Customer';\nimport Supplier from '../Supplier';\nimport HealthCenter from '../HealthCenter';\nimport Unit from '../Unit';\nimport Product from '../Product';\nimport Transaction from '../Transaction';\nimport Configuration from '../Configuration';\n\nexport default class WebRequest{\n\tentity?:string;\n\tuser?:User;\n\tprofile?:ApplicationProfile;\n\tcustomer?:Customer;\n\tsupplier?:Supplier;\n\thealthcenter?:HealthCenter;\n\tinventoryConfiguration?:Configuration;\n\tunit?:Unit;\n\tproduct?:Product;\n\ttransaction?:Transaction;\n\tfilter?:Filter;\n\tentityObject?:BaseEntity; \n\torderedEntities?:any[];\n\tregularTransaction?:boolean;\n\timageData?:string; \n}\n","import \"reflect-metadata\"\r\nimport Filter from '../models/common/Filter';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPostCallsWithBlob } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Configuration from './../models/Configuration';\r\nimport { injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport default class MasterDataService {\r\n  \r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private healthCenters: HealthCenter[] = [];\r\n\r\n    getProductByCode = (code: string) => {\r\n        return this.getByKey('product', 'code', code);\r\n    }\r\n    getProductsByName = (name:string) => {\r\n        return this.getRecordsByKeyLike(\"product\", \"name\", name);\r\n    }\r\n    setEntityProperty(code: string, data:undefined| EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code:undefined| string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req:undefined| any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: code\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadHealthCenters = () => {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: 'healthcenter', filter: Object.assign(new Filter(),{ orderBy: 'name', orderType: 'asc' })\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    loadItems(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getByKey(entity: string, key: string, value: any) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getRecordsByKeyLike(entity: string, key: string, value: any) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: entity,\r\n            filter: {\r\n                // exacts: true,\r\n                limit: 10,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getById(entity: string, id: number) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        });\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            entity: code,\r\n            [code]: model\r\n        });\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            profile: applicationProfile\r\n        });\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n    updateConfiguration = (config:Configuration) => {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n           inventoryConfiguration: config\r\n        });\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateconfig\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n\r\n    setHealthCenters = (healthCenters:HealthCenter[]) => {\r\n        this.healthCenters = healthCenters;\r\n    }\r\n    getHealthCenters = () :HealthCenter[] => {\r\n        return this.healthCenters;\r\n    }\r\n\r\n    generateReport(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/report/records\");\r\n        return commonAjaxPostCallsWithBlob(endpoint, request);\r\n\r\n    }\r\n}","\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AnchorWithIcon = (props) => {\r\n    if (props.show == false) return null;\r\n    const btnClassName = props.className ?? \"btn btn-outline-secondary\";\r\n    const content = () => {\r\n        return (\r\n        <>\r\n            {\r\n                props.iconClassName &&\r\n                <i className={`${props.iconClassName} ${props.children ? 'mr-2' : ''} `} />\r\n            }\r\n            {props.children}\r\n        </>\r\n        );\r\n    }\r\n    if (props.to) {\r\n        return (\r\n            <Link {...props.attributes} to={props.to} style={props.style} onClick={props.onClick} className={btnClassName} >\r\n                {content()}\r\n            </Link>\r\n        );\r\n    }\r\n    return (\r\n        <a {...props.attributes} tyle={props.style} onClick={props.onClick} className={btnClassName} >\r\n            {content()}\r\n        </a>\r\n    );\r\n}\r\n\r\nexport default AnchorWithIcon;","\r\nimport React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst Spinner = (props: {show?: boolean}) => {\r\n    const innerDivs = new Array<JSX.Element>();\r\n    for (let i = 0; i <= 11; i++) {\r\n        innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n    }\r\n    return (\r\n        <div \r\n            style={{ width:'85px', height:'85px' }}\r\n            className=\"container-fluid text-center d-block\"\r\n        >\r\n                <div\r\n                    style={{visibility: props.show === false?'hidden':'visible'}}\r\n                    className=\"lds-spinner\"\r\n                >\r\n                {innerDivs}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner;\r\n","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport Product from '../../../models/Product';\r\nimport Modal from '../../container/Modal';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../loader/Spinner';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { resolve } from 'inversify-react';\r\ninterface IState {\r\n    product?: Product;\r\n    recordList?: Product[] | undefined;\r\n    recordNotFound: boolean;\r\n    loading: boolean;\r\n    productName: string;\r\n}\r\nclass ProductFormV2 extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n\r\n    state: IState = {\r\n        recordNotFound: false,\r\n        loading: false,\r\n        productName: \"\",\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            recordNotFound: false,\r\n            loading: false,\r\n            productName: \"\",\r\n        };\r\n\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value }, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    reset = (e: any) => {\r\n        this.setState({ productName: \"\" })\r\n    }\r\n    searchRecord = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.productName.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Produk tidak ditemukan\");\r\n        }\r\n        // if (this.props.setProduct) {\r\n        //     this.props.setProduct(response.entities[0]);\r\n        // }\r\n        this.setState({ recordList: response.entities, recordNotFound: false });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ productName: product.name, product: product, recordList: undefined, recordNotFound: false });\r\n        if (this.props.setProduct) {\r\n            this.props.setProduct(product);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true, product: undefined, recordList: undefined });\r\n    }\r\n    loadRecords = () => {\r\n        if (this.state.loading || !this.state.productName) return;\r\n        this.commonAjaxWithProgress(this.masterDataService.getProductsByName,\r\n            this.recordsLoaded, this.recordsNotFound, this.state.productName);\r\n    }\r\n    render() {\r\n        const recordList: Product[] = this.state.recordList ?? [];\r\n        return (\r\n\r\n            <form onSubmit={this.searchRecord} >\r\n\r\n                <Modal toggleable={true} title=\"Pilih Produk\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/product\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cari\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\"  >\r\n                            <input onChange={this.updateField} value={this.state.productName ?? \"\"} placeholder=\"Nama\" required type=\"text\" className=\"form-control\" name=\"productName\" />\r\n                            {recordList.length > 0 ? <div style={{ position: 'absolute', zIndex: 200 }} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p => {\r\n                                    return (\r\n                                        <div className=\"option-item\" onClick={() => {\r\n                                            this.setProduct(p);\r\n                                        }} style={{ cursor: 'pointer' }} key={\"p-\" + p.code + p.id} >{p.name}</div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times\" />&nbsp;close</a>\r\n                            </div> : null}\r\n                        </FormGroup>\r\n                    </div>\r\n\r\n                    <ProductDetail loading={this.state.loading} product={this.state.product} notFound={this.state.recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst ProductDetail = (props: { loading: boolean, product?: Product, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Produk tidak ditemukan</div></div>\r\n    }\r\n    if (!props.product) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih produk</div></div>\r\n    }\r\n    const product: Product = props.product;\r\n    return (\r\n        <div style={style}>\r\n            <h4>{product.name}</h4>\r\n            <table className=\"table\">\r\n                <thead><tr>\r\n                    <th>Kode</th>\r\n                    <th>Unit</th>\r\n                    {/* <th>Category</th>\r\n                    <th>Price@Unit</th>\r\n                    <th>Qty</th> */}\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{product.code}</td>\r\n                        <td>{product.unit ? product.unit.name : '-'}</td>\r\n                        {/* <td>{product.category ? product.category.name : '-'}</td>\r\n                        <td style={{ fontFamily: 'monospace' }}>{product.price}</td>\r\n                        <td>{product.count}</td> */}\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(ProductFormV2))","\r\nimport ProductInventory from '../common/ProductInventory';\r\nimport DataSet from '../settings/DataSet';\r\nimport { MONTHS } from '../../utils/DateUtil';\r\nimport PeriodicReviewResult from './PeriodicReviewResult';\r\nexport default class InventoryData implements DataSet {\r\n\r\n    inventories:ProductInventory[] = [];\r\n    totalItemsSum:number = 0;\r\n    totalExpiredSum:number = 0;\r\n    totalWillExpiredSum:number = 0;\r\n    periodicReviewResult:undefined|PeriodicReviewResult;\r\n\r\n    month:undefined|number;\r\n    year:undefined|number;\r\n\r\n    getLabel = () :string => {\r\n        return MONTHS[(this.month??1) - 1] + \" \" + this.year;\r\n    }\r\n    getAmount = () : number => {\r\n        return this.totalItemsSum;\r\n    }\r\n    public static toDataSets = (list:InventoryData[]) : DataSet[] => {\r\n        const res:DataSet[] = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            res.push(Object.assign(new InventoryData, element))\r\n        }\r\n        return res;\r\n    }\r\n}","\r\nimport React, { Component, Fragment } from 'react';\r\nimport './ChartSvg.css';  \r\nimport DataSet from '../../../../models/settings/DataSet';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\ninterface IProps {\r\n    dataSet: DataSet[],\r\n    updated: Date,\r\n    onClick?:(index:number)=>void\r\n    onUnHover?:()=>void\r\n}\r\nclass IState {\r\n    hoveredIndex: number = -1;\r\n    updated: Date = new Date();\r\n}\r\nexport default class DashboardBarChart extends Component<IProps, IState>\r\n{\r\n    middleYAxisValue: number = 0;\r\n    bottomYAxisValue: number = 0;\r\n    offsetX: number = 100;\r\n    offsetY: number = 50;\r\n    baseYIndex: number = 200;\r\n    baseHeight: number = 150;\r\n    lineWidth: number = 0;\r\n    maxValue: number = 0;\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.updateSizes();\r\n\r\n    }\r\n    maxAmount:(cashflows: DataSet[])=>number = (cashflows: DataSet[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            \r\n            if (element.getAmount() > max) {\r\n                max = element.getAmount();\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n    updateSizes = () => {\r\n        this.maxValue = this.maxAmount(this.props.dataSet);\r\n        this.middleYAxisValue = Math.round(this.maxValue * 2 / 3);\r\n        this.bottomYAxisValue = Math.round(this.maxValue * 1 / 3);\r\n        this.lineWidth = (23) * (this.props.dataSet.length) + 100;\r\n    }\r\n    componentDidUpdate() {\r\n        this.updateSizes();\r\n        if (this.props.updated != this.state.updated) {\r\n            this.setState({ updated: this.props.updated });\r\n        }\r\n    }\r\n    hover = (index: number) => {\r\n        this.setState({ hoveredIndex: index });\r\n        \r\n    }\r\n    onClick = (index:number) => {\r\n        if (this.props.onClick) {\r\n            this.props.onClick(index);\r\n        }\r\n    }\r\n    unHover = () => {\r\n        this.setState({ hoveredIndex: -1 });\r\n        // if (this.props.onUnHover) {\r\n        //     this.props.onUnHover();\r\n        // }\r\n    }\r\n  \r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n           <Fragment>\r\n                <div className=\"text-center border border-secondary\" style={{ \r\n                    minHeight: '300px', overflowX: 'scroll',\r\n                    paddingTop:'10px', paddingBottom: '10px'\r\n                     }}>\r\n                    <svg onMouseOut={this.unHover} className=\"bg-light border\" version=\"1.1\" baseProfile=\"full\" width={this.offsetX * 2 + (23) * (props.dataSet.length)+ 100} height={300} xmlns=\"http://www.w3.org/2000/svg\">\r\n\r\n                        {props.dataSet.map((data, i) => {\r\n                            const percentage = (data.getAmount() / this.maxValue) * this.baseHeight;\r\n                            const labelY = this.baseYIndex + 15, labelX = this.offsetX + 10 + (23) * (i);\r\n                            const xTranslated = 0, yTranslated = 0;\r\n                            const transform = \"translate(\" + xTranslated + \",\" + yTranslated + \") rotate(-30,\" + labelX + \",\" + labelY + \")\";\r\n                            const hovered = i == this.state.hoveredIndex;\r\n                            return (\r\n                                <g style={hovered ? { cursor: 'pointer' } : {}} className=\"chart-group\"\r\n                                 onMouseOver={(e) => this.hover(i)} onClick={(e) => this.onClick(i)} onMouseOut={this.unHover} key={ \"bar-item-chart-\" + i}>\r\n                                    <rect fill={hovered ? \"red\" : \"green\"} x={this.offsetX + (23) * (i)} y={this.baseYIndex - percentage} height={percentage} width={20} ></rect>\r\n                                    <text fill={hovered ? \"red\" : \"black\"} textAnchor=\"end\" fontSize={10} x={labelX} y={labelY} transform={transform}>{data.getLabel()}</text>\r\n                                    <circle cx={this.offsetX + (23) * (i + 1)} cy={this.baseYIndex} r=\"3\" fill=\"red\" />\r\n                                </g>\r\n                            )\r\n                        })}\r\n                        <rect name=\"base_axis_x\" x={this.offsetX} y={this.baseYIndex} height={2} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_top\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_middle\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_bottom\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"base_axis_y\" x={this.offsetX} y={this.offsetY} height={this.baseHeight} width={2} />\r\n\r\n                        <text textAnchor=\"end\" name=\"top_val\" fontSize={10} x={this.offsetX} y={this.offsetY}>{beautifyNominal(this.maxValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"middle_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3}>{beautifyNominal(this.middleYAxisValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"bottom_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3}>{beautifyNominal(this.bottomYAxisValue)}</text>\r\n                    </svg>\r\n                </div>\r\n                <p><i className=\"fas fa-history\" /> {new Date(this.state.updated).toString()}</p> \r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n","\r\nimport React, { Component } from 'react';\r\ninterface Props {\r\n    attributes?: any,\r\n    title?: string,\r\n    className?: string,\r\n    footerContent?: any,\r\n    children?: any,\r\n}\r\nconst Card = (props: Props) => {\r\n    return (\r\n        <div {...props.attributes} className={\"card \" + props.className}>\r\n            {\r\n                props.title &&\r\n                <div className=\"card-header\">\r\n                    {props.title}\r\n                </div>\r\n            }\r\n            <div className=\"card-body\">\r\n                {props.children}\r\n            </div>\r\n            {\r\n                props.footerContent &&\r\n                <div className=\"card-footer\">\r\n                    {props.footerContent}\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default Card;\r\n","\r\n\r\nimport React, { ChangeEvent, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage';\r\nimport ProductFormV2 from '../../transaction/ProductFormV2';\r\nimport Product from '../../../../models/Product';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport PeriodFilter from './PeriodFilter';\r\nimport Modal from '../../../container/Modal';\r\nimport WebRequest from '../../../../models/common/WebRequest';\r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport InventoryData from '../../../../models/stock/InventoryData';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport DashboardBarChart from './BarChart';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport PeriodicReviewResult from './../../../../models/stock/PeriodicReviewResult';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass State {\r\n    product:undefined| Product;\r\n    filter: Filter = new Filter();\r\n    inventoriesData:undefined| InventoryData[];\r\n    selectedItem:undefined| InventoryData;\r\n    totalData: number = 0;\r\n    periodicReviewResult:undefined| PeriodicReviewResult\r\n}\r\nclass ProductStatDetail extends BasePage {\r\n    @resolve(InventoryService)\r\n    private inventoryService: InventoryService;\r\n\r\n    state: State = new State();\r\n    \r\n    constructor(props: any) {\r\n        super(props, \"Penggunaan Produk\");\r\n        const date: Date = new Date();\r\n        this.state.filter.year = this.state.filter.yearTo = date.getFullYear();\r\n        this.state.filter.month = this.state.filter.monthTo = date.getMonth() + 1;\r\n    }\r\n    setProduct = (p: Product) => this.setState({ product: p });\r\n\r\n    updateFilter = (e: ChangeEvent) => {\r\n        const target: any = e.target;\r\n        const name = target.getAttribute(\"name\"), value = target.value;\r\n        if (!name || !value) return;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilter = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (!this.state.product) {\r\n            this.showError(\"Please select product\");\r\n            return;\r\n        }\r\n        const req: WebRequest = new WebRequest();\r\n        req.product = this.state.product;\r\n        req.filter = this.state.filter;\r\n\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductUsage,\r\n            this.usageDataLoaded,\r\n            this.showCommonErrorAlert,\r\n            req\r\n        )\r\n    }\r\n    usageDataLoaded = (response: WebResponse) => {\r\n        this.setState({ selectedItem: undefined, periodicReviewResult: response.inventoryData?.periodicReviewResult, inventoriesData: response.inventoriesData, totalData: response.totalData });\r\n    }\r\n    selectInventory = (index: number) => {\r\n        if (this.state.inventoriesData == undefined) return;\r\n        try {\r\n            const item = this.state.inventoriesData[index];\r\n            this.setState({ selectedItem: item });\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n    render() {\r\n        const inventoriesData = this.state.inventoriesData;\r\n        const periodicReviewResult = this.state.periodicReviewResult;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n               {this.titleTag()}\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <Modal title=\"Periode\" >\r\n                            <form onSubmit={this.setFilter}>\r\n                                <PeriodFilter fullPeriod filter={this.state.filter} onChange={this.updateFilter} />\r\n                                {this.state.product ? <button type=\"submit\" className=\"btn btn-dark\">Apply</button> :\r\n                                    <i>Silakan pilih produk</i>}\r\n                            </form>\r\n                        </Modal>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <ProductFormV2 setProduct={this.setProduct} />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {inventoriesData ? <UsageChart periodicReviewResult={periodicReviewResult} totalData={this.state.totalData} onClick={this.selectInventory} inventoriesData={inventoriesData} />\r\n                        : <SimpleError>No data</SimpleError>}\r\n                </div>\r\n                {this.state.selectedItem ?\r\n                    <UsageDetail item={this.state.selectedItem} /> : null\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst UsageDetail = (props: { item: InventoryData }) => {\r\n    const item = Object.assign(new InventoryData, props.item);\r\n\r\n    return <Card attributes={{ style: { marginTop: '10px' } }} title={\"Detail Usage\"} >\r\n        <FormGroup label=\"Period\">{item.getLabel()}</FormGroup>\r\n        <FormGroup label=\"Amount\">{beautifyNominal(item.getAmount())}</FormGroup>\r\n    </Card>\r\n}\r\nconst UsageChart = (props: { periodicReviewResult:undefined| PeriodicReviewResult, totalData: number, inventoriesData: InventoryData[], onClick(index: number): any }) => {\r\n\r\n    return (\r\n        <Card>\r\n            <DashboardBarChart onClick={props.onClick} updated={new Date()}\r\n                dataSet={InventoryData.toDataSets(props.inventoriesData)} />\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Total\">{beautifyNominal(props.totalData)}</FormGroup>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    {props.periodicReviewResult ?\r\n                        <PeriodicReviewResultContent periodicReviewResult={props.periodicReviewResult} />\r\n                        : null} \r\n                </div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\nconst PeriodicReviewResultContent = (props: { periodicReviewResult: PeriodicReviewResult }) => {\r\n    const review = props.periodicReviewResult;\r\n    return (\r\n        <Fragment>\r\n            <FormGroup label=\"Safety stock\">\r\n                {review.safetyStock}\r\n            </FormGroup>\r\n            <FormGroup label=\"Target Stock Level\">\r\n                {review.targetStockLevel}\r\n            </FormGroup>\r\n            <FormGroup label=\"Order Size\">\r\n                {review.orderSize}\r\n            </FormGroup>\r\n            <FormGroup label=\"Description\">\r\n                {review.description}\r\n            </FormGroup>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStatDetail))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfile from './../../../models/ApplicationProfile';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport BasePage from './../../BasePage';\r\nclass AboutUs extends BasePage {\r\n    constructor(props) {\r\n        super(props, \"About Us\");\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfile = this.getApplicationProfile();\r\n        return (\r\n            <div className=\"section-body container-fluid mt-5\"  >\r\n                {this.titleTag()}\r\n                <Card title=\"Application\">\r\n                    <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                    <FormGroup><i>{appProfile.shortDescription}</i></FormGroup>\r\n                    <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                    <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n                </Card>\r\n                <p/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport './Home.css';\r\n\r\nclass HomeMain extends BaseComponent {\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl() + applicationProfile.backgroundUrl;\r\n        return (\r\n\r\n            <div className=\"landing-bg\"\r\n                style={{\r\n                    backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                    color: applicationProfile.fontColor??\"#000\"\r\n                }} >\r\n                <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                <hr className=\"my-4\" />\r\n                <p>{applicationProfile.welcomingMessage}</p>\r\n                <div className=\"btn-group\">\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/login\" role=\"button\">Login</Link>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(HomeMain))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from '../../BasePage';\r\n\r\nclass InventoryMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Persediaan\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"InventoryMain\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(InventoryMain))","import BaseEntity from './BaseEntity';\r\n\r\nexport default class Configuration extends BaseEntity{\r\n\texpiredWarningDays:number = 10;\r\n\tleadTime?:number;\r\n\tcycleTime?:number;\r\n\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t}\r\n\r\n}\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport InventoryData from '../../../models/stock/InventoryData';\r\nimport Configuration from './../../../models/Configuration';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { setInventoryData } from '../../../redux/actionCreators';\r\nimport { tableHeader } from './../../../utils/CollectionUtil';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport { beautifyNominal, greeting } from '../../../utils/StringUtil';\r\nimport BasePage from './../../BasePage';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass State {\r\n    inventoryData: InventoryData = new InventoryData();\r\n    configuration: Configuration = new Configuration();\r\n}\r\nclass InventoryStatus extends BasePage {\r\n\r\n    state: State = new State();\r\n    \r\n    @resolve(InventoryService)\r\n    private inventoryService: InventoryService;\r\n\r\n    constructor(props) {\r\n        super(props, \"Status Persediaan\");\r\n    }\r\n    componentDidMount() {\r\n        this.loadInventoriesData();\r\n        super.componentDidMount();\r\n    }\r\n    inventoriesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ \r\n            inventoryData: response.inventoryData,\r\n            configuration: response.configuration \r\n        }, () => { this.props.setInventoryData(response); });\r\n    }\r\n    loadInventoriesData = (force: boolean = false) => {\r\n        if (!force && this.getInventoryData()) {\r\n            this.setState({ \r\n                inventoryData: this.getInventoryData(),\r\n                configuration: this.getInventoryConfig() \r\n            });\r\n            return;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getInventoriesData,\r\n            this.inventoriesDataLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    render() {\r\n        const { configuration: config, inventoryData } = this.state;\r\n        const { inventories } = inventoryData;\r\n        let totalSaveSum: number = 0;\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                </div>\r\n                <div>\r\n                    <AnchorWithIcon \r\n                        iconClassName=\"fas fa-sync-alt\"\r\n                        onClick={() => this.loadInventoriesData(true)}\r\n                    >\r\n                        Muat Ulang\r\n                    </AnchorWithIcon>\r\n                    <p />\r\n                </div>\r\n                <table className=\"table table-striped\">\r\n                    {tableHeader(\"No\", \"Lokasi\", \"Total\", \"Stok Aman\", `Kadaluarsa dalam ${config.expiredWarningDays} hari`, \"Kadaluarsa\")}\r\n                    <tbody>\r\n                        {inventories.map((inventory, i) => {\r\n                            const safe = inventory.totalItems - inventory.expiredItems - inventory.willExpiredItems;\r\n                            totalSaveSum += safe;\r\n                            return (\r\n                                <tr key={`p-inv-${i}`}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td>{inventory.location.name}</td>\r\n                                    <td >{beautifyNominal(inventory.totalItems)}</td>\r\n                                    <td >{beautifyNominal(safe)}</td>\r\n                                    <td className={inventory.willExpiredItems > 0 ? \"bg-warning\" : \"\"}>\r\n                                        {beautifyNominal(inventory.willExpiredItems)}\r\n                                    </td>\r\n                                    <td className={inventory.expiredItems > 0 ? \"bg-danger text-warning\" : \"\"}>\r\n                                        {beautifyNominal(inventory.expiredItems)}\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                        <tr className=\"font-weight-bold\">\r\n                            <td colSpan={2}>Total</td>\r\n                            <td>{beautifyNominal(inventoryData.totalItemsSum)}</td>\r\n                            <td>{beautifyNominal(totalSaveSum)}</td>\r\n                            <td>{beautifyNominal(inventoryData.totalWillExpiredSum)}</td>\r\n                            <td>{beautifyNominal(inventoryData.totalExpiredSum)}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setInventoryData: (payload: WebResponse) => dispatch(setInventoryData(payload)),\r\n});\r\nexport default withRouter(\r\n    connect(\r\n        mapCommonUserStateToProps,\r\n        mapDispatchToProps,\r\n    )(InventoryStatus)\r\n)","import \"reflect-metadata\"\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCallsWithBlob } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from '../models/common/Filter';\r\nimport { injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport default class ReportService {\r\n    loadStockOpnameReport = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/stockopname\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    loadMontlyReport = (filter:Filter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/monthly\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            filter: filter\r\n        });\r\n    }\r\n    printTransactionReceipt = (code:string ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/transactionreceipt/\"+code)\r\n        return commonAjaxPostCallsWithBlob(endpoint, {  });\r\n    }\r\n    printReceiveRequestSheet = (filter:Filter  , location:HealthCenter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/receiverequestsheet\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n\r\n}","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport Filter from '../../../models/common/Filter';\r\nimport HealthCenter from './../../../models/HealthCenter';\r\nimport ReportService from './../../../services/ReportService';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { getInputReadableDate } from '../../../utils/DateUtil';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport AttachmentInfo from '../../../models/common/AttachmentInfo';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport Card from './../../container/Card';\r\nimport { MONTHS } from './../../../utils/DateUtil';\r\nimport { greeting } from '../../../utils/StringUtil';\r\nimport BasePage from './../../BasePage';\r\nimport { resolve } from 'inversify-react';\r\nclass State {\r\n    filter: Filter = new Filter();\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    period: Date = new Date();\r\n}\r\nclass Report extends BasePage {\r\n    state: State = new State();\r\n\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    @resolve(ReportService)\r\n    private reportService: ReportService;\r\n    @resolve(InventoryService)\r\n    private inventoryService: InventoryService;\r\n\r\n    constructor(props: any) {\r\n        super(props, \"Laporan\");\r\n        const { period } = this.state;\r\n        this.state.filter.day = period.getDate();\r\n        this.state.filter.month = period.getMonth() + 1;\r\n        this.state.filter.year = period.getFullYear();\r\n    }\r\n    componentDidMount() {\r\n        this.loadHealthCenter();\r\n        this.scrollTop();\r\n    }\r\n    healthCentersLoaded = (response: any|WebResponse) => {\r\n        this.masterDataService.setHealthCenters(response.entities ?? []);\r\n        this.setState({\r\n            healthCenters: response.entities, \r\n            selectedHealthCenter: this.getMasterHealthCenter(),\r\n        });\r\n    }\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (healthCenters.length > 0) {\r\n            this.setState({ selectedHealthCenter: healthCenters[0] });\r\n        }\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Simpan \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.dataUrl,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    updatePeriod = (e) => {\r\n        const date = new Date(e.target.value);\r\n        const { filter } = this.state;\r\n        filter.day = date.getDate();\r\n        filter.month = date.getMonth() + 1;\r\n        filter.year = date.getFullYear();\r\n        this.setState({ period: date, filter: filter });\r\n    }\r\n    loadStockOpname = () => {\r\n        const { name } = this.state.selectedHealthCenter;\r\n        const date = this.state.period.toLocaleDateString(\"ID\");\r\n        this.showConfirmation(\"Muat Stok Opname \" + date + \" : \" + name + \"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadStockOpnameReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter, this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    loadMontlyReport = () => {\r\n        const { period } = this.state;\r\n        const date = `${(period.getMonth() + 1)} - ${period.getFullYear()}`;\r\n        this.showConfirmation(`Muat Laporan Bulanan ${date}?`)\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadMontlyReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter\r\n                )\r\n            });\r\n    }\r\n    printReceiveRequestSheet = () => {\r\n        const { period } = this.state;\r\n        const date = `${(period.getMonth() + 1)} - ${period.getFullYear()}`;\r\n        this.showConfirmation(`Muat LPLPO ${date}?`)\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.printReceiveRequestSheet,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter, this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    adjustStocks = () => {\r\n        this.showConfirmation(\"Kalkulasi Ulang Stok?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.inventoryService.adjustStocks,\r\n                    () => this.showInfo(\"Success\"),\r\n                    this.showCommonErrorAlert,\r\n                )\r\n            });\r\n    }\r\n    render() {\r\n        const { period, filter, healthCenters, selectedHealthCenter } = this.state;\r\n        const selectedMonthName = MONTHS[period.getMonth()];\r\n        return (\r\n            <div id=\"Report\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                    <form onSubmit={e => e.preventDefault()}>\r\n                        <FormGroup label=\"Lokasi\">\r\n                            <select\r\n                                autoComplete=\"off\"\r\n                                key=\"select-health-center\"\r\n                                onChange={this.updateLocation}\r\n                                value={selectedHealthCenter.id ?? 0}\r\n                                className=\"form-control\"\r\n                            >\r\n                                {healthCenters.map((healthCenter, i) => {\r\n                                    return (\r\n                                        <option\r\n                                            key={`slct-loc-stk-${i}`}\r\n                                            value={healthCenter.id ?? 0}\r\n                                        >\r\n                                            {healthCenter.name}\r\n                                        </option>\r\n                                    );\r\n                                })}\r\n                            </select>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Periode\">\r\n                            <input\r\n                                autoComplete=\"off\"\r\n                                onChange={this.updatePeriod}\r\n                                type=\"date\"\r\n                                className=\"form-control\"\r\n                                value={getInputReadableDate(period)}\r\n                            />\r\n                        </FormGroup>\r\n                    </form>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <ReportButton\r\n                        onClick={this.loadStockOpname}\r\n                        description={[\"Tanggal\",period.getDate(),selectedMonthName,filter.year].join(\" \")\r\n                    }>\r\n                        Stok Opname\r\n                    </ReportButton>\r\n                    <ReportButton\r\n                        onClick={this.loadMontlyReport}\r\n                        description={[\"Bulan\",selectedMonthName,filter.year].join(\" \")}\r\n                    >\r\n                        Laporan Bulanan\r\n                    </ReportButton>\r\n                    <ReportButton\r\n                        onClick={this.printReceiveRequestSheet}\r\n                        description={[\"Bulan\",selectedMonthName,filter.year].join(\" \")}\r\n                    >\r\n                        LPLPO\r\n                    </ReportButton>\r\n                    <ReportButton onClick={this.adjustStocks} description=\"\">\r\n                        Kalkulasi Ulang Stok\r\n                    </ReportButton>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ReportButton = (props: { onClick(): any, children: any, description:undefined|string }) => {\r\n    return (\r\n        <div className=\"col-md-3 text-center\">\r\n            <Card title={props.children}>  \r\n                <p>{props.description}</p>     \r\n                <AnchorButton\r\n                    iconClassName=\"far fa-file-alt\" \r\n                    onClick={props.onClick} \r\n                    children=\"Submit\"\r\n                />\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(Report))","import BaseEntity from './BaseEntity';\r\nimport Unit from './Unit';\r\nimport { baseImageUrl } from './../constant/Url';\r\n\r\nexport default class Product extends BaseEntity{\r\n\tcode?:string;\r\n\tname?:string;\r\n\tdescription?:string;\r\n\tunit?:Unit;\r\n\tutilityTool?:boolean;\r\n\timageNames?:string;\r\n\r\n\tcount?:number;\r\n\r\n\tgetDefaultImageUrl  = () :string => {\r\n\t\tif (this.imageNames == undefined) return baseImageUrl()+\"default.bmp\";\r\n\t\treturn  baseImageUrl()+this.imageNames.split(\"~\")[0];\r\n\t}\r\n\r\n}\r\n","\r\nimport React from 'react';\r\nconst SimpleWarning = (props: { show?: boolean, children?: any, style?: any }) => {\r\n    if (props.show === false) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div style={props.style} className=\"alert alert-warning\">\r\n            {props.children ?? \"Error Occured\"}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SimpleWarning;","import React, { Component, Fragment } from 'react'\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    product: Product = new Product();\r\n    productFlows: ProductFlow[] = [];\r\n    location: HealthCenter = new HealthCenter();\r\n    number: number = 1;\r\n}\r\nclass ProductStockDetail extends Component<Props, State> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const product: Product = Object.assign(new Product(), this.props.product);\r\n        let stock: number = 0;\r\n        return (\r\n            <div className=\"row alert alert-light\">\r\n                <ProductImage number={props.number} product={product} />\r\n                <div className=\"col-9\">\r\n                    <Modal title={product.name + \"(\" + product.code + \")\"} toggleable={true}>\r\n                        <div style={{ width: '100%', overflow: 'scroll' }} >\r\n                            {\r\n                                props.productFlows.length == 0 ? \r\n                                <SimpleWarning children=\"No Data\" /> \r\n                                :\r\n                                <table className=\"table table-striped\">\r\n                                    {tableHeader(\"No\", \"Id\", \"Qty\", \"Digunakan\", \"Stok\", \"Unit\", \"Kadaluarsa\", \"Lokasi\")}\r\n                                    <tbody>\r\n                                        {props.productFlows.map((productFlow, i) => {\r\n                                            stock += productFlow.stock;\r\n                                            return (\r\n                                                <tr key={`PF_DETAIL_STOCK=${productFlow.id}-${i}`}>\r\n                                                    <td>{i + 1}</td>\r\n                                                    <td>{productFlow.id}</td>\r\n                                                    <td>{productFlow.count}</td>\r\n                                                    <td>{productFlow.usedCount}</td>\r\n                                                    <td>{productFlow.stock}</td>\r\n                                                    <td>{props.product.unit?.name}</td>\r\n                                                    <td>{new Date(productFlow.expiredDate).toLocaleDateString(\"ID\")}</td>\r\n                                                    <td>{productFlow.stockLocation}</td>\r\n                                                </tr>\r\n                                            )\r\n                                        })}\r\n                                        <tr>\r\n                                            <td colSpan={4}>Total Stok</td>\r\n                                            <td >{stock}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            }</div>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductImage = (props: { product: Product, number: number }) => {\r\n    const product = props.product;\r\n    return (\r\n        <div className=\"col-3\">\r\n            <div className=\"card bg-light\"  >\r\n                <img className=\"card-img-top \" src={product.getDefaultImageUrl()} />\r\n                <div className=\"card-body\">\r\n                    <p className=\"card-text\">{props.number} - {product.name}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStockDetail)","import React, { Component, Fragment } from 'react'\r\nimport ProductStockDetail from './ProductStockDetail';\r\nimport ProductStock from '../../../../models/stock/ProductStock';\r\nimport HealthCenter from './../../../../models/HealthCenter';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    productStocks: ProductStock[] = [];\r\n    startingNumber: number = 1;\r\n    location: HealthCenter = new HealthCenter()\r\n}\r\nconst ProductStocksTable = (props: Props) => {\r\n    const { productStocks, startingNumber, location } = props;\r\n    return (\r\n        <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\"><strong>Nama</strong></div>\r\n                <div className=\"col-9\"><strong>Rincian</strong></div>\r\n            </div>\r\n            {\r\n                productStocks.length == 0 ?\r\n                <SimpleWarning style={{ marginTop: '10px' }}>Tidak ada data</SimpleWarning>\r\n                :\r\n                productStocks.map((stock, i) => {\r\n                    const product = stock.product;\r\n                    const producFlows = stock.productFlows;\r\n                    return (\r\n                        <Fragment key={\"ps-\" + i}>\r\n                            <ProductStockDetail\r\n                                number={startingNumber + i}\r\n                                location={location}\r\n                                product={product}\r\n                                productFlows={producFlows}\r\n                            />\r\n                        </Fragment>\r\n                    )\r\n                })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductStocksTable;\r\n","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<string>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_CHECKBOX =\n\t'FIELD_TYPE_CHECKBOX',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_DATETIME =\n\t'FIELD_TYPE_DATETIME',\n\tFIELD_TYPE_TEXTEDITOR = \n\t'FIELD_TYPE_TEXTEDITOR'\n}\n\n","import React, { Component, Fragment } from 'react'\r\n\r\nimport './ToggleButton.css'\r\n\r\ninterface Props {\r\n    onClick(val: boolean): void,\r\n    active: boolean,\r\n    disabled?: boolean,\r\n    yesLabel?: string,\r\n    noLabel?: string,\r\n}\r\nconst ToggleButton = (props: Props) => {\r\n\r\n    const onClick = () => {\r\n        if (props.disabled == true) {\r\n            return;\r\n        }\r\n        props.onClick(!props.active);\r\n    }\r\n    const yesLabel = props.yesLabel ?? 'ON';\r\n    const noLabel = props.noLabel ?? 'OFF'\r\n    const activeLabel = props.active ? yesLabel : noLabel;\r\n\r\n    const active = props.active;\r\n    return (\r\n        <div className=\"d-flex\" style={{ gap: '5px' }}>\r\n            <div onClick={onClick} className={`toggleButtonContainer ${active ? 'bg-info' : 'bg-secondary'}`}>\r\n                <div \r\n                    className='bg-light toggleButtonPointer'\r\n                    style={{ marginLeft: active ? 16 : 0 }}\r\n                >\r\n                </div>\r\n            </div>\r\n            <span>{activeLabel}</span>\r\n        </div>\r\n    )\r\n}\r\nexport default ToggleButton;","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductStock from '../../../../models/stock/ProductStock';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport Card from '../../../container/Card';\r\nimport ProductStocksTable from './ProductStocksTable';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport Configuration from './../../../../models/Configuration';\r\nimport { getHtmlInputElement } from './../../../../utils/ComponentUtil';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport { addDays, getDiffDays, getInputReadableDate } from './../../../../utils/DateUtil';\r\nimport { beautifyNominal, greeting } from '../../../../utils/StringUtil';\r\nimport BasePage from './../../../BasePage'; \r\nimport { resolve } from 'inversify-react';\r\nclass IState {\r\n    productStocks: ProductStock[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n    totalItems: number = 0;\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    configuration: Configuration = new Configuration();\r\n    productName:string = \"\"\r\n}\r\n\r\nclass ProductStocks extends BasePage {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    @resolve(InventoryService)\r\n    private inventoryService: InventoryService;\r\n    \r\n    state: IState = new IState();\r\n\r\n    constructor(props: any) {\r\n        super(props, \"Stok Produk\");\r\n        this.state.filter.limit = 10;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.loadHealthCenter();\r\n    }\r\n\r\n    updateFilterExpDate = (e: ChangeEvent) => {\r\n        const input = getHtmlInputElement(e);\r\n        let value;\r\n        if (input.type == 'date') {\r\n            const selectedDate = new Date(input.value)\r\n            const diffDay = getDiffDays(new Date(), selectedDate);\r\n            value = diffDay;\r\n            console.debug(\"diffDay: \", diffDay);\r\n        } else {\r\n            value = input.value;\r\n        }\r\n        const config = this.state.configuration;\r\n        config.expiredWarningDays = parseInt(value);\r\n        this.setState({ configuration: config });\r\n    }\r\n\r\n    healthCentersLoaded = (response: any |WebResponse) => {\r\n        this.masterDataService.setHealthCenters(response.entities);\r\n        this.setState({\r\n            healthCenters: response.entities, \r\n            selectedHealthCenter: this.getMasterHealthCenter()\r\n        }, this.loadProducts);\r\n    }\r\n\r\n    productLoaded = (response: WebResponse) => {\r\n        const config = response.configuration ?? new Configuration();\r\n        if (this.state.filter.filterExpDate) {\r\n            config.expiredWarningDays = this.state.configuration.expiredWarningDays;\r\n        }\r\n        this.setState({\r\n            totalItems: response.totalItems,\r\n            configuration: config, loading: false,\r\n            totalData: response.totalData,\r\n            productStocks: response.generalList\r\n        });\r\n    }\r\n\r\n    loadProductsAt = (page: number) => {\r\n        const { filter } = this.state;\r\n        filter.page = page;\r\n        this.setState({ filter: filter }, this.loadProducts);\r\n\r\n    }\r\n    productLoadingError = (e: any) => {\r\n        this.showCommonErrorAlert(e);\r\n        this.setState({ loading: false });\r\n    }\r\n    loadProducts = (page: number = -1) => {\r\n        this.setState({ loading: true }, () => {\r\n            if (page >= 0) {\r\n                const { filter } = this.state;\r\n                filter.page = page;\r\n                this.setState({ filter: filter }, this.doLoadProduct)\r\n            } else {\r\n                this.doLoadProduct();\r\n            }\r\n        }\r\n        );\r\n    }\r\n    doLoadProduct = () => {\r\n        const { filter } = this.state;\r\n        if (filter.filterExpDate && filter.ignoreEmptyValue == true) {\r\n            filter.day = this.state.configuration.expiredWarningDays;\r\n        }\r\n        filter.fieldsFilter = {\r\n            name:this.state.productName\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductsInHealthCenter,\r\n            this.productLoaded, this.productLoadingError,\r\n            filter, this.state.selectedHealthCenter\r\n        )\r\n    }\r\n    getLocations = () => {\r\n        const allLocObject = new HealthCenter();\r\n        allLocObject.id = 0;\r\n        allLocObject.name = \"ALL\";\r\n        const locations: HealthCenter[] = [allLocObject];\r\n        const { healthCenters } = this.state;\r\n        locations.push(...healthCenters);\r\n        return locations;\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const filter: Filter = this.state.filter;\r\n        if (input.value.toString() == (0).toString()) {\r\n            filter.flag = Filter.FLAG_ALL;\r\n\r\n        } else {\r\n            filter.flag = Filter.FLAG_DEFAULT;\r\n        }\r\n        const healthCenters: HealthCenter[] = this.getLocations().filter(h => h.id?.toString() == input.value);\r\n\r\n        this.showConfirmation(\"Ubah Lokasi? *muat ulang untuk melihat perubahan\").then((ok) => {\r\n            if (!ok) return;\r\n            if (healthCenters.length > 0) {\r\n                this.setState({ filter: filter, selectedHealthCenter: healthCenters[0] });\r\n            }\r\n        });\r\n    }\r\n\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            const r = { entities: this.masterDataService.getHealthCenters() };\r\n            this.healthCentersLoaded(r);\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    getDisplayedRecordOptions = () => {\r\n        if (this.state.totalData <= 10) { return [10] }\r\n        const range = this.state.totalData / 10;\r\n        const options: number[] = [];\r\n        let counter = 10;\r\n        for (let i = 0; i < range; i++) {\r\n            options.push(counter);\r\n            counter += 10;\r\n        }\r\n        if (counter < this.state.totalData) {\r\n            options.push(this.state.totalData);\r\n        }\r\n        return options;\r\n    }\r\n    setIgnoreEmpty = (value: boolean) => {\r\n        const { filter } = this.state;\r\n        filter.ignoreEmptyValue = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilterExpDate = (value: boolean) => {\r\n        const { filter } = this.state;\r\n        filter.filterExpDate = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateLimit = (e: any) => {\r\n        const value = e.target.value;\r\n        this.showConfirmation(\"Ubah jumlah tampilan?\").then((ok) => {\r\n            if (!ok) return;\r\n            const { filter } = this.state;\r\n            filter.limit = value;\r\n            filter.page = 0;\r\n            this.setState({ filter: filter }, this.loadProducts);\r\n        });\r\n    }\r\n    render() {\r\n        if (this.getLocations().length == 0) {\r\n            return (\r\n                <div id=\"ProductStocks\" className=\"container-fluid section-body\">\r\n                    <h2>Stok Produk</h2><Spinner />\r\n                </div>\r\n            )\r\n        }\r\n        const ignoreEmptyValue = this.state.filter.ignoreEmptyValue;\r\n        const filterExpDate = this.state.filter.filterExpDate;\r\n\r\n        return (\r\n            <div id=\"ProductStocks\" className=\"container-fluid section-body\">\r\n               {this.titleTag()}\r\n                \r\n                <form onSubmit={e => { e.preventDefault(); this.loadProducts(0) }} className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                    <LocationSelect updateLocation={this.updateLocation}\r\n                        selectedLocation={this.state.selectedHealthCenter} locations={this.getLocations()} />\r\n                    <FormGroup label=\"Jumlah Tampilan\">\r\n                        <select\r\n                            key=\"select-displayed-record\"\r\n                            onChange={this.updateLimit}\r\n                            value={this.state.filter.limit ?? 5}\r\n                            className=\"form-control\"\r\n                        >\r\n                            {this.getDisplayedRecordOptions().map((value, i) => {\r\n                                return (\r\n                                    <option key={`select-displayed-record-${i}-${value}`} value={value}>{value}</option>\r\n                                );\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Total Stok\">\r\n                        <strong>{beautifyNominal(this.state.totalItems)}</strong>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Filter\">\r\n                        <input\r\n                            className=\"form-control\"\r\n                            placeholder=\"Name\"\r\n                            name=\"productName\"\r\n                            value={this.state.productName}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Abaikan Stok Kosong\">\r\n                        <ToggleButton active={ignoreEmptyValue == true} onClick={this.setIgnoreEmpty} />\r\n                    </FormGroup>\r\n                    {\r\n                        ignoreEmptyValue &&\r\n                        <ExpDateFilter\r\n                            active={filterExpDate == true}\r\n                            update={this.updateFilterExpDate}\r\n                            toggle={this.setFilterExpDate}\r\n                            expiredWarningDays={this.state.configuration.expiredWarningDays}\r\n                        />\r\n                    }\r\n                    <SubmitBtn />\r\n                </form>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <NavigationButtons\r\n                        activePage={this.state.filter.page ?? 0}\r\n                        onClick={this.loadProductsAt}\r\n                        limit={this.state.filter.limit ?? 10}\r\n                        totalData={this.state.totalData}\r\n                    />\r\n                    {\r\n                        this.state.loading ? \r\n                        <Spinner /> :\r\n                        <ProductStocksTable \r\n                            location={this.state.selectedHealthCenter} \r\n                            startingNumber={(this.state.filter.page ?? 0) * (this.state.filter.limit ?? 0) + 1}\r\n                            productStocks={this.state.productStocks}\r\n                        />\r\n                    }\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ExpDateFilter = (props: { \r\n    update(e: ChangeEvent): any,\r\n    toggle(val: boolean): any,\r\n    active: boolean,\r\n    expiredWarningDays: number\r\n}) => {\r\n    const { expiredWarningDays, update } = props;\r\n    const expDateFilterWithin = addDays(new Date(), expiredWarningDays);\r\n    const dateValue = getInputReadableDate(expDateFilterWithin);\r\n    const _class = 'form-control-sm';\r\n    return (\r\n        <FormGroup label=\"Kadaluarsa\">\r\n            <div className=\"row\">\r\n                <div className=\"col-2\">\r\n                    <ToggleButton active={props.active == true} onClick={props.toggle} />\r\n                </div>\r\n                {\r\n                props.active &&\r\n                (\r\n                    <div className=\"col-10 input-group\">\r\n                        <span className={_class}>Dalam ({expDayLabel(expiredWarningDays)})</span>\r\n                        <input required type=\"number\" className={_class} value={expiredWarningDays} onChange={update} />\r\n                        <span className={_class}>Max Tanggal</span>\r\n                        <input onChange={props.update} required type=\"date\" className={_class} value={dateValue} />\r\n                    </div>\r\n                )\r\n                }\r\n            </div>\r\n        </FormGroup>\r\n    )\r\n}\r\nconst expDayLabel = (days: number) => {\r\n    if (days < 0) {\r\n        return `${Math.abs(days)} Hari yang lalu`;\r\n    }\r\n    return `${days} Hari`;\r\n}\r\nconst SubmitBtn = (props) => {\r\n    return (\r\n        <FormGroup>\r\n            <button type=\"submit\" className=\"btn btn-success\">\r\n                <i className=\"fas fa-sync-alt mr-2\" />\r\n                <span>Muat Ulang</span>\r\n            </button>\r\n        </FormGroup>\r\n    )\r\n}\r\nconst LocationSelect = (props: { updateLocation(e): any, selectedLocation: HealthCenter, locations: HealthCenter[] }) => {\r\n    return (\r\n        <FormGroup label=\"Lokasi\">\r\n            <select\r\n                key=\"select-health-center\"\r\n                onChange={props.updateLocation}\r\n                value={props.selectedLocation.id ?? \"\"}\r\n                className=\"form-control\"\r\n            >\r\n                {props.locations.map((location, i) => {\r\n                    return <option key={`slct-loc-stk-${i}`} value={location.id ?? \"\"}>{location.name}</option>\r\n                })}\r\n            </select>\r\n        </FormGroup>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStocks))","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"../FieldType\";\r\nimport HeaderProps from '../common/HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n    \r\n\tentityName:string = \"\";\r\n\talias:undefined|string;\r\n\tfieldNames:undefined|string;\r\n\tidField:undefined|string;\r\n\tdetailFieldName:undefined|string; \r\n\teditable:boolean = true;\r\n\tdeletable:boolean = true;\r\n\tcreatable:boolean = true; \r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList:undefined|string[]; \r\n\twithProgressWhenUpdated:boolean = false;\r\n\tpublic addElement = (element:EntityElement) => {\r\n\t\tthis.elements.push(element);\r\n\t}\r\n\tpublic setOrder = (...properties:String[]) =>{\r\n\t\tconst elements:EntityElement[] = [];\r\n\t\tfor (let i = 0; i < this.elements.length; i++) {\r\n\t\t\tconst index = properties.indexOf(this.elements[i].id);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\telements[index] = this.elements[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//remove nulls\r\n\t\tthis.elements = elements.filter(function (el) {\r\n\t\t\treturn el != null;\r\n\t\t });\r\n\t}\r\n\tpublic keepProperties = (...properties: String[])=>{\r\n\t\tconst elements:EntityElement[] = [];\r\n\t\tloop:for (let i = 0; i < this.elements.length; i++) {\r\n\t\t\t for (let p = 0; p < properties.length; p++) {\r\n\t\t\t\tconst id = properties[p];\r\n\t\t\t\tif (this.elements[i].id == id) {\r\n\t\t\t\t\telements.push(this.elements[i]);\r\n\t\t\t\t\tcontinue loop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.elements = elements;\r\n\t\tconsole.debug(\"new elements: {}\", this.elements);\r\n    }\r\n\r\n//////////////////\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.labelName??element.id,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date',\r\n\t\t\t\tfilterable: element.filterable,\r\n\t\t\t\torderable: element.orderable\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.identity) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport HeaderProps from '../../../models/common/HeaderProps';\r\ninterface IProps {\r\n    fieldsFilter: any,\r\n    orderButtonOnClick(e: any): void,\r\n    filterOnChange(e: any): void,\r\n    headerProps: HeaderProps[],\r\n}\r\nconst DataTableHeader = (props: IProps) => {\r\n    const { headerProps, fieldsFilter, orderButtonOnClick, filterOnChange } = props;\r\n    return (\r\n    <thead>\r\n        <tr>\r\n            <th>No</th>\r\n            {headerProps.map((headerProp, i) => {\r\n                const isDate = headerProp.filterable && headerProp.isDate;\r\n                const headerName = headerProp.value;\r\n                const k = `dth-${i}-${headerName}`;\r\n                if (!headerProp.filterable && !headerProp.orderable) {\r\n                    return (\r\n                        <th key={k}>\r\n                            <p children={headerProp.label} />\r\n                        </th>\r\n                    )\r\n                }\r\n                const className = \"form-control input-filter\";\r\n                return (\r\n                    <th key={k} >\r\n                        <p children={headerProp.label} />\r\n                        <div style={{ minWidth: '200px' }} className=\"input-group\">\r\n                            {isDate ?\r\n                                <FilterDate\r\n                                    headerName={headerName}\r\n                                    fieldsFilter={fieldsFilter}\r\n                                    filterClass={className}\r\n                                    onChange={props.filterOnChange}\r\n                                />\r\n                                :\r\n                                    headerProp.filterable &&\r\n                                    <input\r\n                                        key={\"filter-common-\" + headerName}\r\n                                        autoComplete=\"off\"\r\n                                        value={fieldsFilter[headerName] ?? \"\"}\r\n                                        onChange={filterOnChange}\r\n                                        placeholder={headerProp.label}\r\n                                        className={className} name={headerName}\r\n                                    />\r\n                            }\r\n                            <SortButton\r\n                                show={headerProp.orderable}\r\n                                headerName={headerName}\r\n                                onClick={orderButtonOnClick}\r\n                            />\r\n                        </div>\r\n                    </th>\r\n                )\r\n            })}\r\n            <th>Action</th>\r\n        </tr>\r\n    </thead>)\r\n}\r\n\r\n\r\nconst FilterDate = (props: {\r\n    headerName: string,\r\n    fieldsFilter: {},\r\n    filterClass: string,\r\n    onChange(e: ChangeEvent): any\r\n}) => {\r\n    const { headerName, filterClass: className, fieldsFilter } = props;\r\n    return (\r\n        <Fragment>\r\n            <input key={\"filter-day-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-day\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-day\"}\r\n                className={className} placeholder={\"day\"} />\r\n            <input key={\"filter-month-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-month\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-month\"}\r\n                className={className} placeholder={\"month\"} />\r\n            <input key={\"filter-year-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-year\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-year\"}\r\n                className={className} placeholder={\"year\"} />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst SortButton = (props: {\r\n    show: boolean,\r\n    onClick(e: any): any, \r\n    headerName: string \r\n}) => {\r\n    if (props.show != true) {\r\n        return null;\r\n    }\r\n    const headerName = props.headerName;\r\n    return (\r\n        <div className=\"input-group-append btn-group\">\r\n            <button \r\n                data-ordertype=\"asc\"\r\n                onClick={props.onClick}\r\n                data-orderby={headerName}\r\n                className=\"btn btn-outline-secondary btn-sm\"\r\n            >\r\n                <i \r\n                    data-ordertype=\"asc\"\r\n                    onClick={props.onClick}\r\n                    data-orderby={headerName}\r\n                    className=\"fas fa-angle-up\" \r\n                />\r\n            </button>\r\n            <button \r\n                data-ordertype=\"desc\"\r\n                onClick={props.onClick}\r\n                data-orderby={headerName}\r\n                className=\"btn btn-outline-secondary btn-sm\"\r\n            >\r\n                <i \r\n                    data-ordertype=\"desc\"\r\n                    onClick={props.onClick}\r\n                    data-orderby={headerName}\r\n                    className=\"fas fa-angle-down\"\r\n                />\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DataTableHeader;","\r\n\r\nimport EntityProperty from './../settings/EntityProperty';\r\nexport default class HeaderProps {\r\n\r\n\tlabel:string = \"\";\r\n\tvalue:string = \"\";\r\n\tisDate:boolean = false;\r\n\tfilterable:boolean = true;\r\n\torderable:boolean = true;\r\n\r\n\tpublic static fromEntityProperty = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\treturn EntityProperty.getHeaderLabels(prop);\r\n\t}\r\n}","import EntityProperty from './EntityProperty';\r\nimport { FieldType } from '../FieldType';\r\n\r\nexport default class EntityElement{\r\n\tignoreBaseField:undefined|boolean;\r\n\tid:string=\"0\";\r\n\ttype:string=\"text\";\r\n\tclassName:undefined|string;\r\n\tlabelName :string=\"Label\";\r\n\toptionItemName:undefined|string;\r\n\toptionValueName:undefined|string;\r\n\tentityReferenceName:undefined|string;\r\n\tentityReferenceClass:undefined|string;\r\n\tdetailFields:undefined|string;\r\n\tmultiple:undefined|boolean; \r\n\tdefaultValues:undefined|any[];\r\n\tplainListValues:any[] = [];\r\n\toptions:undefined|any[];\r\n\tidentity:undefined|boolean;\r\n\trequired:undefined|boolean;  \r\n\teditable:boolean = true;\r\n\tfilterable:boolean = true;\r\n\torderable:boolean = true;\r\n\r\n\tentityProperty:undefined|EntityProperty;\r\n\tadditionalMap:undefined|{};\r\n\tfieldType:FieldType =FieldType.FIELD_TYPE_TEXT;\r\n\r\n\tstatic isList = (el:EntityElement)  :boolean => {\r\n\t\treturn el.fieldType == FieldType.FIELD_TYPE_FIXED_LIST || el.fieldType == FieldType.FIELD_TYPE_DYNAMIC_LIST;\r\n\t}\r\n\r\n}\r\n","\n\nimport React, { ChangeEvent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\nimport BasePage from '../../BasePage';\nimport { greeting } from '../../../utils/StringUtil';\nimport MasterDataService from './../../../services/MasterDataService';\nimport WebResponse from './../../../models/common/WebResponse';\nimport EntityProperty from './../../../models/settings/EntityProperty';\nimport SimpleError from './../../alert/SimpleError';\nimport AnchorButton from './../../navigation/AnchorButton';\nimport Filter from './../../../models/common/Filter';\nimport DataTableHeader from './../masterdata/DataTableHeader';\nimport HeaderProps from './../../../models/common/HeaderProps';\nimport Spinner from './../../loader/Spinner';\nimport Modal from './../../container/Modal';\nimport InventoryService from './../../../services/InventoryService';\nimport EntityElement from './../../../models/settings/EntityElement';\nimport ProductFlow from './../../../models/ProductFlow';\nimport NavigationButtons from './../../navigation/NavigationButtons';\nimport Configuration from './../../../models/Configuration';\nimport { resolve } from 'inversify-react';\n\nconst DEFAULT_LIMIT: number = 20;\n\nclass State {\n    entityProperty: EntityProperty | undefined;\n    entityPropertyNotLoaded = false;\n    filter = new Filter();\n    items: ProductFlow[] = [];\n    inventoryConfig = new Configuration();\n    totalData = 0;\n}\nclass StockFilter extends BasePage {\n\n    @resolve(MasterDataService)\n    private masterDataService: MasterDataService;\n    @resolve(InventoryService)\n    private inventoryService: InventoryService;\n\n    headerProps: HeaderProps[] = [];\n    state: State = new State();\n\n    constructor(props: any) {\n        super(props, \"Inventory\");\n        this.state.filter.limit = DEFAULT_LIMIT;\n    }\n\n    entityPropertyLoaded = (response: WebResponse) => {\n        if (!response.entityProperty) {\n            throw new Error(\"Invalid property!\");\n        }\n        const prop = this.adjustProperty(response.entityProperty);\n        this.setState({\n            entityProperty: prop,\n            entityPropertyNotLoaded: false\n        }, () => { this.loadItems(0) });\n    }\n    adjustProperty = (entityProperty: EntityProperty): EntityProperty => {\n        const prop: EntityProperty = Object.assign(new EntityProperty(), entityProperty);\n        prop.keepProperties(\"id\", \"product\", \"stock\", \"expiredDate\");\n\n        const el: EntityElement = new EntityElement();\n        el.id = 'location';\n        el.labelName = 'Location';\n        el.orderable = false;\n        prop.addElement(el);\n        prop.setOrder(\"product\", \"stock\", \"expiredDate\", \"location\", \"id\");\n        return prop;\n    }\n    entityPropertyNotLoaded = (e: any) => {\n        this.setState({ entityProperty: undefined, entityPropertyNotLoaded: true });\n    }\n    loadEntityProperty = () => {\n        this.commonAjax(\n            this.masterDataService.loadEntityProperty,\n            this.entityPropertyLoaded,\n            this.entityPropertyNotLoaded,\n            'productflow'\n        )\n    }\n    loadItems = (page: number | undefined) => {\n        const filter = Object.assign(new Filter(), this.state.filter);\n        filter.page = page ?? (filter.page ?? 0);\n        Filter.validateFieldsFilter(filter);\n        this.commonAjax(\n            this.inventoryService.filterStocks,\n            this.itemsLoaded,\n            this.showCommonErrorAlert,\n            filter\n        );\n\n    }\n    itemsLoaded = (response: WebResponse) => {\n        this.setState({\n            items: response.entities, totalData: response.totalData,\n            filter: response.filter, config: response.configuration\n        })\n    }\n\n    componentDidMount() {\n        this.scrollTop();\n        this.loadEntityProperty();\n    }\n    filterOnChange = (e: ChangeEvent) => {\n        e.preventDefault();\n        const { filter } = this.state;\n        Filter.setFieldsFilterValueFromInput(filter, e.target);\n        this.setState({ filter: filter });\n    }\n    orderButtonOnClick = (e) => {\n        const { filter } = this.state;\n        Filter.setOrderPropertyFromDataSet(filter, e.target.dataset);\n        this.setState({ filter: filter }, () => { this.loadItems(0); });\n    }\n    getHeaderProps = (): HeaderProps[] => {\n        if (!this.state.entityProperty) {\n            this.showCommonErrorAlert(\"Invalid Entity Property\");\n            return [];\n        }\n        if (this.headerProps.length > 0) {\n            return this.headerProps;\n        }\n        this.headerProps = HeaderProps.fromEntityProperty(this.state.entityProperty);\n        return this.headerProps;\n    }\n    updateFilterPage = (page: any) => {\n        const { filter } = this.state;\n        filter.useExistingFilterPage = true;\n        filter.page = parseInt(page) - 1;\n        this.setState({ filter: filter });\n    }\n    updateFilterLimit = (limit: any) => {\n        const { filter } = this.state;\n        filter.limit = parseInt(limit);\n        this.setState({ filter: filter });\n    }\n    filterReset = (e) => {\n        const { filter } = this.state;\n        filter.fieldsFilter = {};\n        filter.limit = DEFAULT_LIMIT;\n        this.setState({ filter: filter });\n    }\n    filterFormSubmit = (e) => {\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\n        this.loadItems(page);\n    }\n    bgClass = (item: ProductFlow): string => {\n        if (!item.expiredDate) return \"\";\n        const expDate: Date = new Date(item.expiredDate);\n        const now = new Date();\n        if (expDate <= now) {\n            return \"bg-danger\";\n        }\n        const config = this.state.inventoryConfig;\n        const secondsOneDay = (1000 * 24 * 60 * 60)\n        if ((expDate.getTime() - now.getTime()) / secondsOneDay <= config.expiredWarningDays) {\n            return \"bg-warning\";\n        }\n        return \"\";\n    }\n\n    render() {\n        if (this.state.entityPropertyNotLoaded) {\n            return (\n                <div className=\"container-fluid section-body\">\n                    <SimpleError>\n                        <h3>Config Not Loaded</h3>\n                        <AnchorButton \n                            onClick={this.loadEntityProperty}\n                            children=\"Reload Config\"\n                        />\n                    </SimpleError>\n                </div>\n            )\n        }\n        if (!this.state.entityProperty) {\n            return <div className=\"container-fluid section-body\"><Spinner /></div>\n        }\n        const { filter, items, totalData } = this.state;\n        return (\n            <div className=\"container-fluid section-body\">\n                {this.titleTag()}\n                <div className=\"alert alert-info\">\n                    {this.userGreeting()}\n                </div>\n                <form onSubmit={(e) => { e.preventDefault() }}>\n                    <Modal title=\"Filter\" toggleable={true}>\n                        <div>\n                            <div className=\"form-group row\">\n                                <div className=\"col-6\">\n                                    <input\n                                        value={(filter.page ?? 0) + 1}\n                                        onChange={(e) => { this.updateFilterPage(e.target.value) }}\n                                        min=\"1\"\n                                        className=\"form-control\"\n                                        type=\"number\"\n                                        placeholder=\"go to page\"\n                                    />\n                                </div>\n                                <div className=\"col-6\">\n                                    <input\n                                        value={filter.limit ?? 5}\n                                        onChange={(e) => this.updateFilterLimit(e.target.value)}\n                                        min=\"1\"\n                                        className=\"form-control\"\n                                        type=\"number\"\n                                        placeholder=\"record per page\"\n                                    />\n                                </div>\n                                <div className=\"col-12\"><p /></div>\n                                <div className=\"col-3\">\n                                    <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\n                                </div>\n                            </div>\n\n                        </div>\n                    </Modal>\n                    <NavigationButtons\n                        limit={filter.limit ?? DEFAULT_LIMIT}\n                        totalData={totalData ?? 0}\n                        activePage={filter.page ?? 0}\n                        onClick={this.loadItems}\n                    />\n                    <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\n                        <table className=\"table\" >\n                            <DataTableHeader\n                                headerProps={this.getHeaderProps()}\n                                fieldsFilter={filter.fieldsFilter}\n                                filterOnChange={this.filterOnChange}\n                                orderButtonOnClick={this.orderButtonOnClick}\n                            />\n                            <tbody>\n                                {items.map((item, i) => {\n                                    const location = item.transaction?.type == 'TRANS_IN' ? item.transaction?.healthCenterLocation?.name : item.transaction?.healthCenterDestination?.name;\n                                    return (\n                                        <tr key={\"stock-item-\" + item.id} className={this.bgClass(item)}>\n                                            <td>{i + 1 + (filter.page ?? 0) * (filter.limit ?? DEFAULT_LIMIT)}</td>\n                                            <td children={item.product?.name} />\n                                            <td children={item.stock} />\n                                            <td>\n                                                {item.expiredDate ? new Date(item.expiredDate).toLocaleDateString(\"ID\") : \"-\"}\n                                            </td>\n                                            <td children={location} />\n                                            <td children={item.id} />\n                                        </tr>\n                                    )\n                                })}\n                            </tbody>\n                        </table>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nconst SubmitResetButton = (props: any) => {\n    return (\n        <div className=\"btn-group\">\n            <button\n                onClick={props.onSubmit}\n                className=\"btn btn-dark btn-sm\"\n            >\n                <i className=\"fas fa-play-circle mr-2\" />\n                <span>Apply Filter</span>\n            </button>\n            <button\n                onClick={props.onReset}\n                type=\"reset\"\n                className=\"btn btn-dark btn-sm\"\n            >\n                <i className=\"fas fa-sync-alt mr-2\" />\n                <span>Reset</span>\n            </button>\n        </div>\n    )\n}\n\n\nexport default withRouter(connect(\n    mapCommonUserStateToProps\n)(StockFilter))","\r\n\r\nimport React, { ChangeEvent, FormEvent, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Spinner from './../../loader/Spinner';\r\nimport './Login.css';\r\n\r\nclass IState {\r\n    loading = false;\r\n    username = \"\";\r\n    password = \"\";\r\n}\r\nclass Login extends BaseComponent {\r\n    state: IState = new IState();\r\n    \r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username, this.state.password, this);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) {\r\n            return;\r\n        }\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\" className=\"text-center\">\r\n                <Icon />\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty} />\r\n                    <PasswordField value={this.state.password} onChange={this.updateCredentialProperty} />\r\n                    {this.state.loading ? <Spinner /> : <button className=\"btn btn-lg btn-dark btn-block\" type=\"submit\">Masuk</button>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Kata Sandi</label>\r\n        <input\r\n            name=\"password\"\r\n            value={value}\r\n            onChange={onChange}\r\n            type=\"password\"\r\n            id=\"inputPassword\"\r\n            className=\"form-control border border-dark\"\r\n            placeholder=\"Password\"\r\n            required\r\n        />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({ value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Nama Pengguna</label>\r\n        <input \r\n            name=\"username\"\r\n            value={value}\r\n            onChange={onChange}\r\n            type=\"text\"\r\n            id=\"username\"\r\n            className=\"form-control border border-dark\"\r\n            placeholder=\"Username\"\r\n            required\r\n            autoFocus\r\n        />\r\n    </Fragment>)\r\n}\r\n\r\nconst Icon = () => {\r\n    return (\r\n        <svg style={{ marginTop: '20px' }} width=\"200\" height=\"201\"  >\r\n            <g fill=\"transparent\" stroke=\"black\" strokeWidth={3}>\r\n                <path \r\n                    className=\"animated-svg house\"\r\n                    d=\"M 100 0 L 0 100 L 15 100 L 15 200 L 185 200  L 185 100 L 200 100  Z\"\r\n                />\r\n                <circle\r\n                    className=\"animated-svg circle\"  \r\n                    cx={100}\r\n                    cy={122}\r\n                    r={68}\r\n                />\r\n                <path\r\n                    className=\"animated-svg plus\"  \r\n                    d=\"M 41 111 L 88 111 L 88 64 L 113 64 \r\n                    L 113 111 L 158 111 L 158 135 L 113 135 \r\n                    L 113 181 L 88 181 L 88 135 L 41 135 Z\" \r\n                />\r\n            </g>\r\n        </svg>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","import React from 'react';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport EntityElement from '../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object: any, prop: EntityProperty): Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents: EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value: any = object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (element.fieldType) { \r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleDateString(\"ID\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATETIME:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleDateString(\"ID\") +\" \"+ new Date(value).toLocaleTimeString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src={baseImageUrl() + imgLink} width=\"50\" height=\"50\" />\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{ color: value }} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_TEXTEDITOR:\r\n\t\t\t\t\tvalue = <div dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: new String(value).length > 100 ?\r\n\t\t\t\t\t\t\t(new String(value).substring(0, 100) + \"...\")\r\n\t\t\t\t\t\t\t: value\r\n\t\t\t\t\t}}></div>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_CHECKBOX:\r\n\t\t\t\t\tvalue = value == true?<i>true</i> :<i>false</i>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (element.optionItemName  && element.optionItemName != \"\") {\r\n\t\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\t\tvalue = valueAsObj[element.optionItemName ?? \"id\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","import React from 'react'\r\nimport BaseComponent from './../../../../BaseComponent';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\n\r\nexport default abstract class BaseField extends BaseComponent {\r\n    \r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    abstract prepopulateForm: () => void;\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\n  class FormInputImage extends BaseField {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl() + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\" name={element.id} className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImage))","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url'; \r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseField {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n      \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment key={\"IMG\"+index+element.id}>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl() + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple))\r\n","\r\n\r\nimport { resolve } from 'inversify-react';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport WebResponse from '../../../../../models/common/WebResponse';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: undefined| string, \r\n}\r\nclass FormInputDropDown extends BaseField {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    \r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        // if (element.jsonList &&  element.jsonList != \"\") {\r\n        //     const list = JSON.parse(element.jsonList);\r\n        //     this.inputListLoaded({entities:list})\r\n        //     return;\r\n        // }\r\n\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport BaseField from './BaseField';\r\nimport './TextEditor.css';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseField {\r\n    \r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n\r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport ToggleButton from '../../../../navigation/ToggleButton';\r\nimport BaseField from './BaseField';\r\n\r\n\r\nexport default class FormInputCheckbox extends BaseField {\r\n    state = {\r\n        checked: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ checked: recordValue == true })\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        const checked: boolean = this.state.checked;\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={checked ? 'true' : 'false'} />\r\n                <ToggleButton\r\n                    active={checked}\r\n                    onClick={(val: boolean) => this.setState({ checked: val })}\r\n                    yesLabel=\"Ya\"\r\n                    noLabel=\"Tidak\"\r\n                />\r\n                {/* <div className=\"btn-group\">\r\n                    <a className={checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: true })} >Yes</a>\r\n                    <a className={!checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: false })} >No</a>\r\n                </div> */}\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nimport { FieldType } from '../../../../../models/FieldType';\r\nimport { getInputReadableDate } from '../../../../../utils/DateUtil';\r\nimport BaseField from './BaseField';\r\n\r\nexport default class FormInputCommon extends BaseField {\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const element = this.getEntityElement();\r\n        const fieldName = element.id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (undefined == recordValue) {\r\n            console.debug(fieldName, \" is undefined\", this.props.recordToEdit, this.props.recordToEdit[fieldName]);\r\n            return;\r\n        }\r\n\r\n        const fieldType: FieldType = element.fieldType;\r\n        let defaultInputValue: any = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DATE:\r\n                const dateObj = new Date(recordValue);\r\n                if (!dateObj) { break }\r\n                defaultInputValue = getInputReadableDate(dateObj);\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                defaultInputValue = new String(recordValue);\r\n                break;\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n\r\n            if (element.optionItemName && element.optionItemName != \"\") {\r\n                const valueAsObj = defaultInputValue;\r\n                this.ref.current.value = valueAsObj[element.optionItemName ?? \"id\"];\r\n            } else {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (element.identity == true || element.editable == false) {\r\n            return (<input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                input = (\r\n                    <select  {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                        {element.plainListValues.map((value, i) => {\r\n                            return (\r\n                                <option key={\"s-\" + element.id + '-o-' + i} value={value}>{value}</option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                )\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                input = <input type={element.type} step={0.001} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return input;\r\n\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/common/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\nimport WebRequest from '../../../../../models/common/WebRequest';\r\nimport Filter from './../../../../../models/common/Filter';\r\nimport { resolve } from 'inversify-react';\r\nclass IState {\r\n    inputList: any[] = [];\r\n    searchValue: string = \"\"\r\n}\r\nclass FormInputDropDownDynamic extends BaseField {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    ref: React.RefObject<any> = React.createRef();\r\n    inputRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(this.getEntityElement().labelName+\" Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities }, ()=> {\r\n            if(this.inputRef.current) {\r\n                this.inputRef.current.focus();\r\n            }\r\n        });\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n\r\n        const code = element.entityReferenceClass;\r\n        const searchKey = element.optionItemName;\r\n        if (!searchKey)  { return; }\r\n        const request: WebRequest = Object.assign(new WebRequest(), {\r\n            entity: code,\r\n            filter: Object.assign(new Filter(), {\r\n                    limit: 0, page: 0,\r\n                    fieldsFilter: {\r\n                        [searchKey]:this.inputRef.current?.innerHTML\r\n                    }\r\n                }\r\n            )\r\n        });\r\n        this.commonAjax(\r\n            this.masterDataService.loadItems,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        )\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.setState({inputList:[recordValue], searchValue: \"\"} , ()=>{\r\n            let defaultInputValue = undefined;\r\n            const optionValueName = this.getEntityElement().optionValueName;\r\n            if (!optionValueName) return;\r\n            defaultInputValue = recordValue[optionValueName]; \r\n            if (defaultInputValue) {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        });\r\n    }\r\n\r\n    search = (event) => {\r\n        if(event.keyCode == 13) {\r\n            if (this.inputRef.current) {\r\n                const div = this.inputRef.current;\r\n                div.innerHTML = new String(div.innerText).trim();\r\n            }\r\n            event.preventDefault();\r\n            this.loadInputList();\r\n            return false;\r\n          }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const optionItemValue = element.optionValueName;\r\n        const optionItemName = element.optionItemName;\r\n        const options = this.state.inputList;\r\n        console.debug(\"options: \", options);\r\n        const placeholder:string =   element.entityReferenceClass + \" \"+ optionItemName;\r\n        return (\r\n            <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-append\">\r\n                        <span className=\"input-group-text\">{placeholder}</span>\r\n                    </div>\r\n                    <div onKeyDown={this.search} ref={this.inputRef} contentEditable={true} className=\"form-control\" ></div>\r\n                   \r\n                    <div className=\"input-group-append\">\r\n                        <AnchorWithIcon onClick={this.loadInputList} className=\"btn btn-secondary\" children=\"Search\"/>\r\n                        <AnchorWithIcon show={this.props.recordToEdit != undefined} onClick={this.prepopulateForm} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary\"/>\r\n          \r\n                    </div>\r\n                </div>\r\n                <select  {...this.getRequiredAttr()} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option key={\"fid-\" + uniqueId() + \"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                  </div>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDownDynamic))","import React,{ Component, ChangeEvent } from 'react';\nimport { twoDigits } from './../../utils/StringUtil';\ninterface Props{\n    onChange(h:number,m:number,s:number):any,\n    value:string,\n}\nclass State {\n    hour:number = new Date().getHours();\n    minute:number = new Date().getMinutes();\n    second:number = new Date().getSeconds();\n}\nconst hours:number[] = [\n    0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,\n];\nconst minutesOrSeconds = ()  : number[]=> {\n    const arr:number[]=  [];\n    for (let i = 1; i < 60; i++) {\n        arr.push(i);   \n    }\n    return arr; \n}\nexport default class InputTime extends Component<Props, any> {\n    state:State = new State();\n    minutes:number[];\n    seconds:number[] ;\n    constructor (props) {\n        super(props);\n        this.minutes = minutesOrSeconds();\n        this.seconds = minutesOrSeconds();\n    }\n    setDefaultValue = () => {\n        try {\n            const val = this.props.value.split(\":\");\n            this.setState({hour: parseInt(val[0]), minute: parseInt(val[1]), second: parseInt(val[2])});\n        } catch (error) {\n            \n        }\n    }\n    updateValue = (e:ChangeEvent) => {\n        const target = e.target as HTMLSelectElement;\n        if (target) {\n            const name = target.name;\n            this.setState({[name]: target.value}, this.onChange);\n        }\n        \n    }\n    setNow = () => {\n        const date = new Date();\n        this.setState({\n            hour: date.getHours(),\n            minute: date.getMinutes(),\n            second: date.getSeconds()\n        }, this.onChange)\n    }\n    onChange = () => {\n        this.props.onChange(this.state.hour, this.state.minute, this.state.second)\n    }\n    render() {\n         \n        return (<div className=\"form-control bg-light\">\n            <select name=\"hour\" style={{border:'none'}} value={this.state.hour} onChange={this.updateValue} >\n                {hours.map((hour)=>{\n                    return <option key={\"HOUR-\"+hour} value={hour} >{twoDigits(hour)}</option>\n                })}\n            </select>\n            <select name=\"minute\" style={{border:'none'}}  value={this.state.minute} onChange={this.updateValue}>\n                {this.minutes.map((min)=>{\n                    return <option key={\"MIN-\"+min} value={min} >{twoDigits(min)}</option>\n                })}\n            </select>\n            <select name=\"second\" style={{border:'none'}}  value={this.state.second} onChange={this.updateValue}>\n                {this.seconds.map((sec)=>{\n                    return <option key={\"SEC-\"+sec} value={sec} >{twoDigits(sec)}</option>\n                })}\n            </select>\n            <a style={{marginLeft: 5}}  onClick={this.setNow} ><i className=\"fas fa-history\"/></a>\n        </div>)\n    }\n}","import React, { ChangeEvent, Component } from 'react'\nimport { twoDigits } from '../../utils/StringUtil';\nimport { getInputReadableDate, getTime } from './../../utils/DateUtil';\nimport InputTime from './InputTime';\ninterface Props {\n    onChange(date: Date): any,\n    value: Date,\n}\n\nexport default class InputDateTime extends Component<Props, any>{\n    timeRef:React.RefObject<InputTime> = React.createRef();\n    constructor(props) {\n        super(props);\n\n    }\n    updateTime = (h: number, m: number, s: number) => {\n        const time = [twoDigits(h), twoDigits[m], twoDigits(s)].join(\":\");\n        const date = this.props.value;\n        date.setHours(h);\n        date.setMinutes(m);\n        date.setSeconds(s);\n        date.setMilliseconds(0);\n        this.setState({\n            date: date\n        }, () => {\n            this.props.onChange(this.props.value);\n        });\n    }\n    updateDate = (e: ChangeEvent) => {\n        const target = e.target as HTMLInputElement;\n        const inputDate = new Date(target.value);\n\n        const date = this.props.value;\n        date.setDate(inputDate.getDate());\n        date.setMonth(inputDate.getMonth());\n        date.setFullYear(inputDate.getFullYear());\n        this.setState({\n            date: date\n        }, () => {\n            this.props.onChange(this.props.value);\n        });\n    }\n    componentDidUpdate(){\n        if (this.timeRef.current) {\n            this.timeRef.current.setDefaultValue();\n        }\n    }\n    render() {\n        const date = this.props.value;\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-1 text-center d-flex align-items-center\"><i className=\"far fa-calendar-alt\"/></div>\n                <div className=\"col-md-5\">\n                    <input onChange={this.updateDate} className=\"form-control\" value={getInputReadableDate(date)} type=\"date\" />\n                </div>\n                <div className=\"col-md-1 text-center d-flex align-items-center\"><i className=\"far fa-clock\"/></div>\n                <div className=\"col-md-5\">\n                    <InputTime ref={this.timeRef} value={getTime(date)} onChange={this.updateTime} />\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\nimport InputDateTime from './../../../../form/InputDateTime';\r\n\r\n\r\nexport default class FormInputDateTime extends BaseField {\r\n    state = {\r\n        checked: false,\r\n        value: new Date()\r\n    }\r\n    inputRef:React.RefObject<InputDateTime> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) {\r\n            return;\r\n        }\r\n        \r\n        this.setState({ value: new Date(recordValue) });\r\n    }\r\n    onChange = (date:Date) => {\r\n        this.setState({value:date});\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement(); \r\n        console.debug(\"Date time value: \", this.state.value);\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={this.state.value.getTime()} />\r\n                <InputDateTime ref={this.inputRef} onChange={this.onChange} value={this.state.value}/>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","\r\n\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputImage from './fields/FormInputImage';\r\nimport FormInputImageMultiple from './fields/FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormInputDropDown from './fields/FormInputDropDown';\r\nimport FormInputTextEditor from './fields/FormInputTextEditor';\r\nimport FormInputCheckbox from './fields/FormInputCheckBox';\r\nimport FormInputCommon from './fields/FormInputCoomon';\r\nimport FormInputDropDownDynamic from './fields/FormInputDropDownDynamic';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport FormInputDateTime from './fields/FormInputDateTime';\r\n\r\nclass FormInputField extends BaseComponent {\r\n    \r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n\r\n        let input: JSX.Element = <p>{element.fieldType}</p>;\r\n        if (element.editable) {\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                    input = <FormInputDropDownDynamic recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    input = <FormInputDropDown recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                    input = <FormInputTextEditor recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    input = element.multiple ?\r\n                        <FormInputImageMultiple recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                        :\r\n                        <FormInputImage recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    input = <FormInputCheckbox recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DATETIME:\r\n                    input = <FormInputDateTime recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                case FieldType.FIELD_TYPE_TEXTAREA:\r\n                default:\r\n                    input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n            }\r\n        } else {\r\n            input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n        }\r\n        const formLabel = <span>{element.labelName}\r\n            {element.editable && element.required ? <i className=\"text-danger\">*</i> : null}</span>\r\n        return (\r\n            <FormGroup orientation='vertical' label={formLabel}>\r\n                {input}\r\n            </FormGroup>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/settings/EntityProperty';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/common/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputField from './FormInputField';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false || this.getEntityProperty().creatable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const form = e.target;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then((ok)=> {\r\n                if (ok) { this.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        let hasImageField:boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    object[key].push(value == \"true\");\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            hasImageField = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n            \r\n        });  \r\n        Promise.all(promises).then( (val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", hasImageField);\r\n            this.ajaxSubmit(objectPayload, hasImageField);\r\n        });\r\n        \r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            // console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        if (this.getEntityProperty().withProgressWhenUpdated == true || realtimeProgress){\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save,\r\n                this.recordSaved,\r\n                this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else{\r\n            this.commonAjax(\r\n                this.masterDataService.save,\r\n                this.recordSaved,\r\n                this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n        if (this.props.recordSavedCallback) {\r\n            this.props.recordSavedCallback();\r\n        }\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton\r\n                    style={{ marginBottom: '5px' }} \r\n                    onClick={this.props.onClose}\r\n                    iconClassName=\"fas fa-angle-left\"\r\n                    children=\"Back\"\r\n                />\r\n                <form onSubmit={this.onSubmit} id=\"record-form\">\r\n                    <Modal\r\n                        title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} \r\n                        footerContent={<SubmitReset />}\r\n                    >\r\n                        <InputFields\r\n                            app={this.parentApp}\r\n                            recordToEdit={this.recordToEdit}\r\n                            entityProperty={entityProperty} \r\n                        />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map((elements, ei) => {\r\n                return (\r\n                    <div key={`GROUPED_ELEMENT_${ei}`} className={hasTextEditor ? \"col-lg-12\" : \"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            const key = `form-input-for-${props.entityProperty.entityName+element.id}`;\r\n                            return (\r\n                                <FormInputField\r\n                                    key={key}\r\n                                    recordToEdit={props.recordToEdit}\r\n                                    entityElement={element}\r\n                                />\r\n                            )\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    \r\n    @resolve(MasterDataService)\r\n    private masterDataService:MasterDataService;\r\n\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        if (entityProperty.withProgressWhenUpdated) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        } else { \r\n            this.commonAjax(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        }\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const { entityProperty } = this.props;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n     \r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        const { entityProperty } = this.props;\r\n        if (entityProperty.editable == false) return null;\r\n        return (\r\n           <Fragment>\r\n                <AnchorButton\r\n                    onClick={this.getRecordById}\r\n                    iconClassName=\"fas fa-edit\"\r\n                    className=\"btn btn-warning btn-sm\"\r\n                />\r\n                <AnchorButton\r\n                    show={entityProperty.deletable == true}\r\n                    onClick={this.delete}\r\n                    className=\"btn btn-danger btn-sm\"\r\n                    iconClassName=\"fas fa-times\"\r\n                />\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","import React from 'react'\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\n\r\nconst ExternalEditForm = (props: { record: any, entityProperty: EntityProperty, }) => {\r\n\r\n    let link = \"\";\r\n    if (props.entityProperty.entityName == 'transaction') {\r\n        link = \"/transaction/detail/\" + props.record.code;\r\n    } else if (props.entityProperty.entityName == 'product') {\r\n        link = \"/dashboard/statistic/product/\" + props.record.code;\r\n    } else {\r\n        // console.debug(\"ENTITY NAME: \", props.entityProperty.entityName);\r\n        // console.debug(\"NO External Edit FORM\");\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <AnchorWithIcon\r\n            className=\"btn btn-sm btn-dark\" \r\n            iconClassName=\"fas fa-external-link-alt\"\r\n            to={link}\r\n            attributes={{ target: \"_blank\" }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default ExternalEditForm;","import React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from '../../../models/common/Filter';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebRequest from '../../../models/common/WebRequest';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport HeaderProps from '../../../models/common/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\nimport ExternalEditForm from './ExternalEditForm';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\nimport { resolve } from 'inversify-react';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nconst DEFAULT_LIMIT = 5;\r\nclass MasterDataList extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n\r\n    state: IState;\r\n    recordToEdit?: {} | undefined = undefined;\r\n    entityProperty: EntityProperty;\r\n    headerProps: HeaderProps[];\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n\r\n        this.state = {\r\n            showForm: false, loading: false,\r\n            filter: Object.assign(new Filter(), { limit: DEFAULT_LIMIT, page: 0, fieldsFilter: {} })\r\n        };\r\n    }\r\n    loadItems = (page: number | undefined) => {\r\n        const filter = Object.assign(new Filter(), this.state.filter);\r\n\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page ?? 0;\r\n        Filter.validateFieldsFilter(filter);\r\n        const request: WebRequest = Object.assign(new WebRequest(), {\r\n            entity: entityName,\r\n            filter: filter\r\n        });\r\n        this.commonAjax(\r\n            this.masterDataService.loadItems,\r\n            this.itemsLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    itemsLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        this.loadItems(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumberingOrder = (i: number): number => {\r\n        const { page, limit } = this.state.filter;\r\n        const res = (page ?? 0) * (limit ?? DEFAULT_LIMIT) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        const page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadItems(page);\r\n    }\r\n    filterOnChange = (e: ChangeEvent) => {\r\n        e.preventDefault();\r\n        const { filter } = this.state;\r\n        Filter.setFieldsFilterValueFromInput(filter, e.target);\r\n        this.setState({ filter: filter });\r\n    }\r\n    setExactSearch = (exacts: boolean) => {\r\n        const { filter } = this.state;\r\n        filter.exacts = exacts;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const { filter } = this.state;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = DEFAULT_LIMIT;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const { filter } = this.state;\r\n        Filter.setOrderPropertyFromDataSet(filter, e.target.dataset);\r\n        this.setState({ filter: filter }, () => { this.loadItems(0) });\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true }, this.scrollTop);\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const { filter } = this.state;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const { filter } = this.state;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    printRecord = () => this.props.printRecord(this.state.filter)\r\n    hideForm = (e) => this.setState({ showForm: false })\r\n\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner />\r\n        }\r\n        const entityProp    = this.entityProperty;\r\n        const headerProps   = this.headerProps;\r\n        const exactsSearch  = this.state.filter.exacts == true;\r\n        const items         = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n\r\n        if (!headerProps || !items) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return (\r\n                <MasterDataForm\r\n                    recordToEdit={this.recordToEdit}\r\n                    entityProperty={entityProp}\r\n                    recordSavedCallback={this.loadItems}\r\n                    onClose={this.hideForm} \r\n                />\r\n            )\r\n        }\r\n        const { filter } = this.state;\r\n        const showAddBtn = entityProp.creatable == true && entityProp.editable == true;\r\n        const activePage: number = (filter.page ?? 0);\r\n        const limit: number = filter.limit ?? DEFAULT_LIMIT;\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <div className=\"btn-group mb-2\">\r\n                    <AnchorButton onClick={this.showCreateForm} iconClassName=\"fas fa-plus\" children=\"Add Record\" show={showAddBtn} />\r\n                    <AnchorButton onClick={this.printRecord} iconClassName=\"fas fa-file\" children=\"Print Record\" />\r\n                </div>\r\n                <form onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div className=\"form-group row\">\r\n                            <LimitOffsetField value={activePage + 1} onChange={this.updateFilterPage} placeholder=\"go to page\" />\r\n                            <LimitOffsetField value={limit} onChange={this.updateFilterLimit} placeholder=\"record per page\" />\r\n\r\n                            <div className=\"col-12\"><p /></div>\r\n                            <div className=\"col-3\">\r\n                                <ToggleButton active={exactsSearch} yesLabel=\"exact\" noLabel=\"not exact\" onClick={this.setExactSearch} />\r\n                            </div>\r\n                            <div className=\"col-3\">\r\n                                <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                            </div>\r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons\r\n                        limit={limit}\r\n                        totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={activePage}\r\n                        onClick={this.loadItems}\r\n                    />\r\n                    <Modal title=\"Data List\">\r\n                        <Loading loading={this.state.loading} />\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader\r\n                                    headerProps={headerProps}\r\n                                    fieldsFilter={filter.fieldsFilter}\r\n                                    orderButtonOnClick={this.orderButtonOnClick}\r\n                                    filterOnChange={this.filterOnChange}\r\n                                />\r\n                                <tbody>\r\n                                    {\r\n                                        items.map((result, i) => {\r\n                                            const number = this.getRecordNumberingOrder(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, entityProp);\r\n                                            return (\r\n                                            <tr key={`trresult-${i}`}>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value =>\r\n                                                    <td key={`tdu-${uniqueId()}`} children={value} />\r\n                                                )}\r\n                                                <td>\r\n                                                    <div className=\"btn-group\">\r\n                                                        <ExternalEditForm record={result} entityProperty={entityProp} />\r\n                                                        <EditDeleteAction\r\n                                                            showEditForm={this.showEditForm}\r\n                                                            entityProperty={entityProp}\r\n                                                            record={result}\r\n                                                            reload={this.loadItems}\r\n                                                        />\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst LimitOffsetField = (props: { value: number, onChange: (val) => any, placeholder: string }) => {\r\n    return (\r\n        <div className=\"col-6\">\r\n            <input\r\n                type=\"number\"\r\n                value={props.value}\r\n                className=\"form-control\"\r\n                placeholder={props.placeholder}\r\n                onChange={(e) => { props.onChange(e.target.value) }}\r\n                min=\"1\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\nconst Loading = (props: { loading: boolean }) => {\r\n    if (props.loading != true) return null;\r\n    return (\r\n        <div\r\n            className=\"w-100 pt-5 bg-light\"\r\n            style={{\r\n                height: '100%',\r\n                opacity: 0.5,\r\n                position: 'absolute',\r\n                zIndex: 100,\r\n            }}>\r\n            <Spinner show={props.loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button onClick={props.onSubmit} className=\"btn btn-light btn-sm border\">\r\n                <i className=\"fas fa-play-circle mr-2\" />\r\n                <span>Apply Filter</span>\r\n            </button>\r\n            <button onClick={props.onReset} type=\"reset\" className=\"btn btn-light btn-sm border\">\r\n                <i className=\"fas fa-sync-alt mr-2\" />\r\n                <span>Reset</span>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\nimport Filter from '../../../models/common/Filter';\r\nimport WebRequest from '../../../models/common/WebRequest';\r\nimport AttachmentInfo from '../../../models/common/AttachmentInfo';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass MasterDataManagement extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    \r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n            this.scrollTop();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading(withProgress: boolean) {\r\n        if (withProgress == true) {\r\n            super.startLoading(withProgress);\r\n        }\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    printRecord = (filter: Filter) => {\r\n        const property = this.state.entityProperty;\r\n        if (!property) return;\r\n        this.showConfirmation(\"Print record? \")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                const req: WebRequest = Object.assign(new WebRequest(), {\r\n                    entity: property.entityName,\r\n                    filter: filter\r\n                });\r\n                this.commonAjaxWithProgress(\r\n                    this.masterDataService.generateReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    req);\r\n            })\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Save File \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.dataUrl,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return (\r\n                <div className=\" container-fluid section-body\" style={{ paddingTop: '20px' }}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4 text-right\">\r\n                            <div className=\"spinner-border\" role=\"status\" />\r\n                        </div>\r\n                        <div className=\"col-8\"><h4>Loading configuration</h4>\r\n                        </div>\r\n                    </div>\r\n                </div>)\r\n        }\r\n        const title:string = this.state.entityProperty.alias;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>{title}</h2>\r\n                <hr/>\r\n                <MasterDataList\r\n                    printRecord={this.printRecord}\r\n                    entityProperty={this.state.entityProperty}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from './../../BasePage';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport Menu from '../../../models/common/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement'; \r\nimport Spinner from './../../loader/Spinner';\r\nimport { resolve } from 'inversify-react';\r\n\r\ninterface IState {\r\n    code: undefined| string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BasePage {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\");\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push(Object.assign(new Menu(),{\r\n                // role:[AuthorityType.ROLE_ADMIN],\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            }));\r\n        }\r\n        console.debug(\"this.props.setSidebarMenus: \", this.props.setSidebarMenus);\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n        this.scrollTop();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement  code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"section-body container-fluid\"><Spinner/></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                {this.titleTag()}\r\n                <div className=\"row\">\r\n                    {properties.map((property) => {\r\n                        return (\r\n                            <div\r\n                                key={\"mngmnt-page-item-\"+property.entityName}\r\n                                className=\"col-md-2 text-center mb-5\"\r\n                            >\r\n                                <h2 >\r\n                                    <Link\r\n                                        className=\"btn btn-warning btn-lg\"\r\n                                        to={\"/management/\" + property.entityName}\r\n                                    >\r\n                                            <i className={property.iconClassName}/>\r\n                                    </Link>\r\n                                </h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","import { resolve } from 'inversify-react';\r\nimport { FormEvent } from 'react';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport BasePage from './../../BasePage';\r\n\r\nexport default abstract class BaseUpdateProfilePage extends BasePage {\r\n    \r\n    @resolve(MasterDataService)\r\n    protected masterDataService: MasterDataService;\r\n    \r\n    constructor(props, title){\r\n        super(props, title);\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        } \r\n        this.showConfirmation(\"Save Data?\")\r\n            .then((ok)=> {\r\n                if (ok) { this.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n\r\n    }\r\n    postRecordSaved = (response: WebResponse) => {\r\n\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record Has Been Saved!\");\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields},()=>{\r\n            this.postRecordSaved(response)\r\n        });\r\n    }\r\n    // render(){\r\n    //     return (<></>)\r\n    // }\r\n}\r\n\r\n","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","import React, { ChangeEvent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nimport { EditField, EditImage } from './settingHelper';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false; \r\n    iconUrl:boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseUpdateProfilePage {\r\n\r\n \r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Profile Aplikasi\");\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then((imageData) => {\r\n            this.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon || applicationProfile.iconUrl) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved, \r\n                this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved,\r\n                this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const { applicationProfile, editFields } = this.state;\r\n\r\n        if (!applicationProfile) {\r\n            return undefined;\r\n        }\r\n        const { backgroundUrl, pageIcon, iconUrl } = applicationProfile;\r\n        \r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon' && key != 'iconUrl') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        if (editFields.iconUrl && iconUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.iconUrl = iconUrl;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n    }\r\n    render()\r\n    {\r\n        const { applicationProfile, editFields } = this.state;\r\n        if (!applicationProfile) {\r\n            return null;\r\n        }\r\n        const { \r\n            backgroundUrl,\r\n            pageIcon, \r\n            iconUrl,\r\n            name,\r\n            welcomingMessage,\r\n            shortDescription,\r\n            about,\r\n            address,\r\n            contact,\r\n            color,\r\n            fontColor } = applicationProfile;\r\n\r\n        const bgUrl = backgroundUrl?.startsWith(\"data:image\") ? backgroundUrl : baseImageUrl() + backgroundUrl;\r\n        const updateProp = this.updateProfileProperty;\r\n\r\n        return (\r\n            <div id=\"ApplicationProfile\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center mb-5\">\r\n                            <img height=\"100\" className=\"border border-primary mb-5\" src={bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={updateProp} name=\"name\" toggleInput={this.toggleInput} value={name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={updateProp} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={updateProp} name=\"shortDescription\" toggleInput={this.toggleInput} value={shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={updateProp} name=\"address\" toggleInput={this.toggleInput} value={address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={updateProp} name=\"about\" toggleInput={this.toggleInput} value={about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={updateProp} name=\"contact\" toggleInput={this.toggleInput} value={contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={updateProp} name=\"color\" toggleInput={this.toggleInput} value={color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={updateProp} name=\"fontColor\" toggleInput={this.toggleInput} value={fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Application Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon?.startsWith(\"data:image\") ? pageIcon : baseImageUrl() + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Logo\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={iconUrl?.startsWith(\"data:image\") ? iconUrl : baseImageUrl() + iconUrl} />\r\n                            <EditImage name=\"iconUrl\" edit={editFields.iconUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport Configuration from '../../../models/Configuration';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup'; \r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from '../../../services/MasterDataService'; \r\nimport Spinner from './../../loader/Spinner';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nclass EditFields {\r\n    cycleTime:boolean = false; leadTime:boolean =false;\r\n    expiredWarningDays:boolean = false;\r\n}\r\nclass IState {\r\n    config?: Configuration = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditInventoryConfiguration extends BaseUpdateProfilePage {\r\n \r\n    actualConfig: Configuration = new Configuration();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Konfigurasi Persediaan\");\r\n    }\r\n    loadConfiguration = () => {\r\n        this.commonAjax(\r\n            this.masterDataService.getByKey,\r\n            this.configLoaded,\r\n            this.showCommonErrorAlert,\r\n            'configuration','code','APP_CONFIG'\r\n        )\r\n    }\r\n    configLoaded = (response:WebResponse) => {\r\n        if (response.entities && response.entities.length>0){\r\n            const config = Object.assign(new Configuration(), response.entities[0]);\r\n            this.actualConfig = Object.assign(new Configuration(), response.entities[0]);\r\n            this.setState({config: config});\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.loadConfiguration();\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n\r\n        config[target.name] = target.value;\r\n        this.setState({ config: config });\r\n    }\r\n \r\n    setProperty = (fieldName: string, value: any) => {\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n        config[fieldName] = value;\r\n        this.setState({ config: config });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const config: Configuration | undefined = this.state.config;\r\n        const actualConfig: Configuration = this.actualConfig;\r\n        if (null == target || !config ) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            config[propertyName] = actualConfig[propertyName];\r\n        }\r\n        this.setState({ config: config, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const config: Configuration | undefined = this.getEditedRecord();\r\n        if (!config) return;\r\n        this.commonAjax(\r\n            this.masterDataService.updateConfiguration,\r\n            this.recordSaved, this.showCommonErrorAlert,\r\n            config\r\n        )\r\n    }\r\n    getEditedRecord = (): Configuration | undefined => {\r\n        const { config, editFields } = this.state;\r\n        if (!config) {\r\n            return undefined;\r\n        }\r\n        const editedApplication: Configuration = new Configuration();\r\n        for (const key in editFields) { \r\n            editedApplication[key] = config[key]; \r\n        }\r\n       \r\n        return editedApplication;\r\n    }\r\n\r\n    render() {\r\n        const { config, editFields } = this.state;\r\n        if (!config) {\r\n            return <div className=\"container-fluid section-body\"><Spinner/></div>;\r\n        }\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                <h2>Inventory Configuration</h2>\r\n                <Card title=\"Inventory Configuration\">\r\n                    <form onSubmit={this.saveRecord}> \r\n                        <FormGroup label=\"Cycle Time\">\r\n                            <EditField type=\"number\" edit={editFields.cycleTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"cycleTime\" toggleInput={this.toggleInput} value={config.cycleTime} />\r\n                        </FormGroup>\r\n                         \r\n                        <FormGroup label=\"Lead Time\">\r\n                            <EditField type=\"number\" edit={editFields.leadTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"leadTime\" toggleInput={this.toggleInput} value={config.leadTime} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Exp Date Warning\">\r\n                            <EditField type=\"number\" edit={editFields.expiredWarningDays} updateProperty={this.updateProfileProperty} \r\n                            name=\"expiredWarningDays\" toggleInput={this.toggleInput} value={config.expiredWarningDays} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(EditInventoryConfiguration))","\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from './../../BasePage';\r\n\r\nclass SettingsMain extends BasePage \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\");\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"container-fluid section-body\">\r\n               {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                   {this.userGreeting()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import BaseEntity from './BaseEntity';\r\n\r\nexport default class User extends BaseEntity{\r\n\tusername?:string;\r\n\tdisplayName?:string;\r\n\tpassword?:string;\r\n\tprofileImage?:string;\r\n\tauthorities?:any[];\r\n\trequestId?:string;\r\n\tprocessingDate?:Date;\r\n\r\n}\r\n","import \"reflect-metadata\"\r\nimport User from './../models/User';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nimport { updateAccessToken } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport { injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport default class UserService {\r\n\r\n    updateProfile = (user: User) => {\r\n\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            user: user\r\n        });\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    requestApplicationId = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            const response = data.rawAxiosResponse;\r\n            updateAccessToken(response);\r\n            console.debug(\"response header:\", response.headers['access-token']);\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            console.error(\"ERROR requestApplicationId: \", e);\r\n            callbackError();\r\n        })\r\n\r\n    }\r\n    requestApplicationIdNoAuth = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPublicPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            callbackError();\r\n            console.error(\"ERROR requestApplicationIdNoAuth: \", e);\r\n            //   alert(\"Error Occured, please reload OR try again\");\r\n        })\r\n\r\n    }\r\n\r\n}","import { resolve } from 'inversify-react';\r\nimport React, { ChangeEvent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport User from './../../../models/User';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport UserService from './../../../services/UserService';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nimport { EditField, EditImage } from './settingHelper';\r\ninterface EditField { username: boolean, displayName: boolean, password: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        password: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseUpdateProfilePage {\r\n    @resolve(UserService)\r\n    private userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Profil Pemgguna\");\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    \r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getEditedRecord();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getEditedRecord = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setLoggedUser(response.user); \r\n    }\r\n\r\n    render() {\r\n        const { user, editFields } = this.state;\r\n        if (!user) {\r\n            return null;\r\n        }\r\n        const { profileImage, username, displayName, password } = user;\r\n        const avatarUrl = profileImage?.startsWith(\"data:image\") ? profileImage : baseImageUrl() + profileImage;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center mb-5\">\r\n                            <img\r\n                                width=\"100\"\r\n                                height=\"100\"\r\n                                className=\"rounded-circle border border-primary mb-5\"\r\n                                src={avatarUrl}\r\n                            />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.password} updateProperty={this.updateProfileProperty} name=\"password\" toggleInput={this.toggleInput} value={password} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","\r\nimport Transaction from './Transaction';\r\nimport BaseEntity from './BaseEntity';\r\nimport Product from './Product';\r\n\r\nexport default class ProductFlow extends BaseEntity {\r\n\t/**\r\n\t * creates new instance of productFlow referencing given productFlow\r\n\t * @param availableProductFlow \r\n\t * @returns\r\n\t */\r\n    static fromReference(availableProductFlow: ProductFlow): ProductFlow {\r\n\t\tconst pf = new ProductFlow();\r\n\t\tpf.referenceProductFlow = Object.assign(new ProductFlow(), availableProductFlow);\r\n\t\tpf.product = pf.referenceProductFlow.product;\r\n\t\treturn pf;\r\n    }\r\n\ttransaction?: Transaction;\r\n\tproduct: Product = new Product();\r\n\texpiredDate: Date = new Date();\r\n\tcount: number = 0;\r\n\tusedCount: number = 0;\r\n\tstock: number = 0;\r\n\tsuitable: boolean = true;\r\n\tprice: number = 0;\r\n\tgeneric: boolean = false;\r\n\treferenceProductFlow?:ProductFlow;\r\n\tstockLocation?:string;\r\n\r\n\treferencingItems:ProductFlow[]|undefined;\r\n\r\n}\r\n","import User from './User';\r\nimport Customer from './Customer';\r\nimport BaseEntity from './BaseEntity';\r\nimport Supplier from './Supplier';\r\nimport HealthCenter from './HealthCenter';\r\nimport ProductFlow from './ProductFlow';\r\nimport Product from './Product';\r\n\r\nexport default class Transaction extends BaseEntity {\r\n\tcode?: string;\r\n\ttransactionDate: Date = new Date();\r\n\tuser?: User;\r\n\ttype?: 'TRANS_IN' | 'TRANS_OUT' | 'TRANS_OUT_TO_WAREHOUSE';\r\n\tsupplier: undefined|Supplier;\r\n\tcustomer: undefined|Customer;\r\n\thealthCenterDestination: undefined|HealthCenter;\r\n\thealthCenterLocation:undefined|HealthCenter;\r\n\tproductFlows: ProductFlow[] = [];\r\n\tdescription?: string;\r\n\r\n\tdestination: 'CUSTOMER' | 'HEALTH_CENTER';\r\n\r\n\t \r\n\tproductFlowCount = () => { return this.productFlows.length }\r\n\taddProductToFlow = (product: Product) => {\r\n\t\tconst productFlow: ProductFlow = new ProductFlow();\r\n\t\tproductFlow.product = product;\r\n\t\tthis.productFlows.push(productFlow);\r\n\t}\r\n\taddProductFlow = (productFlow:ProductFlow) => {\r\n\t\tthis.productFlows.push(productFlow);\r\n\t}\r\n\thasProductFlowReferenceid = (id:number) : boolean => {\r\n\r\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\r\n\t\t\tconst element = this.productFlows[i];\r\n\t\t\tif (element.referenceProductFlow && element.referenceProductFlow.id == id) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tsetProductFlowValue = (index: number, key: string, value: any) => {\r\n\t\ttry {\r\n\t\t\tthis.productFlows[index][key] = value;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n\tremoveProductFlow = (index: number) => {\r\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\r\n\t\t\tconst element = this.productFlows[i];\r\n\t\t\tif (i == index) {\r\n\t\t\t\tthis.productFlows.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import \"reflect-metadata\"\r\nimport User from '../models/User';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport Transaction from './../models/Transaction';\r\nimport { injectable } from 'inversify';\r\n\r\n\r\n@injectable()\r\nexport default class TransactionService {\r\n    \r\n    submitTransactionOUT = (object: Transaction) => {\r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            transaction: object\r\n        });\r\n         \r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionout\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    submitTransactionIN = (object: Transaction) => {\r\n       \r\n        const request: WebRequest = Object.assign(new WebRequest(),{\r\n            transaction: object\r\n        });\r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionin\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    getTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/gettransaction/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    getTransactionRelatedRecord = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/relatedrecord/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    deleteTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/deleterecord/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n\r\n}","import React from 'react'\nimport BaseComponent from './../../../BaseComponent';\nimport AttachmentInfo from './../../../../models/common/AttachmentInfo';\nimport ReportService from './../../../../services/ReportService';\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\nimport { resolve } from 'inversify-react';\nclass IState {\n    loading: boolean = false;\n}\nclass PrintReceipt extends BaseComponent {\n    @resolve(ReportService)\n    private reportService: ReportService;\n    \n    state:IState = new IState();\n    \n    constructor(props) {\n        super(props);\n    }\n    startLoading = () => this.setState({ loading: true });\n    endLoading = () => this.setState({ loading: false });\n    receiptCreated = (attachment: AttachmentInfo) => {\n        this.showConfirmation(\"Save \" + attachment.name + \" ?\")\n            .then((ok) => {\n                if (!ok) return;\n                Object.assign(document.createElement('a'), {\n                    target: '_blank',\n                    download: attachment.name,\n                    style: { display: 'none' },\n                    href: attachment.dataUrl,\n                }).click();\n            })\n\n    }\n    printReceipt = () => {\n\n        this.commonAjaxWithProgress(\n            this.reportService.printTransactionReceipt,\n            this.receiptCreated,\n            this.showCommonErrorAlert,\n            this.props.transactionCode\n        )\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (\n                <AnchorWithIcon className=\"btn btn-dark\">\n                    <span className=\"spinner-border spinner-border-sm\" />\n                    Loading...\n                </AnchorWithIcon>\n            )\n        }\n        return (\n            <AnchorWithIcon\n                onClick={this.printReceipt}\n                show={this.props.transactionCode != undefined}\n                iconClassName=\"fas fa-file\"\n                className=\"btn btn-dark\"\n            >\n                Cetak Struk\n            </AnchorWithIcon>\n        )\n    }\n}\n\nexport default withRouter(connect(\n    mapCommonUserStateToProps,\n)(PrintReceipt))","import { resolve } from 'inversify-react';\r\nimport React, { Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport Product from '../../../../models/Product';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport ReportService from './../../../../services/ReportService';\r\nimport TransactionService from './../../../../services/TransactionService';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport BasePage from './../../../BasePage';\r\nimport Modal from './../../../container/Modal';\r\nimport PrintReceipt from './PrintReceipt';\r\nclass IState {\r\n    transaction?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionDetail extends BasePage {\r\n    @resolve(TransactionService)\r\n    private transactionService: TransactionService;\r\n\r\n    state: IState = new IState();\r\n    \r\n    constructor(props: any) {\r\n        super(props, \"Rincian Transaksi\");\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.validateTransactionFromProps();\r\n        document.title = \"Transaction Detail\";\r\n        \r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ transaction: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transaction: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.loadData();\r\n    }\r\n    loadData = () => {\r\n        console.debug(\" this.state.transactionCode: \", this.state.transactionCode);\r\n        this.commonAjax(\r\n            this.transactionService.getTransactionByCode,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    } \r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record has been successfully deleted\")\r\n        this.loadData();\r\n    }\r\n    recordNotDeleted = (e:any) => {\r\n        console.error(e);\r\n        this.showError(\"Cannot delete transaction \"+this.state.transaction?.code\r\n        +\", please delete all related stock/ product flow data\");\r\n    }\r\n    deleteRecord = (e) => {\r\n        if (!this.state.transaction) return;\r\n        this.showConfirmationDanger(\"Delete Record with code: \"+ this.state.transaction?.code+\"?\").then(ok=>{\r\n            if(!ok) return\r\n            this.commonAjax(\r\n                this.transactionService.deleteTransactionByCode,\r\n                this.recordDeleted,\r\n                this.recordNotDeleted,\r\n                this.state.transaction?.code\r\n            )\r\n        })\r\n    }\r\n   \r\n    validateTransactionFromProps = () => {\r\n        if (this.props.match.params && this.props.match.params.code) {\r\n            const code = this.props.match.params.code;\r\n\r\n            this.commonAjax(\r\n                this.transactionService.getTransactionByCode,\r\n                this.recordLoaded,\r\n                this.recordNotLoaded,\r\n                code\r\n            )\r\n            return;\r\n        }\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionDetail\" className=\"container-fluid section-body\" >\r\n               {this.titleTag()}\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Cari dengan kode\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Daftar Record Transaksi</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Cari\" />\r\n                                </Fragment>\r\n                            }>\r\n                            <FormGroup label=\"Kode\">\r\n                                <input required onChange={this.handleInputChange} value={this.state.transactionCode??\"\"} \r\n                                    name=\"transactionCode\" type=\"text\" placeholder=\"Kode Transaksi\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {this.state.loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={this.state.dataNotFound == true} >Transaksi tidak ditemukan</SimpleError>\r\n                                <TransactionData show={this.state.transaction != undefined} transaction={this.state.transaction} />\r\n                                \r\n                                <div className=\"btn-group\">\r\n                                <AnchorWithIcon\r\n                                    show={this.state.transaction != undefined}\r\n                                    onClick={this.deleteRecord} \r\n                                    iconClassName=\"fas fa-times\"\r\n                                    className=\"btn btn-danger\"\r\n                                >\r\n                                    Hapus Transaksi\r\n                                </AnchorWithIcon> \r\n                                <PrintReceipt transactionCode={this.state.transaction?.code} />\r\n                                </div> \r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows : [];\r\n    const isTransOut = transaction.type  == 'TRANS_OUT';\r\n    const date = new Date(transaction.transactionDate ?? new Date()).toLocaleString(\"ID\");\r\n    // total\r\n    const prices = productFlows.map((item) => item.price * item.count);\r\n    const totalPrices = prices.reduce((prev, next) => prev + next, 0);\r\n    const qtys = productFlows.map((item) => parseInt(item.count.toString() ?? 0));\r\n    const totalQty = qtys.reduce((prev, next) => prev + next, 0);\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Id Record\" orientation='horizontal' children={transaction.id}/>\r\n                    <FormGroup label=\"Kode\" orientation='horizontal' children={transaction.code}/>\r\n                    <FormGroup label=\"Tipe\" orientation='horizontal' children={transaction.type}/>\r\n                    <FormGroup label=\"Tanggal\" orientation='horizontal' children={date}/>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <Fragment>\r\n                        <FormGroup\r\n                            show={transaction.type == 'TRANS_OUT'} \r\n                            label=\"Pelanggan\" orientation='horizontal' \r\n                            children={transaction.customer?.name}\r\n                        />\r\n                        <FormGroup\r\n                            show={transaction.type == 'TRANS_OUT_TO_WAREHOUSE'} \r\n                            label=\"Puskesmas\"\r\n                            orientation='horizontal'\r\n                            children={transaction.healthCenterDestination?.name} \r\n                        />\r\n                        <FormGroup\r\n                            show={transaction.type == 'TRANS_IN'} \r\n                            label=\"Pemasok\"\r\n                            orientation='horizontal'\r\n                            children={transaction.supplier?.name}\r\n                        />\r\n                    </Fragment>\r\n                    <FormGroup \r\n                        label=\"User\"\r\n                        orientation='horizontal'\r\n                        children={transaction.user?.displayName}\r\n                    />\r\n\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"alert alert-info\">\r\n                        <h5>Note:</h5>\r\n                        {transaction.description}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\r\n                            \"No\", \r\n                            \"Id Record\", \r\n                            \"Nama\", \r\n                            \"Qty\", \r\n                            \"Unit\",\r\n                            \"Generic\",\r\n                            \"Kadaluarsa\", \r\n                            \"Harga @Unit\", \r\n                            \"Total Harga\", \r\n                            isTransOut ? \"Id Stok\" : \"Used Qty\"\r\n                        )} \r\n                        <tbody>\r\n                            {productFlows.map((pf, i) => {\r\n                                const product = pf.product ?? new Product();\r\n                                const price = pf.price;\r\n                                return (\r\n                                    <tr key={`pf-tr-${i}`}>\r\n                                        <td>{i + 1}</td>\r\n                                        <td>{pf.id}</td>\r\n                                        <td>{product.name} ({product.code})</td>\r\n                                        <td>{beautifyNominal(pf.count)}</td>\r\n                                        <td>{product.unit?.name}</td>\r\n                                        <td>{pf.generic ? 'Yes' : 'No'}</td>\r\n                                        <td>{pf.expiredDate?\r\n                                        \r\n                                        new Date(pf.expiredDate).toLocaleDateString(\"ID\"):\"-\"}</td>\r\n                                        <td>{beautifyNominal(price)}</td>\r\n                                        <td>{beautifyNominal((price ?? 0) * (pf.count ?? 0))}</td>\r\n                                        <td>{isTransOut ?\r\n                                            pf.referenceProductFlow ?\r\n                                            pf.referenceProductFlow.id : \"-\" :\r\n                                            beautifyNominal(pf.usedCount)} \r\n                                        </td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                            <tr className=\"text-bolder\">\r\n                                <td colSpan={3}>\r\n                                    {/* Total Qty */}\r\n                                </td>\r\n                                <td>\r\n                                    {beautifyNominal(totalQty)}\r\n                                </td>\r\n                                <td colSpan={4}>\r\n                                    {/* Total Harga */}\r\n                                </td>\r\n                                <td colSpan={2}>\r\n                                    {beautifyNominal(totalPrices)}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    {/* <div className=\"alert alert-info text-left\">\r\n                        <FormGroup label=\"Total unit\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).unit)}</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Total price\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).productFlowPrice)}</p>\r\n                        </FormGroup>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionDetail))","import { resolve } from 'inversify-react';\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport Transaction from './../../../models/Transaction';\r\nimport BasePage from './../../BasePage';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport InputDateTime from './../../form/InputDateTime';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport InventoryService from './../../../services/InventoryService';\r\n\r\nexport default class BaseTransactionPage extends BasePage {\r\n\r\n    @resolve(MasterDataService)\r\n    protected masterDataService: MasterDataService;\r\n    @resolve(InventoryService)\r\n    protected inventoryService: InventoryService;\r\n\r\n    constructor(props, title:string) {\r\n        super(props, title);\r\n    }\r\n\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    removeProductFlow = (index: number) => {\r\n\r\n        this.showConfirmationDanger(\"Delete Product?\").then((ok) => {\r\n            if (!ok) return;\r\n            const transaction: Transaction = this.state.transaction;\r\n            transaction.removeProductFlow(index);\r\n            this.setTransaction(transaction);\r\n        });\r\n    }\r\n    removeAll = () => {\r\n        this.showConfirmationDanger(\"Remove All?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                const transaction: Transaction = this.state.transaction;\r\n                transaction.productFlows = [];\r\n                this.setTransaction(transaction);\r\n            })\r\n    }\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.validateTransactionFromProps(); \r\n        this.didMountCallback();\r\n    }\r\n    didMountCallback = () => {\r\n\r\n    }\r\n    updateTransactionGeneralField = (e: any) => {\r\n        const name = e.target.name;\r\n        let value;\r\n        if (e.target.type == 'date') {\r\n            value = new Date(e.target.value);\r\n        } else {\r\n            value = e.target.value;\r\n        }\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction[name] = value;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateProductFlow = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement = e.target as HTMLInputElement;\r\n        const index: string | undefined = target.dataset['index'];\r\n        let value: any = target.value;\r\n\r\n        if (!index) return;\r\n\r\n        const transaction: Transaction = this.state.transaction;\r\n        if (target.type == \"date\") {\r\n            value = new Date(value);\r\n        } else if (target.type == 'checkbox') {\r\n            value = target.checked == true;\r\n        }\r\n        transaction.setProductFlowValue(parseInt(index), target.name, value);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateTransactionDate = (date:Date) => {\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction.transactionDate = date;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    buttonSubmitTransaction = (transaction: Transaction) => {\r\n        const transactionDate : Date = transaction.transactionDate ?? new Date();\r\n        return (\r\n            <Fragment>\r\n                <FormGroup label=\"Tanggal\">\r\n                    {transactionDate.toLocaleDateString(\"ID\")} - {transactionDate.toLocaleTimeString()}\r\n                    <InputDateTime onChange={this.updateTransactionDate} value={transactionDate??new Date()} />\r\n                </FormGroup>\r\n                <FormGroup label=\"Catatan\">\r\n                    <textarea value={transaction.description??\"\"} name=\"description\"\r\n                        onChange={this.updateTransactionGeneralField}\r\n                        className=\"form-control\" />\r\n                </FormGroup>\r\n                <input type=\"submit\" className=\"btn btn-success\" />\r\n            </Fragment>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport Product from \"../../../../models/Product\";\r\nimport ProductFlow from \"../../../../models/ProductFlow\";\r\nimport Transaction from \"../../../../models/Transaction\";\r\nimport FormGroup from \"../../../form/FormGroup\"; \r\nimport { ChangeEvent } from 'react';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport Modal from '../../../container/Modal';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\n\r\nexport const HealthCenterForm = (props: {\r\n    value:undefined|HealthCenter,\r\n    healthCenters:HealthCenter[],\r\n    setHealthCenter(e:any):void\r\n}) => {\r\n    return (\r\n    <form>\r\n         <Modal toggleable={true} title=\"Health Center Destination\">\r\n            <FormGroup label=\"Health Center List\">\r\n                <select value={props.value?.id??-1} className=\"form-control\" onChange={props.setHealthCenter}>\r\n                    {props.healthCenters.map((iem, i)=>{\r\n                        return <option value={iem.id ?? 0} key={`hc-frm-${i}`}>{iem.name}</option>\r\n                    })}\r\n                </select>\r\n            </FormGroup>\r\n         </Modal>\r\n    </form>)\r\n}\r\n\r\nexport const DestinationInfo  = (props:{transaction:Transaction}) => {\r\n    const { destination, healthCenterDestination, customer } = props.transaction;;\r\n    return (\r\n        <FormGroup >\r\n            {destination== \"HEALTH_CENTER\"?  healthCenterDestination?.name ?? <i className=\"text-danger\">Tidak ada puskesmas tujuan</i>:null}\r\n            {destination== \"CUSTOMER\" ? customer?.name ?? <span className=\"text-danger\"><i className=\"fas fa-exclamation-circle\"/> Tidak ada pelanggan</span>:null}\r\n        </FormGroup>\r\n    )\r\n}\r\nexport const ProductFlowItemInput = (props: { productFlow: ProductFlow, updateProductFlow(e: ChangeEvent): void, index: number, remove(index: number): void }) => {\r\n    const { productFlow, index } = props;\r\n    const { product, referenceProductFlow, count} = productFlow;\r\n    return (\r\n    <tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        \r\n        <td>{referenceProductFlow?.stock}</td>\r\n        <td>\r\n            <input\r\n                required\r\n                min={1}\r\n                max={referenceProductFlow?.stock ?? 1}\r\n                type=\"number\"\r\n                className=\"form-control\"\r\n                name=\"count\"\r\n                data-index={index}\r\n                onChange={props.updateProductFlow}\r\n                value={count}\r\n            />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{referenceProductFlow?.generic ? \"Yes\" : \"No\"} </td>\r\n        <td>\r\n            {new Date(referenceProductFlow?.expiredDate ?? new Date()).toLocaleDateString(\"ID\")}\r\n        </td>\r\n        <td>\r\n            <AnchorButton\r\n                iconClassName=\"fas fa-times\"\r\n                className=\"btn btn-danger\"\r\n                onClick={(e) => props.remove(index)}\r\n            />\r\n        </td>\r\n    </tr>\r\n    );\r\n}","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Customer from '../../../../models/Customer';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport { resolve } from 'inversify-react';\r\ninterface IState {\r\n    customer?: Customer;\r\n    recordNotFound: boolean;\r\n    recordList?:Customer[];\r\n    loading: boolean;\r\n    customerName: string\r\n}\r\nclass CustomerFormV2 extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    state: IState = {\r\n        recordNotFound: false, loading: false, customerName: \"\"\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value }, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchRecord = (e) => {\r\n        e.preventDefault();\r\n        e.preventDefault();\r\n        const code: string = this.state.customerName;\r\n        if (code.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Pelanggan tidak ditemukan\");\r\n        }\r\n        \r\n        this.setState({ recordList: response.entities , recordNotFound: false });\r\n    }\r\n    setCustomer = (customer:Customer) => {\r\n        this.setState({customer:customer, customerName: customer.name, recordList:undefined});\r\n        if (this.props.setCustomer) {\r\n            this.props.setCustomer(customer);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true });\r\n    }\r\n    loadRecords = ( ) => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(this.masterDataService.getRecordsByKeyLike,\r\n            this.recordsLoaded, this.recordsNotFound, 'customer', 'name', this.state.customerName);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ customerName: \"\" })\r\n    }\r\n    render() {\r\n        const { loading, customer, recordNotFound } = this.state;\r\n        const recordList:Customer[] = this.state.recordList??[];\r\n        return (\r\n\r\n            <form onSubmit={this.searchRecord} >\r\n                <Modal toggleable={true} title=\"Pilih Pelanggan\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon\r\n                            iconClassName=\"fas fa-list\"\r\n                            attributes={{ target: '_blank' }}\r\n                            to=\"/management/customer\"\r\n                            className=\"btn btn-outline-secondary\"\r\n                        />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cari\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\">\r\n                            <input\r\n                                placeholder=\"Nama\"\r\n                                value={this.state.customerName}\r\n                                onChange={this.updateField}\r\n                                required\r\n                                className=\"form-control\"\r\n                                name=\"customerName\"\r\n                            />\r\n                            {recordList.length > 0?<div style={{position:'absolute', zIndex: 200}} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p=>{\r\n                                    return (\r\n                                        <div \r\n                                            className=\"option-item\"\r\n                                            onClick={() => this.setCustomer(p)}\r\n                                            style={{cursor: 'pointer'}}\r\n                                            key={\"CUST-\"+p.id}\r\n                                        >\r\n                                            {p.name}\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times mr-2\"/>close</a>\r\n                            </div>:null}\r\n                        </FormGroup>\r\n                    </div>\r\n                    <CustomerDetail loading={loading} customer={customer} notFound={recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst CustomerDetail = (props: { loading: boolean, customer: undefined|Customer, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Pelanggan tidak ditemukan</div></div>\r\n    }\r\n    if (!props.customer) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih pelanggan</div></div>\r\n    }\r\n    const customer: Customer = props.customer;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{customer.name}</h2>\r\n            <p>{customer.age} tahun</p>\r\n            <address>\r\n                {customer.address}<br />\r\n                {/* <abbr title=\"Contact\">Contact: </abbr>{customer.a} */}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(CustomerFormV2))","import React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Product from '../../../../models/Product';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport Card from '../../../container/Card';\r\nimport { beautifyNominal, greeting } from '../../../../utils/StringUtil';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Customer from '../../../../models/Customer';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport BaseTransactionPage from '../BaseTransactionPage';\r\nimport { ProductFlowItemInput, HealthCenterForm, DestinationInfo } from './transactionOutForms';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\nimport ProductFormV2 from '../ProductFormV2';\r\nimport CustomerFormV2 from './CustomerFormV2';\r\nconst CUSTOMER = \"CUSTOMER\", HEALTH_CENTER = \"HEALTH_CENTER\";\r\n\r\nclass State {\r\n    selectedProduct: Product | undefined = undefined;\r\n    transaction = new Transaction();\r\n    availableProducts: ProductFlow[] | undefined = undefined;\r\n    healthCenters: HealthCenter[] = [];\r\n    loadingProducts = false;\r\n}\r\nclass TransactionOut extends BaseTransactionPage {\r\n\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Distribusi\");\r\n        this.state.transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n    }\r\n\r\n    updateDestination = (e) => {\r\n        const destination = e.target.value;\r\n        const { transaction } = this.state;\r\n\r\n        if (destination == CUSTOMER) {\r\n            transaction.healthCenterDestination = undefined;\r\n        } else if (destination == HEALTH_CENTER) {\r\n            transaction.customer = undefined;\r\n\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n            transaction.healthCenterDestination = this.state.healthCenters[0];\r\n        }\r\n        transaction.destination = destination;\r\n        this.setState({\r\n            selectedProduct: undefined,\r\n            availableProducts: [], transaction: transaction\r\n        });\r\n    }\r\n\r\n    healthCentersLoaded = (response: any | WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            this.setState({ healthCenters: [{ id: -1, name: \"NO DATA, Please Check Master Data\" }] });\r\n            return;\r\n        }\r\n        const { transaction } = this.state;\r\n        if (!transaction.healthCenterLocation) {\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n        }\r\n        this.masterDataService.setHealthCenters(response.entities);\r\n        this.setState({ healthCenters: response.entities, transaction: transaction });\r\n    }\r\n\r\n    loadHealthCenters = (force: boolean = false) => {\r\n        const { transaction } = this.state;\r\n        transaction.healthCenterLocation = undefined;\r\n\r\n        if (!force && this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n\r\n        this.setState({ healthCenters: [], transaction: transaction, availableProduct: [] }, ()=> {\r\n            this.commonAjax(\r\n                this.masterDataService.loadHealthCenters,\r\n                this.healthCentersLoaded, this.showCommonErrorAlert,\r\n            )\r\n        });        \r\n    }\r\n\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product }, this.loadAvailableProducts);\r\n    }\r\n\r\n    availableProductsLoaded = (response: WebResponse) => {\r\n        this.setState({ availableProducts: response.entities, loadingProducts: false });\r\n    }\r\n    availableProductsNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ loadingProducts: false });\r\n    }\r\n    loadAvailableProducts = () => {\r\n        if (!this.state.selectedProduct || !this.state.transaction.healthCenterLocation) {\r\n            console.warn(\"(!this.state.selectedProduct || !this.state.selectedHealthCenter)\");\r\n            return;\r\n        }\r\n        if (this.state.loadingProducts) return;\r\n        this.commonAjax(\r\n            this.inventoryService.getAvailableProducts,\r\n            this.availableProductsLoaded,\r\n            this.availableProductsNotLoaded,\r\n            this.state.selectedProduct.code,\r\n            this.state.transaction.healthCenterLocation\r\n        )\r\n        this.setState({ loadingProducts: true });\r\n    }\r\n    didMountCallback = () => {\r\n        this.loadHealthCenters();\r\n    } \r\n    addToCart = (availableProductFlow: ProductFlow) => {\r\n        const productFlow: ProductFlow = ProductFlow.fromReference(availableProductFlow);\r\n        const { transaction } = this.state;\r\n        transaction.addProductFlow(productFlow);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateSelectedHealthCenter = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (this.state.transaction.destination == HEALTH_CENTER) return;\r\n        this.showConfirmation(\"Ubah Lokasi\").then((ok) => {  if (!ok) return;\r\n            const transaction = new Transaction();\r\n            transaction.healthCenterLocation = healthCenters[0];\r\n            if (healthCenters.length > 0) {\r\n                this.setState({\r\n                    selectedProduct: undefined,\r\n                    availableProducts: [],\r\n                    transaction: transaction\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n    setCustomer = (customer: Customer) => {\r\n        const { transaction } = this.state;\r\n        transaction.customer = customer;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.healthCenterLocation || (!this.state.transaction.customer && !this.state.transaction.healthCenterDestination)) {\r\n            this.showError(\"Silakan lengkapi kolom\");\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Lanjutkan Transaksi?\").then((ok) => { if (!ok) return;\r\n            this.props.history.push({\r\n                pathname: \"/transaction/productout/confirm\",\r\n                state: { transaction: this.state.transaction }\r\n            })\r\n        })\r\n    }\r\n    setHealthCenterDestination = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLSelectElement;\r\n        const selecteds = this.state.healthCenters.filter((h) => { return h.id == parseInt(target.value ?? \"0\") });\r\n        if (selecteds.length == 0) {\r\n            return;\r\n        }\r\n        const { transaction } = this.state;\r\n        transaction.healthCenterDestination = selecteds[0];\r\n        this.setTransaction(transaction);\r\n    }\r\n    render() {\r\n        const availableProducts: ProductFlow[] = this.state.availableProducts ?? [];\r\n        const transaction: Transaction = this.state.transaction;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters;\r\n        if (!transaction.healthCenterLocation || healthCenters.length == 0) {\r\n            return (\r\n                <div className=\"container-fluid section-body\">\r\n                    {this.titleTag()}\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <form onSubmit={(e) => { e.preventDefault() }} className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                    \r\n                    <p />\r\n                    <FormGroup label=\"Lokasi\">\r\n                        <select\r\n                            autoComplete=\"off\"\r\n                            value={transaction.healthCenterLocation?.id ?? 0}\r\n                            onChange={this.updateSelectedHealthCenter}\r\n                            className=\"form-control\"\r\n                        >\r\n                            {healthCenters.map((healthCenter, i) => {\r\n                                return (<option key={\"opt-location-\" + i} value={healthCenter.id??0}>{healthCenter.name}</option>)\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Tujuan\">\r\n                        <select\r\n                            autoComplete=\"off\"\r\n                            value={transaction.destination}\r\n                            onChange={this.updateDestination}\r\n                            className=\"form-control\"\r\n                        >\r\n                            <option value={CUSTOMER} >Pelanggan</option>\r\n                            {\r\n                                transaction.healthCenterLocation?.id == this.getMasterHealthCenter().id &&\r\n                                <option value={HEALTH_CENTER}>Puskesmas</option>\r\n                            }\r\n                        </select>\r\n                    </FormGroup>\r\n                    <DestinationInfo transaction={transaction} />\r\n                    <AnchorButton\r\n                        iconClassName=\"fas fa-sync-alt\"\r\n                        className=\"btn btn-secondary btn-sm\"\r\n                        onClick={(e) => this.loadHealthCenters(true)}\r\n                        children=\"Reload Location\"\r\n                    />\r\n                </form>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductFormV2 setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\">\r\n                        {\r\n                            transaction.destination == CUSTOMER ?\r\n                            <CustomerFormV2 setCustomer={this.setCustomer} /> :\r\n                            <HealthCenterForm\r\n                                value={transaction.healthCenterDestination}\r\n                                setHealthCenter={this.setHealthCenterDestination}\r\n                                healthCenters={this.state.healthCenters}\r\n                            />\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n                <Modal toggleable={true} title={\"Produk tersedia di \" + transaction.healthCenterLocation?.name}>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Jumlah Masuk\", \"Digunakan\", \"Stok\", \"Unit\", \"Generik\", \"Kadaluarsa\", \"Opsi\")}\r\n                        <tbody>\r\n                            {this.state.loadingProducts ?\r\n                                (\r\n                                    <tr>\r\n                                        <td colSpan={9}><Spinner /></td>\r\n                                    </tr>\r\n                                )\r\n                                :\r\n                                availableProducts.length == 0 ? \r\n                                (\r\n                                    <tr>\r\n                                        <td colSpan={9}><SimpleWarning children=\"Tidak ada data\" /></td>\r\n                                    </tr>\r\n                                ):\r\n                                availableProducts.map((productFlow, i) => {\r\n                                    const product: Product = productFlow.product ?? new Product();\r\n                                    const alreadyAdded = transaction.hasProductFlowReferenceid(productFlow.id ?? 0);\r\n                                    return (\r\n                                        <tr key={\"pf-tr-\" + i}>\r\n                                            <td>{i + 1}</td>\r\n                                            <td>{productFlow.id}</td>\r\n                                            <td>{product.name} ({product.code})</td> \r\n                                            <td>{productFlow.count}</td>\r\n                                            <td>{productFlow.usedCount}</td>\r\n                                            <td>{beautifyNominal(productFlow.stock)}</td>\r\n                                            <td>{product.unit?.name}</td>\r\n                                            <td>{productFlow.generic?\"Yes\":\"No\"}</td>\r\n                                            <td>{productFlow.expiredDate ? new Date(productFlow.expiredDate).toLocaleDateString(\"ID\") : \"-\"}</td>\r\n                                            <td>\r\n                                                {alreadyAdded && <i className=\"fas fa-check text-success\" />}\r\n                                                <AnchorButton \r\n                                                    show={alreadyAdded == false}\r\n                                                    onClick={(e) => this.addToCart(productFlow)}\r\n                                                    iconClassName=\"fas fa-plus\"\r\n                                                    className=\"btn btn-dark btn-sm\"\r\n                                                />\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                        </tbody>\r\n                    </table>\r\n                </Modal>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Stok\", \"Qty\", \"Unit\", \"Generk\", \"Kadaluarsa\", \"Opsi\")}\r\n                            <tbody>\r\n                                {transaction.productFlows.map((productFlow, i) => {\r\n                                    return (\r\n                                        <ProductFlowItemInput\r\n                                            updateProductFlow={this.updateProductFlow}\r\n                                            productFlow={productFlow}\r\n                                            key={\"PF_ITEM_\" + i}\r\n                                            index={i}\r\n                                            remove={this.removeProductFlow}\r\n                                        />\r\n                                    )\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={9} >\r\n                                        <AnchorButton\r\n                                            show={transaction.productFlowCount() > 0}\r\n                                            onClick={this.removeAll}\r\n                                            className=\"btn btn-danger\"\r\n                                            iconClassName=\"fas fa-times\"\r\n                                        >\r\n                                            Remove All\r\n                                        </AnchorButton>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {\r\n                            (transaction.customer || transaction.healthCenterDestination) && \r\n                            transaction.productFlowCount() > 0 &&\r\n                            this.buttonSubmitTransaction(transaction)\r\n                        }\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOut))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport Product from '../../../../models/Product';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport BasePage from './../../../BasePage';\r\nimport { resolve } from 'inversify-react';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionOutConfirmation extends BasePage {\r\n    \r\n    @resolve(TransactionService)\r\n    private transactionService: TransactionService;\r\n\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Konfirmasi Transaksi\");\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.validateTransactionFromProps();\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productout\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaction Success\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionOUT,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const transaction: Transaction | undefined = this.state.transaction;\r\n        if (!transaction) return null;\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    Pastikan bahwa data transaksi telah sesuai\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {transaction.code ?\r\n                        <FormGroup label=\"Kode\">\r\n                            {transaction.code}\r\n                        </FormGroup> : null}\r\n                    <FormGroup label=\"Tanggal\">\r\n                        {new Date(transaction.transactionDate).toLocaleString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Lokasi\">\r\n                        {transaction.healthCenterLocation?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Pelanggan\">\r\n                        {transaction.customer?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Puskesmas\">\r\n                        {transaction.healthCenterDestination?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Catatan\"> {transaction.description}  </FormGroup>\r\n                    <Fragment>\r\n                        <AnchorButton\r\n                            style={{marginRight:'5px'}}\r\n                            onClick={this.back}\r\n                            iconClassName=\"fas fa-angle-left\"\r\n                            children=\"Back\"\r\n                        />\r\n                        <AnchorButton\r\n                            show={transaction.code == undefined}\r\n                            onClick={this.confirm}\r\n                            iconClassName=\"fas fa-check\"\r\n                            className=\"btn btn-primary\"\r\n                            children=\"Konfirmasi\"\r\n                        />\r\n                    </Fragment>\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Stok\", \"Qty\", \"Unit\", \"Generik\", \"Kadaluarsa\" )}\r\n                            \r\n                        <tbody>\r\n                            {transaction.productFlows.map((item, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={item} index={i} key={`pf-tr-cnfm-${i}`} />\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const { productFlow, index } = props;\r\n    const { product, referenceProductFlow, expiredDate, count } = productFlow;\r\n    return (\r\n    <tr>\r\n        <td>{index + 1}</td>\r\n        <td>{referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        <td>{referenceProductFlow?.stock} </td>\r\n        <td>{beautifyNominal(count)}</td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{referenceProductFlow?.generic?\"Yes\":\"No\"}</td>\r\n        <td>\r\n            {new Date(expiredDate).toLocaleDateString(\"ID\")}\r\n        </td>\r\n    </tr>\r\n    );\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOutConfirmation))","import { resolve } from 'inversify-react';\r\nimport React, { Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport BasePage from '../../../BasePage';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nclass IState {\r\n    transaction?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionRelatedRecord extends BasePage {\r\n    @resolve(TransactionService)\r\n    private transactionService: TransactionService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Pemetaan Stok Transaksi\");\r\n    }\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.validateTransactionFromProps();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ transaction: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transaction: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.loadData();\r\n    }\r\n    loadData = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.getTransactionRelatedRecord,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (this.props.match.params && this.props.match.params.code) {\r\n            const code = this.props.match.params.code;\r\n\r\n            this.commonAjaxWithProgress(\r\n                this.transactionService.getTransactionRelatedRecord,\r\n                this.recordLoaded,\r\n                this.recordNotLoaded,\r\n                code\r\n            )\r\n            return;\r\n        }\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { loading, transaction, dataNotFound, transactionCode } = this.state;\r\n        return (\r\n            <div id=\"TransactionRelatedRecord\" className=\"container-fluid section-body\" >\r\n                {this.titleTag()}\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Cari dengan kode\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon\r\n                                        iconClassName=\"fas fa-list\"\r\n                                        attributes={{ target: '_blank' }}\r\n                                        to=\"/management/transaction\"\r\n                                        className=\"btn btn-secondary\"\r\n                                    >\r\n                                        Daftar Record Transaksi\r\n                                    </AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Cari\" />\r\n                                </Fragment>\r\n                            }\r\n                        >\r\n                            <FormGroup label=\"Kode\">\r\n                                <input\r\n                                    value={transactionCode ?? \"\"}\r\n                                    required\r\n                                    onChange={this.handleInputChange}\r\n                                    type=\"text\"\r\n                                    name=\"transactionCode\"\r\n                                    placeholder=\"Kode Transaksi\"\r\n                                    className=\"form-control\"\r\n                                />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={dataNotFound == true} >Transaksi tidak ditemukan</SimpleError>\r\n                                <TransactionData show={transaction != undefined} transaction={transaction} />\r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props: { transaction: Transaction | undefined, show: boolean }) => {\r\n    if (props.show == false || !props.transaction) {\r\n        return null;\r\n    }\r\n    const { transaction } = props;\r\n    const { user, type, supplier, customer, healthCenterDestination, description } = transaction;\r\n    const productFlows = transaction.productFlows ? transaction.productFlows : [];\r\n    const date = new Date(transaction.transactionDate ?? new Date()).toLocaleString(\"ID\");\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Id Record\" orientation='horizontal' children={transaction.id} />\r\n                    <FormGroup label=\"Kode\" orientation='horizontal' children={transaction.code} />\r\n                    <FormGroup label=\"Tipe\" orientation='horizontal' children={transaction.type} />\r\n                    <FormGroup label=\"Tanggal\" orientation='horizontal' children={date} />\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <Fragment>\r\n                        <FormGroup\r\n                            show={type == 'TRANS_OUT'}\r\n                            label=\"Pelanggan\"\r\n                            orientation='horizontal'\r\n                            children={customer?.name}\r\n                        />\r\n                        <FormGroup\r\n                            show={type == 'TRANS_OUT_TO_WAREHOUSE'}\r\n                            label=\"Puskesmas\"\r\n                            orientation='horizontal'\r\n                            children={healthCenterDestination?.name}\r\n                        />\r\n                        <FormGroup \r\n                            show={type == 'TRANS_IN'}\r\n                            label=\"Pemasok\"\r\n                            orientation='horizontal'\r\n                            children={supplier?.name}\r\n                        />\r\n                    </Fragment>\r\n                    <FormGroup \r\n                        label=\"User\"\r\n                        orientation='horizontal'\r\n                        children={user?.displayName}\r\n                    />\r\n\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"alert alert-info\">\r\n                        <h5>Note:</h5>\r\n                        {description}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table xtable-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th>\r\n                                <th colSpan={4}>Name</th>\r\n                                <th>Qty</th>\r\n                                <th>Trans. Code</th>\r\n                                <th>Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((item, i) => {\r\n                                const refItemsLv1 = item.referencingItems ?? [];\r\n                                return (\r\n                                <Fragment key={`main-pf-${i}`}>\r\n                                    <tr>\r\n                                        <td children={i + 1} />\r\n                                        <td colSpan={4}>\r\n                                            Item Id: {item.id}\r\n                                            <br/>{item.product?.name} | {item.product?.unit?.name}\r\n                                        </td>\r\n                                        <td>{item.count}</td>\r\n                                        <td>{item.transaction?.code}<br />({item.transaction?.type})</td>\r\n                                        <td>{transactionDateTime(item.transaction)}</td>\r\n                                    </tr>\r\n                                    {\r\n                                        refItemsLv1 &&\r\n                                        (\r\n                                            <tr>\r\n                                                <td />\r\n                                                <td style={{ fontSize: '0.7em' }} colSpan={7} >\r\n                                                    Usage List\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    }\r\n                                    {refItemsLv1.map((rfItemlv1, r) => {\r\n                                        const refItemsLv2 = rfItemlv1.referencingItems ?? [];\r\n                                        return (\r\n                                            <Fragment key={`ref-pf-${r}-${i}`}>\r\n                                                <tr>\r\n                                                    <td /><td children={r + 1} />\r\n                                                    <td colSpan={3}>Item Id: {rfItemlv1.id}</td>\r\n                                                    <td>{rfItemlv1.count}</td>\r\n                                                    <td>{rfItemlv1.transaction?.code}\r\n                                                        <br />({rfItemlv1.transaction?.type})</td>\r\n                                                    <td>{transactionDateTime(rfItemlv1.transaction)}</td>\r\n                                                </tr>\r\n                                                {\r\n                                                    refItemsLv2.length > 0 &&\r\n                                                    (\r\n                                                        <tr>\r\n                                                            <td colSpan={2} />\r\n                                                            <td style={{ fontSize: '0.7em' }}  colSpan={6}>\r\n                                                                Usage List\r\n                                                            </td>\r\n                                                        </tr>\r\n                                                    )\r\n                                                }\r\n                                                {refItemsLv2.map((rfItemlv2, r2) => {\r\n                                                    return (\r\n                                                        <Fragment key={`ref-pf2-${r}-${i}-${r2}`}>\r\n                                                            <tr >\r\n                                                                <td colSpan={2} /><td children={r2 + 1} />\r\n                                                                <td colSpan={2}>Item Id: {rfItemlv2.id}</td>\r\n                                                                <td>{rfItemlv2.count}</td>\r\n                                                                <td>\r\n                                                                    {rfItemlv2.transaction?.code}\r\n                                                                    <br />\r\n                                                                    ({rfItemlv2.transaction?.type})\r\n                                                                </td>\r\n                                                                <td>{transactionDateTime(rfItemlv2.transaction)}</td>\r\n                                                            </tr>\r\n\r\n                                                        </Fragment>\r\n                                                    )\r\n                                                })}\r\n\r\n                                            </Fragment>\r\n                                        )\r\n                                    })}\r\n                                </Fragment>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst transactionDateTime = (transaction?: Transaction) => {\r\n    if (!transaction || !transaction.transactionDate) return null;\r\n    const date: Date = new Date(transaction.transactionDate);\r\n    return date.toLocaleDateString(\"ID\") + \" \" + date.toLocaleTimeString();\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(TransactionRelatedRecord))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Supplier from '../../../../models/Supplier';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport { resolve } from 'inversify-react';\r\ninterface IState {\r\n    recordList?:Supplier[];\r\n    supplier?: Supplier;\r\n    recordNotFound: boolean;\r\n    loading: boolean;\r\n    supplierName: string\r\n}\r\nclass SupplierFormV2 extends BaseComponent {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    state: IState = {\r\n        recordNotFound: false, loading: false, supplierName: ''\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value }, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchRecord = (e) => {\r\n        e.preventDefault();\r\n        const code: string = this.state.supplierName;\r\n        if (code.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        console.debug(\"response: \", response);\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Pemasok tidak ditemukan\");\r\n        }\r\n       \r\n        this.setState({ recordList:response.entities, recordNotFound: false });\r\n    }\r\n    setSupplier = (supplier:Supplier)=> {\r\n        this.setState({ supplierName:supplier.name, supplier: supplier, recordList:undefined, recordNotFound: false });\r\n        if (this.props.setSupplier) {\r\n            this.props.setSupplier(supplier);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true, supplier: undefined, recordList: undefined });\r\n    }\r\n    loadRecords = ( ) => {\r\n        if (this.state.loading || !this.state.supplierName) return;\r\n        this.commonAjax(this.masterDataService.getRecordsByKeyLike,\r\n            this.recordsLoaded, this.recordsNotFound, 'supplier', 'name', this.state.supplierName);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ supplierName: \"\" })\r\n    }\r\n    render() {\r\n        const recordList:Supplier[] = this.state.recordList??[];\r\n        return (\r\n            \r\n            <form onSubmit={this.searchRecord} >\r\n                <Modal toggleable={true} title=\"Pilih Pemasok\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/supplier\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\">\r\n                            <input placeholder=\"Nama Pemasok\" required className=\"form-control\"\r\n                             onChange={this.updateField} value={this.state.supplierName??\"\"} name=\"supplierName\" />\r\n                            {recordList.length > 0?<div style={{position:'absolute', zIndex: 200}} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p=>{\r\n                                    return (\r\n                                        <div className=\"option-item\"onClick={()=>{\r\n                                            this.setSupplier(p);\r\n                                        }} style={{cursor: 'pointer'}} key={\"p-\"+p.code+p.id} >{p.name}</div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times\"/>&nbsp;close</a>\r\n                            </div>:null}\r\n                        </FormGroup>\r\n                    </div>\r\n                    <SupplierDetail loading={this.state.loading} supplier={this.state.supplier} notFound={this.state.recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst SupplierDetail = (props: { loading: boolean, supplier: undefined| Supplier, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Pemasok tidak ditemukan</div></div>\r\n    }\r\n    if (!props.supplier) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih pemasok</div></div>\r\n    }\r\n    const supplier: Supplier = props.supplier;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{supplier.name}</h2>\r\n            <p>Kode: {supplier.code}</p>\r\n            <address>\r\n                {supplier.address}<br />\r\n                <abbr title=\"Contact\">Kontak: </abbr>{supplier.contact}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SupplierFormV2))","\r\n\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport SupplierForm from './SupplierForm';\r\nimport ProductForm from '../ProductForm';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Product from '../../../../models/Product';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Supplier from '../../../../models/Supplier';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { getInputReadableDate } from '../../../../utils/DateUtil';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport BaseTransactionPage from '../BaseTransactionPage';\r\nimport ProductFormV2 from '../ProductFormV2';\r\nimport SupplierFormV2 from './SupplierFormV2';\r\nimport { beautifyNominal } from './../../../../utils/StringUtil';\r\n\r\nclass State {\r\n    transaction: Transaction = new Transaction();\r\n    selectedProduct: Product | undefined = undefined;\r\n}\r\n\r\nclass TransactionIn extends BaseTransactionPage {\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Suplai Pasokan\");\r\n    } \r\n    setSupplier = (supplier: Supplier) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.supplier = supplier;\r\n        this.setTransaction(transaction);\r\n    }\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product });\r\n    }\r\n    addToCart = (product: Product) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.addProductToFlow(product);\r\n        this.setState({ transaction: transaction, selectedProduct: undefined });\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.supplier || this.state.transaction.productFlowCount() == 0) {\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Lanjutkan Transaksi?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.props.history.push({\r\n                    pathname: \"/transaction/productin/confirm\",\r\n                    state: { transaction: this.state.transaction }\r\n                })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { selectedProduct, transaction } = this.state;\r\n        const { productFlows } = transaction;\r\n        \r\n        // total\r\n        const prices = productFlows.map((item) => item.price * item.count);\r\n        const totalPrices = prices.reduce((prev, next) => prev + next, 0);\r\n        const qtys = productFlows.map((item) => parseInt(item.count.toString() ?? 0));\r\n        const totalQty = qtys.reduce((prev, next) => prev + next, 0);\r\n        // console.debug(\"transaction.supplier: \", transaction.supplier);\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {this.userGreeting()}\r\n                    <p />\r\n                    <FormGroup label=\"Lokasi\">\r\n                        <span className=\"form-control\" >{this.getMasterHealthCenter().name} </span>\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductFormV2 setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\"><SupplierFormV2 setSupplier={this.setSupplier} /></div>\r\n                </div>\r\n                <Card title=\"Rincian Produk\">\r\n                    {selectedProduct ?\r\n                        <SelectedProductDetail addToCart={this.addToCart} product={selectedProduct} /> :\r\n                        <i>Tidak ada data</i>\r\n                    }\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Nama\", \"Qty\", \"Unit\", \"Harga @Unit\", \"Harga\", \"Generik\", \"Kadaluarsa\", \"Opsi\")}\r\n                            <tbody>\r\n                                {productFlows.map((productFlow, i) => {\r\n                                    return (\r\n                                        <ProductFlowItemInput\r\n                                            updateProductFlow={this.updateProductFlow}\r\n                                            productFlow={productFlow}\r\n                                            key={\"PF_ITEM_\" + i}\r\n                                            index={i}\r\n                                            remove={this.removeProductFlow}\r\n                                        />\r\n                                    );\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={2} >\r\n                                        <AnchorButton\r\n                                            show={transaction.productFlowCount() > 0}\r\n                                            onClick={this.removeAll}\r\n                                            className=\"btn btn-danger\"\r\n                                            iconClassName=\"fas fa-times\"\r\n                                        >\r\n                                            Remove All\r\n                                        </AnchorButton>\r\n                                    </td>\r\n                                    <td>{beautifyNominal(totalQty)}</td>\r\n                                    <td colSpan={2} />\r\n                                    <td colSpan={2}>\r\n                                        {beautifyNominal(totalPrices)}\r\n                                    </td>\r\n                                    <td colSpan={2}>\r\n                                        {/* BLANK */}\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {\r\n                            transaction.supplier && transaction.productFlowCount() > 0 &&\r\n                            this.buttonSubmitTransaction(transaction)\r\n                        }\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductFlowItemInput = (props: { \r\n    productFlow: ProductFlow,\r\n    updateProductFlow: (e: ChangeEvent) => any,\r\n    index: number,\r\n    remove: (index: number) => any,\r\n}) => {\r\n    const product: Product = props.productFlow.product;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{product.name}</td>\r\n        <td>\r\n            <input \r\n                required \r\n                min={1}\r\n                type=\"number\"\r\n                className=\"form-control\"\r\n                name=\"count\"\r\n                data-index={props.index}\r\n                onChange={props.updateProductFlow}\r\n                value={props.productFlow.count}\r\n            />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>\r\n            <input\r\n                required\r\n                type=\"number\"\r\n                step={0.001}\r\n                className=\"form-control\"\r\n                name=\"price\"\r\n                data-index={props.index}\r\n                onChange={props.updateProductFlow}\r\n                value={props.productFlow.price}\r\n            />\r\n        </td>\r\n        <td>\r\n            {beautifyNominal(props.productFlow.count * props.productFlow.price)}\r\n        </td>\r\n        <td>\r\n            <input\r\n                type=\"checkbox\"\r\n                className=\"form-control\"\r\n                name=\"generic\"\r\n                data-index={props.index}\r\n                onChange={props.updateProductFlow}\r\n                checked={props.productFlow.generic==true}\r\n            />\r\n        </td>\r\n        <td>\r\n            <input\r\n                required\r\n                type=\"date\"\r\n                className=\"form-control\"\r\n                name=\"expiredDate\"\r\n                data-index={props.index}\r\n                onChange={props.updateProductFlow}\r\n                value={getInputReadableDate(props.productFlow.expiredDate ?? new Date())}\r\n            />\r\n        </td>\r\n        <td>\r\n            <AnchorButton\r\n                iconClassName=\"fas fa-times\"\r\n                className=\"btn btn-danger\"\r\n                onClick={(e) => {props.remove(props.index);}} \r\n            />\r\n        </td>\r\n    </tr>)\r\n}\r\n\r\nconst SelectedProductDetail = (props: { product: Product, addToCart(product: Product): void }) => {\r\n    return (\r\n        <div>\r\n            <FormGroup label=\"Nama\">{props.product.name}</FormGroup>\r\n            <FormGroup label=\"Unit\">{props.product.unit?.name}</FormGroup>\r\n            <FormGroup label=\"Alat Kesehatan\">{props.product.utilityTool == true ? \"Yes\" : \"No\"}</FormGroup>\r\n            <FormGroup label=\"Deskripsi\">{props.product.description}</FormGroup>\r\n            <AnchorButton\r\n                className=\"btn btn-dark\"\r\n                iconClassName=\"fas fa-plus\"\r\n                onClick={(e) => props.addToCart(props.product)}\r\n            >\r\n                Add To Cart\r\n            </AnchorButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionIn))","\r\n\r\nimport { resolve } from 'inversify-react';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport BasePage from './../../../BasePage';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionInConfirmation extends BasePage {\r\n    @resolve(TransactionService)\r\n    private transactionService: TransactionService;\r\n    state: State = new State();\r\n\r\n    constructor(props: any) {\r\n        super(props, \"Konfirmasi Transaksi\");\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.scrollTop();\r\n        this.validateTransactionFromProps();\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productin\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaksi Berhasil\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionIN,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const { transaction } = this.state;\r\n        if (!transaction) {\r\n            return null;\r\n        }\r\n        const { productFlows, code, supplier, transactionDate, description } = transaction;\r\n\r\n        // total\r\n        const prices = productFlows.map((item) => item.price * item.count);\r\n        const totalPrices = prices.reduce((prev, next) => prev + next, 0);\r\n        const qtys = productFlows.map((item) => parseInt(item.count.toString() ?? 0));\r\n        const totalQty = qtys.reduce((prev, next) => prev + next, 0);\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    Pastikan bahwa data transaksi telah sesuai\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {   \r\n                        code &&\r\n                        <FormGroup label=\"Kode\">\r\n                            {transaction.code}\r\n                        </FormGroup>\r\n                    }\r\n                    <FormGroup label=\"Tanggal\">\r\n                        {new Date(transactionDate).toString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Pemasok\">\r\n                        {supplier?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Catatan\"> {description}  </FormGroup>\r\n                    <AnchorButton\r\n                        style={{ marginRight: '5px' }}\r\n                        onClick={this.back}\r\n                        iconClassName=\"fas fa-angle-left\"\r\n                        children=\"Kembali\"\r\n                    />\r\n                    <AnchorButton \r\n                        show={code == undefined}\r\n                        onClick={this.confirm}\r\n                        iconClassName=\"fas fa-check\"\r\n                        className=\"btn btn-primary\"\r\n                        children=\"Konfirmasi\"\r\n                    />\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th><th>Nama</th><th>Qty</th><th>Unit</th><th>Generik</th><th>Harga @Unit</th><th>Harga Total</th><th>Kadaluarsa</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((productFlow, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={productFlow} index={i} key={`pf-tr-cnfm-${i}`} />\r\n                                )\r\n                            })}\r\n                            <tr>\r\n                                <td colSpan={2} />\r\n                                <td>{beautifyNominal(totalQty)}</td>\r\n                                <td colSpan={3} />\r\n                                <td colSpan={2}>{beautifyNominal(totalPrices)}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const { productFlow, index } = props;\r\n    const { price, count, product, generic, expiredDate } = productFlow;\r\n    return (\r\n    <tr>\r\n        <td>{index + 1}</td>\r\n        <td>{product.name}</td>\r\n        <td>{beautifyNominal(count)}</td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{generic ? \"Yes\" : \"No\"}</td>\r\n        <td>{beautifyNominal(price)}</td>\r\n        <td>{beautifyNominal(price * count)}</td>\r\n        <td>{expiredDate ? new Date(expiredDate).toLocaleDateString(\"ID\") : \"-\"}</td>\r\n    </tr>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionInConfirmation))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from '../../BasePage';\r\nimport { greeting } from '../../../utils/StringUtil';\r\n\r\n\r\nclass TransactionMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Transaksi\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                {this.titleTag()}\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionMain))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../constant/stores';\r\nimport Menu from '../../models/common/Menu';\r\nimport BaseComponent from '../BaseComponent';\r\nimport DashboardInfo from '../pages/dashboard/DashboardInfo';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport ProductStat from '../pages/dashboard/statistic/ProductStat';\r\nimport ProductStatDetail from '../pages/dashboard/statistic/ProductStatDetail';\r\nimport AboutUs from '../pages/home/AboutUs';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport InventoryMain from '../pages/inventory/InventoryMain';\r\nimport InventoryStatus from '../pages/inventory/InventoryStatus';\r\nimport Report from '../pages/inventory/Report';\r\nimport ProductStocks from '../pages/inventory/stock/ProductStocks';\r\nimport StockFilter from '../pages/inventory/StockFilter';\r\nimport Login from '../pages/login/Login';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport EditInventoryConfiguration from '../pages/settings/EditInventoryConfiguration';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport TransactionDetail from '../pages/transaction/detail/TransactionDetail';\r\nimport TransactionOut from '../pages/transaction/distribution/TransactionOut';\r\nimport TransactionOutConfirmation from '../pages/transaction/distribution/TransactionOutConfirmation';\r\nimport TransactionRelatedRecord from '../pages/transaction/related/TransactionRelatedRecord';\r\nimport TransactionIn from '../pages/transaction/supply/TransactionIn';\r\nimport TransactionInConfirmation from '../pages/transaction/supply/TransactionInConfirmation';\r\nimport TransactionMain from '../pages/transaction/TransactionMain';\r\n\r\nclass Routing extends BaseComponent {\r\n\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        const isLoggedIn    = this.isUserLoggedIn();\r\n        const redirect      = <Redirect to=\"/\"/>;\r\n        return (\r\n            <Fragment>\r\n                <Switch>\r\n                    <Route exact path=\"/login\" render={() => <Login />} />\r\n\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={() => <HomeMain />} />\r\n                    <Route exact path=\"/\" render={() => <HomeMain />} />\r\n                    <Route exact path=\"/about\" render={() => <AboutUs />} />\r\n\r\n\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route\r\n                        exact\r\n                        path=\"/management\"\r\n                        render={\r\n                            (props: any) =>\r\n                                isLoggedIn ?\r\n                                <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                                : redirect\r\n                        }\r\n                    />\r\n                    <Route \r\n                        exact\r\n                        path=\"/management/:code\" \r\n                        render={\r\n                            (props: any) =>\r\n                                isLoggedIn ?\r\n                                <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                                : redirect\r\n                        }\r\n                    />\r\n                </Switch>\r\n                <Dashboard      loggedIn={isLoggedIn} redirect={redirect} />\r\n                <Setting        loggedIn={isLoggedIn} redirect={redirect} />\r\n                <Transaction    loggedIn={isLoggedIn} redirect={redirect} />\r\n                <Inventory      loggedIn={isLoggedIn} redirect={redirect} />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\ntype RoutingProps = {\r\n    loggedIn: boolean,\r\n    redirect: any,\r\n}\r\n\r\nconst Dashboard = (props: RoutingProps) => {\r\n    const { loggedIn, redirect } = props;\r\n    return (\r\n\r\n        <Switch>\r\n            <Route\r\n                exact\r\n                path=\"/dashboard\"\r\n                render={(props: any) => loggedIn ? <DashboardMain /> : redirect}\r\n            />\r\n            <Route\r\n                exact\r\n                path=\"/dashboard/info\"\r\n                render={(props: any) => loggedIn ? <DashboardMain /> : redirect} \r\n            />\r\n            <Route\r\n                exact\r\n                path=\"/dashboard/productstat\"\r\n                render={(props: any) =>  loggedIn ? <ProductStat /> : redirect}\r\n            />\r\n            <Route\r\n                exact\r\n                path=\"/dashboard/productstatdetail\"\r\n                render={(props: any) => loggedIn ? <ProductStatDetail /> : redirect}\r\n            />\r\n        </Switch>\r\n    )\r\n}\r\nconst Setting = (props: RoutingProps) => {\r\n    const { loggedIn, redirect } = props;\r\n    return <Switch>\r\n        {/* -------- settings --------- */}\r\n        <Route\r\n            exact\r\n            path=\"/settings\"\r\n            render={(props: any) => loggedIn ? <SettingsMain /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/settings/user-profile\"\r\n            render={(props: any) => loggedIn ? <UserProfile /> : redirect} \r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/settings/app-profile\"\r\n            render={(props: any) => loggedIn ? <EditApplicationProfile /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/settings/inventory-config\"\r\n            render={(props: any) => loggedIn ? <EditInventoryConfiguration /> : redirect}\r\n        />\r\n    </Switch>\r\n}\r\nconst Transaction = (props: RoutingProps) => {\r\n    const { loggedIn, redirect } = props;\r\n    return <Switch>\r\n        {/*TRANSACTION*/}\r\n        <Route\r\n            exact\r\n            path=\"/transaction\"\r\n            render={(props: any) => loggedIn ? <TransactionMain /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/productin\"\r\n            render={(props: any) => loggedIn ? <TransactionIn /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/productin/confirm\"\r\n            render={(props: any) => loggedIn ? <TransactionInConfirmation /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/productout\"\r\n            render={(props: any) => loggedIn ? <TransactionOut /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/productout/confirm\"\r\n            render={(props: any) => loggedIn ? <TransactionOutConfirmation /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/detail\"\r\n            render={(props: any) => loggedIn ? <TransactionDetail /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/detail/:code\" \r\n            render={(props: any) => loggedIn ? <TransactionDetail /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/relatedrecord\" \r\n            render={(props: any) => loggedIn ? <TransactionRelatedRecord /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/transaction/relatedrecord/:code\"\r\n            render={(props: any) => loggedIn ? <TransactionRelatedRecord /> : redirect}\r\n        />\r\n    </Switch>\r\n}\r\nconst Inventory = (props: RoutingProps) => {\r\n    const { loggedIn, redirect } = props;\r\n    return <Switch>\r\n        {/*INVENTORY*/}\r\n        <Route\r\n            exact\r\n            path=\"/inventory\"\r\n            render={(props: any) => loggedIn ? <InventoryMain /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/inventory/stock\"\r\n            render={(props: any) => loggedIn ? <ProductStocks /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/inventory/status\"\r\n            render={(props: any) => loggedIn ? <InventoryStatus /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/inventory/stockfilter\"\r\n            render={(props: any) => loggedIn ? <StockFilter /> : redirect}\r\n        />\r\n        <Route\r\n            exact\r\n            path=\"/inventory/report\"\r\n            render={(props: any) => loggedIn ? <Report /> : redirect}\r\n        />\r\n    </Switch>\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Routing))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from '../../models/common/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n\r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                <li>\r\n                    <div className=\"sidebar-item-separator\" />\r\n                </li>\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li className={`sidebar-item ${ menuClassName}`} key={`SIDEBAR_${menu.code}`}>\r\n                            <Link to={`${parentMenu.url}/${menu.url}`}>\r\n                                <span className=\"sidebar-icon\">\r\n                                    <i className={Menu.getIconClassName(menu)} />\r\n                                </span>\r\n                                <span className={'menu-label'} >{menu.name}</span>\r\n                            </Link>\r\n                        </li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) {\r\n        return null;\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <li id=\"sidebar-brand\" className=\"sidebar-brand mb-5\">\r\n                <div className=\"text-center py-5\">\r\n                    <h3 className=\"text-dark\">\r\n                        <i className={Menu.getIconClassName(props.brand)}></i>\r\n                    </h3>\r\n                    <Link to={props.brand.url} style={{ textDecoration: 'none' }}>\r\n                        <h4 className=\"text-dark pb-5\">{props.brand.name}</h4>\r\n                    </Link>\r\n                </div>\r\n            </li>\r\n            <li className={\"sidebar-item-brand \"} >\r\n                <Link to={props.brand.url}>\r\n                    <span className=\"sidebar-icon\">\r\n                        <i className={Menu.getIconClassName(props.brand)} />\r\n                    </span>\r\n                </Link>\r\n            </li>\r\n        </Fragment>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './Routing';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from '../../models/common/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu:undefined| Menu;\r\n    sidebarMenus:undefined| Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n            <div id=\"main-layout\">\r\n                <Header\r\n                    setMenuNull={this.setMenuNull}\r\n                    activeMenuCode={this.state.activeMenuCode}\r\n                    setMenu={this.setMenu}\r\n                />\r\n                <div\r\n                    id=\"page-content\"\r\n                    className=\"container-fluid\"\r\n                >\r\n                    <div\r\n                        className=\"container-fluid\"\r\n                        style={{zIndex:  1 , position:'absolute',paddingTop: '55px'}}\r\n                        id={showSidebar ? \"app-content\" : \"content\"}\r\n                    >\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus}  />\r\n                    </div>\r\n                    {\r\n                        showSidebar && \r\n                        <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","import React, { Component } from 'react';\r\nimport './Loader.css';\r\n\r\ntype Props = {\r\n    progress: number;\r\n    realtime: boolean,\r\n    withTimer?: boolean,\r\n    type: string,\r\n    endMessage?: () => any,\r\n}\r\ntype State ={\r\n    timer: number,\r\n}\r\nclass Loader extends Component<Props, State> {\r\n    private intervalId: any;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n        }\r\n    }\r\n    update = () => {\r\n        if (this.state.timer < 0) {\r\n            clearInterval(this.intervalId);\r\n        }\r\n        console.log(\"tick\")\r\n        this.setState({ timer: this.state.timer - 1 })\r\n        if (this.state.timer < 0 && this.props.endMessage) {\r\n            this.props.endMessage();\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer === true) {\r\n            this.intervalId = setInterval(this.update, 1, null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const className = \"custom-loading custom-loading-\" + this.props.type;\r\n        const { realtime, progress } = this.props;\r\n        if (realtime) {\r\n            return <LoaderContent progress={progress} realtime={realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={progress} realtime={realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst LoaderContent = (props: { realtime: boolean, progress: number }) => {\r\n\r\n    if (props.realtime) {\r\n        const { progress } = props;\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span\r\n                    className=\"spinner-border spinner-border-sm mb-2 mr-2\"\r\n                    role=\"status\"\r\n                />\r\n                <span>{progress}%</span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div \r\n                        className=\"bg-primary\" \r\n                        style={{\r\n                            width: `${props.progress}%`,\r\n                            transitionDuration: '50ms',\r\n                            margin: 0,\r\n                        }}\r\n                    >\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark\" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" />\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component, Fragment, RefObject } from \"react\";\nimport SockJsClient from 'react-stomp';\nimport Loader from \"./component/loader/Loader\";\nimport WebResponse from \"./models/common/WebResponse\";\nimport { doItLater } from \"./utils/EventUtil\";\nimport * as url from './constant/Url';\nimport { resolve } from \"inversify-react\";\nimport LoadingService from './services/LoadingService';\n\ntype State = {\n    show: boolean,\n    withRealtimeProgress: boolean,\n    loadingPercentage: number,\n}\n\ntype Props = {\n    id: string;\n}\n\nexport default class LoadingContainer extends Component<Props, State> {\n\n    @resolve(LoadingService)\n    private service: LoadingService;\n\n    private loadings: number = 0;\n    private sockJsClient: RefObject<SockJsClient> = React.createRef();\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: false,\n            withRealtimeProgress: false,\n            loadingPercentage: 0,\n        };\n    }\n\n    componentDidMount() {\n        this.service.setContainer(this);\n    }\n\n    get websocketTopic() { return `/wsResp/progress/${this.props.id}`; }\n\n    private incrementLoadings() {\n        this.loadings++;\n    }\n\n    private decrementLoadings() {\n        this.loadings--;\n        if (this.loadings < 0) {\n            this.loadings = 0;\n        }\n    }\n\n    stop = () => {\n        try {\n            this.decrementLoadings();\n            if (this.loadings == 0) {\n                if (this.state.withRealtimeProgress) {\n                    this.setState({ loadingPercentage: 100 }, this.smoothEndLoading);\n                } else {\n                    this.setState({ show: false, loadingPercentage: 0 });\n                }\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    smoothEndLoading = () => {\n        doItLater(() => {\n            this.setState({ show: false, loadingPercentage: 0 });\n        }, 100);\n    }\n\n    private handleOnWebsocketMessage = (msg: WebResponse) => {\n        const percentageFloat: number = msg.percentage ?? 0;\n        const percentage = Math.floor(percentageFloat);\n        \n        if (percentageFloat < 0 || percentageFloat > 100) {\n            this.stop();\n        }\n        this.setState({ loadingPercentage: percentage });\n    }\n\n    start = (realtimeProgress: boolean) => {\n      this.setState({ show: true, withRealtimeProgress: realtimeProgress }, this.incrementLoadings);\n    }  \n\n    render(): React.ReactNode {\n        const usedHost = url.contextPath();\n\n        return (\n            <Fragment>\n                <SockJsClient\n                    url={usedHost + 'realtime-app'}\n                    topics={[this.websocketTopic]}\n                    onMessage={this.handleOnWebsocketMessage}\n                    ref={(client) => { this.sockJsClient = client }}\n                />\n                {\n                    this.state.show &&\n                    <Loader\n                        realtime={this.state.withRealtimeProgress}\n                        progress={this.state.loadingPercentage}\n                        type=\"loading\"\n                    />\n                }\n            </Fragment>\n        )\n    }\n}\n","\nimport { resolve } from 'inversify-react';\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport './App.css';\nimport DialogContainer from './component/dialog/DialogContainer';\nimport MainLayout from './component/layout/MainLayout';\nimport Spinner from './component/loader/Spinner';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport * as url from './constant/Url';\nimport LoadingContainer from './LoadingContainer';\nimport ApplicationProfile from './models/ApplicationProfile';\nimport WebResponse from './models/common/WebResponse';\nimport * as actions from './redux/actionCreators';\nimport UserService from './services/UserService';\n\nclass IState {\n  errorRequestAppId = false;\n  requestId?: undefined;\n  appIdStatus = \"Loading App Id\";\n}\nclass App extends Component<any, IState> {\n\n  @resolve(UserService)\n  private userService: UserService;\n\n  constructor(props: any) {\n    super(props);\n    this.state = new IState();\n    this.props.setMainApp(this);\n\n  }\n  refresh() {\n    this.forceUpdate();\n  }\n\n  requestAppId = () => {\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application\" });\n    this.userService.requestApplicationId((response) => {\n      this.props.setRequestId(response, this);\n      this.refresh();\n    }, this.retryRequestAppId)\n\n  }\n  retryRequestAppId = () => {\n    // console.debug(\"RETRYING\");\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application (Retrying)\" });\n    this.userService.requestApplicationIdNoAuth((response) => {\n      this.props.setRequestId(response, this);\n    }, this.errorRequestingAppId)\n\n  }\n\n  errorRequestingAppId = () => {\n    this.setState({ errorRequestAppId: true });\n  }\n  \n  componentDidUpdate() {\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n    this.requestAppId();\n  }\n\n  render() {\n\n    if (!this.props.requestId) {\n\n      return (\n        <div className=\"text-center\" style={{ paddingTop: '10%' }}>\n          <h2>{this.state.appIdStatus}</h2>\n          {\n            this.state.errorRequestAppId ?\n            (\n              <a className=\"btn btn-outline-dark\" onClick={this.retryRequestAppId} >\n                <i className=\"fas fa-redo\" />\n              </a>\n            ) : <Spinner />\n          }\n        </div>\n      )\n    }\n    return (\n      <Fragment>\n        <LoadingContainer id={this.props.requestId} />\n        <DialogContainer />\n        <MainLayout />\n      </Fragment>\n    )\n  }\n}\n\nfunction updateFavicon(profile: ApplicationProfile) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') || document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl() + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app)),\n  setRequestId: (response: WebResponse, app: App) => dispatch(actions.setRequestId(response, app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import { Container } from 'inversify'\nimport 'reflect-metadata'\nimport InventoryService from './services/InventoryService';\nimport MasterDataService from './services/MasterDataService';\nimport ReportService from './services/ReportService';\nimport TransactionService from './services/TransactionService';\nimport UserService from './services/UserService';\nimport DialogService from './services/DialogService';\nimport LoadingService from './services/LoadingService';\n\nlet container:Container = new Container();\n\ncontainer.bind(InventoryService).toSelf().inSingletonScope();\ncontainer.bind(MasterDataService).toSelf().inSingletonScope();\ncontainer.bind(ReportService).toSelf().inSingletonScope();\ncontainer.bind(TransactionService).toSelf().inSingletonScope();\ncontainer.bind(UserService).toSelf().inSingletonScope();\ncontainer.bind(DialogService).toSelf().inSingletonScope();\ncontainer.bind(LoadingService).toSelf().inSingletonScope();\n\nexport {container}\n","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter, BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { Provider as InversifyProvider } from 'inversify-react';\r\nimport { container } from './inversify.config';\r\n\r\nconst Root = (props: any) => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <InversifyProvider container={container} >\r\n                {/* <BrowserRouter basename=\"/medicalinventory\">\r\n                <App/>\r\n            </BrowserRouter> */}\r\n                <HashRouter>\r\n                    <App />\r\n                </HashRouter>\r\n            </InversifyProvider>\r\n        </Provider>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(:undefined|\\.(:undefined|25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}