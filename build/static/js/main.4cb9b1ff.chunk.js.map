{"version":3,"sources":["redux/appReducer.ts","redux/types.js","constant/Menus.ts","models/BaseEntity.ts","models/HealthCenter.ts","models/ApplicationProfile.ts","redux/userReducer.js","models/AttachmentInfo.ts","services/Promises.ts","services/UserService.ts","services/MasterDataService.ts","services/TransactionService.ts","services/InventoryService.ts","services/ReportService.ts","redux/servicesReducer.ts","services/Services.ts","redux/reducers.ts","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","redux/actionCreators.ts","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","utils/StringUtil.ts","utils/ComponentUtil.ts","models/FieldType.ts","component/BaseComponent.tsx","component/navigation/Header.tsx","component/loader/Spinner.tsx","component/pages/login/Login.tsx","component/layout/BaseMainMenus.tsx","component/pages/dashboard/main/DashboardMain.tsx","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/Filter.ts","models/settings/EntityProperty.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","component/pages/masterdata/form/fields/BaseField.tsx","component/pages/masterdata/form/fields/FormInputImage.tsx","component/pages/masterdata/form/fields/FormInputImageMultiple.tsx","component/pages/masterdata/form/fields/FormInputDropDown.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/masterdata/form/fields/FormInputTextEditor.tsx","component/pages/masterdata/form/fields/FormInputCheckBox.tsx","utils/DateUtil.ts","component/pages/masterdata/form/fields/FormInputCoomon.tsx","component/pages/masterdata/form/fields/FormInputDropDownDynamic.tsx","component/form/FormGroup.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/alert/SimpleError.tsx","component/pages/masterdata/ExternalEditForm.tsx","component/navigation/ToggleButton.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/home/HomeMain.tsx","component/pages/settings/SettingsMain.tsx","models/User.ts","component/container/Card.tsx","component/pages/settings/settingHelper.tsx","component/pages/settings/BaseUpdateProfilePage.tsx","component/pages/settings/UserProfile.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/home/AboutUs.tsx","component/pages/transaction/TransactionMain.tsx","component/pages/transaction/in/SupplierForm.tsx","component/pages/transaction/ProductForm.tsx","models/Product.ts","models/ProductFlow.ts","models/Transaction.ts","utils/CollectionUtil.tsx","component/pages/transaction/BaseTransactionPage.tsx","component/pages/transaction/in/TransactionIn.tsx","component/pages/transaction/out/CustomerForm.tsx","component/pages/transaction/out/transactionOutForms.tsx","component/alert/SimpleWarning.tsx","component/pages/transaction/out/TransactionOut.tsx","component/pages/transaction/in/TransactionInConfirmation.tsx","component/pages/transaction/detail/TransactionDetail.tsx","component/pages/transaction/out/TransactionOutConfirmation.tsx","component/pages/inventory/InventoryMain.tsx","component/pages/inventory/stock/ProductStockDetail.tsx","component/pages/inventory/stock/ProductStocksTable.tsx","models/Configuration.ts","component/pages/inventory/stock/ProductStocks.tsx","component/pages/inventory/Report.tsx","component/pages/settings/EditInventoryConfiguration.tsx","models/InventoryData.ts","component/pages/dashboard/DashboardInfo.tsx","component/pages/inventory/InventoryStatus.tsx","component/layout/ApplicationContent.tsx","models/Menu.ts","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","Root.tsx","serviceWorker.js","index.js"],"names":["initState","mainApp","undefined","inventoryData","inventoryConfig","reducer","state","action","type","payload","menus","code","name","url","menuClass","active","authenticated","showSidebar","subMenus","BaseEntity","id","createdDate","modifiedDate","nulledFields","HealthCenter","address","monthlyProductCount","ApplicationProfile","appCode","shortDescription","about","welcomingMessage","contact","website","iconUrl","pageIcon","backgroundUrl","footerIconClass","color","fontColor","loginKey","loginStatus","loginFailed","menuData","loggedUser","loginAttempt","requestId","applicationProfile","masterHealthCenter","assetsPath","result","console","debug","user","data","AttachmentInfo","Blob","dataUrl","axios","require","commonAjaxPostCalls","endpoint","request","Promise","resolve","reject","post","headers","commonAuthorizedHeader","then","axiosResponse","updateAccessToken","response","catch","e","error","commonAjaxPostCallsWithBlob","responseType","fileName","split","rawSplit","extension","length","blob","window","URL","createObjectURL","attachmentInfo","UserService","updateProfile","contextPath","concat","this","instance","MasterDataService","managementProperties","entityPropertyMap","Map","healthCenters","getProductByCode","getByKey","loadHealthCenters","entity","filter","orderBy","orderType","updateApplicationProfile","profile","updateConfiguration","config","inventoryConfiguration","setHealthCenters","getHealthCenters","set","get","req","limit","page","key","value","exacts","fieldsFilter","model","editMode","TransactionService","submitTransactionOUT","object","transaction","submitTransactionIN","getTransactionByCode","deleteTransactionByCode","InventoryService","getAvailableProducts","productCode","location","healthcenter","getProductsInHealthCenter","adjustStocks","getInventoriesData","ReportService","loadStockOpnameReport","loadMontlyReport","printTransactionReceipt","printReceiveRequestSheet","services","userService","getInstance","masterDataService","transactionService","inventoryService","reportService","rootReducer","combineReducers","appState","shopReducer","userState","userReducer","servicesState","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","responseJson","loginSuccess","log","common","newAction","Object","assign","dispatch","finally","endLoading","requestAppIdMiddleware","loggedIn","alert","param","getLoggedUserMiddleware","refresh","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","method","body","JSON","stringify","json","err","storeChatMessageLocallyMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","realtimeChatMiddleware","getRequestId","getLoginKey","getCookie","accessToken","setCookie","warn","getState","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","ca","decodeURIComponent","i","c","charAt","substring","indexOf","devMode","getElementById","rootValue","baseImageUrl","getAssetsPath","usedHost","apiBaseUrl","apiAccount","performLogout","startLoading","setInventoryData","configuration","mapCommonUserStateToProps","LoaderContent","props","realtime","className","style","margin","position","zIndex","marginBottom","role","aria-hidden","padding","marginTop","height","width","progress","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","setState","endMessage","withTimer","setInterval","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","title","onClose","Alert","React","createRef","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","index","uniqueId","string","String","getUTCMilliseconds","toString","beautifyNominal","val","isDecimal","includes","isNegative","startsWith","replace","rawVal","parseInt","nominal","Math","abs","zeroIndex","byId","toBase64v2","fileInput","reader","FileReader","readAsDataURL","files","onload","onerror","FieldType","BaseComponent","parentApp","updated","getInventoryData","getInventoryConfig","getMasterHealthCenter","setPageTitle","validateLoginStatus","callback","isLoggedUserNull","backToLogin","showCommonErrorAlert","msg","message","showError","getServices","event","target","checked","activeId","element","withProgress","successCallback","errorCallback","params","doAjax","password","showAlert","showAlertError","history","push","IState","showNavLinks","toggleNavLinks","onLogout","showConfirmation","ok","menuSet","getMenus","label","getApplicationProfile","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","menu","isActive","activeMenuCode","setMenu","to","setMenuNull","isUserLoggedIn","getLoggedUser","NavBarTop","paddingLeft","fontSize","UserIcon","marginRight","displayName","withRouter","connect","Spinner","innerDivs","Array","visibility","show","loading","username","Login","updateCredentialProperty","getAttribute","preventDefault","performLogin","onSubmit","login","onChange","PasswordField","placeholder","required","UsernameField","autoFocus","BaseMainMenus","DashboardMain","AnchorButton","btnClassName","attributes","iconClassName","Modal","hideModal","showModal","toggleable","footerContent","showFooter","Filter","contains","beginsWith","day","year","month","module","monthTo","yearTo","maxValue","ignoreEmptyValue","filterExpDate","useExistingFilterPage","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","formInputColumn","editable","creatable","elements","fieldNameList","withProgressWhenUpdated","record","prop","identity","getEntityElement","getHeaderLabels","header","labelName","isDate","filterable","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","EntityValues","elemnents","elementid","FIELD_TYPE_DATE","toDateString","FIELD_TYPE_IMAGE","imgLink","src","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","dangerouslySetInnerHTML","__html","FIELD_TYPE_CHECKBOX","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","ceil","min","max","BaseField","prepopulateForm","entityElement","getRequiredAttr","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","showConfirmationDanger","doRemoveImage","recordToEdit","defaultValue","fullUrl","Fragment","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","trim","imageNames","imageName","isNull","isBase64","isBase64Image","FormInputDropDown","inputList","inputListLoaded","entities","Error","loadInputList","entityReferenceClass","commonAjax","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","options","option","optionItemValue","AnchorWithIcon","tyle","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","createElement","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","dataset","clean","contentOnChange","onMouseDown","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputCheckbox","getInputReadableDate","date","getFullYear","twoDigits","getMonth","getDate","join","FormInputCommon","dateObj","valueAsObj","requiredAttr","input","FIELD_TYPE_PLAIN_LIST","plainListValues","FIELD_TYPE_TEXTAREA","searchValue","FormInputDropDownDynamic","inputRef","searchKey","loadEntities","search","keyCode","div","onKeyDown","FormGroup","orientation","FormInputField","multiple","MasterDataForm","form","submit","formData","FormData","promises","hasImageField","forEach","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","realtimeProgress","getEntityProperty","commonAjaxWithProgress","save","recordSaved","showInfo","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","hasTextEditor","ei","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","DataTableHeader","headerProps","headerProp","headerName","filterClass","minWidth","autoComplete","filterOnChange","data-ordertype","orderButtonOnClick","data-orderby","SimpleError","ExternalEditForm","link","ToggleButton","yesLabel","noLabel","MasterDataList","adjustFilter","entitiesLoaded","recordData","checkDefaultData","getRecordNumber","filterFormSubmit","setExactSearch","filterReset","showForm","showCreateForm","updateFilterPage","updateFilterLimit","exactsSearch","resultList","onReset","overflow","number","values","parseValues","Loading","paddingTop","marginLeft","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","loadEntityProperty","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","properties","property","HomeMain","imageUrl","backgroundImage","backgroundSize","SettingsMain","User","profileImage","authorities","processingDate","Card","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","BaseUpdateProfilePage","saveRecord","fieldChanged","doSaveRecord","postRecordSaved","editFields","UserProfile","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","enabled","getEditedRecord","editedUser","setLoggedUser","EditFields","EditApplicationProfile","updateImageField","setAppProfileField","appProfile","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","AboutUs","TransactionMain","SupplierForm","supplierNotFound","updateField","searchSupplier","loadSupplier","supplierLoaded","setSupplier","supplier","reset","notFound","SupplierDetail","ProductForm","productNotFound","searchProduct","loadProduct","productLoaded","setProduct","product","ProductDetail","unit","Product","description","utilityTool","ProductFlow","expiredDate","count","usedCount","stock","suitable","price","generic","referenceProductFlow","availableProductFlow","pf","Transaction","transactionDate","customer","healthCenterDestination","healthCenterLocation","productFlows","destination","productFlowCount","addProductToFlow","productFlow","addProductFlow","hasProductFlowReferenceid","setProductFlowValue","removeProductFlow","tableHeader","BaseTransactionPage","setTransaction","validateTransactionFromProps","removeAll","didMountCallback","updateTransactionGeneralField","updateProductFlow","buttonSubmitTransaction","State","selectedProduct","TransactionIn","addToCart","pathname","remove","colSpan","ProductFlowItemInput","data-index","SelectedProductDetail","CustomerForm","customerNotFound","searchCustomer","loadCustomer","customerLoaded","setCustomer","CustomerDetail","age","HealthCenterForm","setHealthCenter","hc","DestinationInfo","healthCenterDestionation","SimpleWarning","availableProducts","loadingProducts","TransactionOut","updateDestination","healthCentersLoaded","force","availableProduct","loadAvailableProducts","availableProductsLoaded","availableProductsNotLoaded","fromReference","updateSelectedHealthCenter","h","setHealthCenterDestination","selecteds","healthCenter","alreadyAdded","TransactionInConfirmation","back","onSuccess","confirm","ProductFlowRow","transactionCode","dataNotFound","TransactionDetail","recordNotLoaded","loadData","setTransactionCode","recordNotDeleted","deleteRecord","receiptCreated","attachment","download","click","printReceipt","TransactionData","isTransOut","TransactionOutConfirmation","InventoryMain","ProductStockDetail","ProductImage","getDefaultImageUrl","ProductStocksTable","stocks","productStocks","startingNumber","producFlows","Configuration","expiredWarningDays","leadTime","cycleTime","totalItems","selectedHealthCenter","ProductStocks","updateFilterExpDate","getHtmlInputElement","selectedDate","diffDay","a","b","utc1","UTC","utc2","floor","getDiffDays","loadProducts","loadProductsAt","productLoadingError","doLoadProduct","updateLocation","loadHealthCenter","getDisplayedRecordOptions","range","setIgnoreEmpty","setFilterExpDate","updateLimit","expDateFilterWithin","days","setDate","addDays","period","Report","reportCreated","updatePeriod","getDay","loadStockOpname","EditInventoryConfiguration","actualConfig","loadConfiguration","configLoaded","setProperty","InventoryData","inventories","totalItemsSum","totalExpiredSum","totalWillExpiredSum","DashboardInfo","inventoriesDataLoaded","loadInventoriesData","totalWillExpired","totalExpired","totalSafe","InventoryStatus","totalSaveSum","inventory","safe","expiredItems","willExpiredItems","ApplicationContent","exact","path","render","Dashboard","Setting","Inventory","Menu","pathVariables","defaultMenuIconClassName","getIconClassName","SideBar","isSidebarActive","parentMenu","pathName","addEventListener","handleScroll","removeEventListener","scrollTop","srcElement","brand","menuClassName","Brand","textAlign","paddingBottom","textDecoration","MainLayout","currentPathName","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","minHeight","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","clientRef","alertCallback","onOk","loadingPercentage","mainAppUpdated","setMainApp","requestAppId","incrementLoadings","decrementLoadings","percentageFloat","percentage","yesCallback","noCallback","dismissAlert","querySelector","setAttribute","head","updateFavicon","topics","onMessage","handleMessage","client","text","actions","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4cb9b1ff.chunk.js","sourcesContent":["import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined,\r\n    inventoryData: undefined,\r\n    inventoryConfig: undefined,\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n        case types.SET_INVENTORY_DATA:\r\n\r\n        return {...state, inventoryData: action.payload.inventoryData, inventoryConfig: action.payload.inventoryConfig}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n  \r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";   \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\";\r\nexport const REQUEST_ID = \"req_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";   \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";\r\nexport const SET_INVENTORY_DATA = \"SET_INVENTORY_DATA\";","\r\nimport Menu from './../models/Menu';\r\n\r\nexport const HOME = \"home\"; \r\nexport const ABOUT = \"about\";\r\nexport const ACCOUNT = \"account\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const DASHBOARD = \"dashboard\"; \r\nexport const MENU_SETTING = \"settings\";\r\nexport const MENU_MASTER_DATA = \"management\"; \r\nexport const CHATROOM = \"chatroom\"; \r\nexport const TRANSACTION = \"transaction\"; \r\nexport const INVENTORY = \"INVENTORY\"; \r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    \r\n    {\r\n        code: DASHBOARD,\r\n        name: \"Dashboard\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_info',\r\n                name: 'Inventory Info',\r\n                url: 'info',\r\n                menuClass: 'fas fa-info-circle'\r\n\r\n            },\r\n            {\r\n                code: 'dashboard_productsales',\r\n                name: 'Product Sales',\r\n                url: 'productsales',\r\n                menuClass: 'fas fa-chart-line'\r\n            }\r\n        ]\r\n    }, \r\n    {\r\n        code: INVENTORY,\r\n        name: \"Inventory\",\r\n        url: \"/inventory\",\r\n        menuClass: \"fas fa-warehouse\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'inventory_stocks',\r\n                name: 'Stock',\r\n                url: 'stock',\r\n                menuClass: 'fas fa-archive'\r\n\r\n            },\r\n            {\r\n                code: 'inventory_status',\r\n                name: 'Status',\r\n                url: 'status',\r\n                menuClass: 'fas fa-layer-group'\r\n            }\r\n            ,\r\n            {\r\n                code: 'report',\r\n                name: 'Report',\r\n                url: 'report',\r\n                menuClass: 'fas fa-file-alt'\r\n            }\r\n        ]\r\n    }, \r\n    {\r\n        code: TRANSACTION,\r\n        name: \"Transaction\",\r\n        url: \"/transaction\",\r\n        menuClass: \"fas fa-book\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'transaction_in',\r\n                name: 'Supply',\r\n                url: 'productin',\r\n                menuClass: 'fas fa-arrow-down'\r\n\r\n            },\r\n            {\r\n                code: 'transaction_out',\r\n                name: 'Distribution',\r\n                url: 'productout',\r\n                menuClass: 'fas fa-arrow-up'\r\n            },\r\n            {\r\n                code: 'transaction_detail',\r\n                name: 'Detail',\r\n                url: 'detail',\r\n                menuClass: 'fas fa-folder'\r\n            }\r\n        ]\r\n    },  \r\n    {\r\n        code: MENU_MASTER_DATA,\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true\r\n    },\r\n    {\r\n        code: MENU_SETTING,\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profile',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Application Setting',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n            },\r\n            {\r\n                code: 'inventory_config',\r\n                name: 'Inventory Configuration',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'inventory-config',\r\n            },\r\n            \r\n        ]\r\n    },\r\n];\r\n","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tnulledFields?:string[] | undefined;\n\t \n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class HealthCenter extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\taddress?:string;\n\tmonthlyProductCount?:number;\n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import * as types from './types'\r\nimport * as menuData from '../constant/Menus'\r\nimport { setCookie } from '../middlewares/Common';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.menus,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: new ApplicationProfile(),\r\n    masterHealthCenter: new HealthCenter(),\r\n    assetsPath: \"/\",\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n   \r\n    let result = {};\r\n   \r\n    switch (action.type) {\r\n\r\n        case types.REQUEST_ID:\r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                masterHealthCenter: action.payload.masterHealthCenter??{},\r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus)\r\n            //  action.payload.referer.refresh();\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n \r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            }; \r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser, \r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","\r\nexport default class AttachmentInfo {\r\n    name:string = \"\";\r\n    data:Blob = new Blob();\r\n    dataUrl:string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from './../models/AttachmentInfo';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.data = blob;\r\n                attachmentInfo.dataUrl = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport User from './../models/User';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nexport default class UserService\r\n{\r\n    private static instance?:UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user:User) => {\r\n        \r\n        const request:WebRequest = {\r\n           user:user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n}","\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Configuration from './../models/Configuration';\r\n\r\nexport default class MasterDataService {\r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private healthCenters: HealthCenter[] = [];\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getProductByCode = (code: string) => {\r\n        return this.getByKey('product', 'code', code);\r\n    }\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadHealthCenters = () => {\r\n        const request: WebRequest = {\r\n            entity: 'healthcenter', filter: { orderBy: 'name', orderType: 'asc' }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getByKey(entity: string, key: string, value: any) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getById(entity: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n    updateConfiguration = (config:Configuration) => {\r\n        const request: WebRequest = {\r\n           inventoryConfiguration: config\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateconfig\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n\r\n    setHealthCenters = (healthCenters:HealthCenter[]) => {\r\n        this.healthCenters = healthCenters;\r\n    }\r\n    getHealthCenters = () :HealthCenter[] => {\r\n        return this.healthCenters;\r\n    }\r\n}","\r\nimport User from '../models/User';\r\nimport WebRequest from '../models/WebRequest';\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport Transaction from './../models/Transaction';\r\nexport default class TransactionService {\r\n    \r\n    \r\n    private static instance?: TransactionService;\r\n\r\n    static getInstance(): TransactionService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    submitTransactionOUT = (object: Transaction) => {\r\n\r\n        console.debug(\"object: \", object);\r\n         \r\n        const request: WebRequest = {\r\n            transaction: object\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionout\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    submitTransactionIN = (object: Transaction) => {\r\n\r\n        const request: WebRequest = {\r\n            transaction: object\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionin\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    getTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/gettransaction/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    deleteTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/deleterecord/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n\r\n}"," \r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from './../models/Filter';\r\nexport default class InventoryService {\r\n    getAvailableProducts = (productCode: string, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/availableproducts/\"+productCode)\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location\r\n        });\r\n    }\r\n\r\n    getProductsInHealthCenter = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproducts\")\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    adjustStocks = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/recalculatestock\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    getInventoriesData = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getinventoriesdata\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    private static instance?: InventoryService;\r\n\r\n    static getInstance(): InventoryService {\r\n        if (this.instance == null) {\r\n            this.instance = new InventoryService();\r\n        }\r\n        return this.instance;\r\n    }\r\n     \r\n\r\n}"," \r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCallsWithBlob } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from './../models/Filter';\r\nexport default class ReportService {\r\n    loadStockOpnameReport = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/stockopname\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    loadMontlyReport = (filter:Filter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/monthly\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            filter: filter\r\n        });\r\n    }\r\n    printTransactionReceipt = (code:string ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/transactionreceipt/\"+code)\r\n        return commonAjaxPostCallsWithBlob(endpoint, {  });\r\n    }\r\n    printReceiveRequestSheet = (filter:Filter  , location:HealthCenter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/receiverequestsheet\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n\r\n   \r\n    private static instance?: ReportService;\r\n\r\n    static getInstance(): ReportService {\r\n        if (this.instance == null) {\r\n            this.instance = new ReportService();\r\n        }\r\n        return this.instance;\r\n    }\r\n     \r\n\r\n}"," \r\nimport Services from './../services/Services'; \r\n\r\nexport const initState: { services: Services } = {\r\n    services: new Services()\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","\r\nimport UserService from './UserService';\r\nimport MasterDataService from './MasterDataService';\r\nimport TransactionService from './TransactionService';\r\nimport InventoryService from './InventoryService';\r\nimport ReportService from './ReportService';\r\nexport default class Services {\r\n    userService: UserService = UserService.getInstance();\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    transactionService: TransactionService = TransactionService.getInstance();\r\n    inventoryService: InventoryService = InventoryService.getInstance();\r\n    reportService: ReportService = ReportService.getInstance();\r\n}","import * as shopReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: shopReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState:any = {\r\n    appState: shopReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(response => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        common.updateAccessToken(response);\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n\r\nexport const requestAppIdMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.REQUEST_ID) { return next(action); }\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => {\r\n        const data = response.data;\r\n        if (data.code != \"00\") {\r\n            alert(\"Error requesting app ID\");\r\n            return;\r\n        }\r\n        common.updateAccessToken(response);\r\n        console.debug(\"response header:\", response.headers['access-token']);\r\n        let newAction = Object.assign({}, action, { payload: { loginStatus: data.loggedIn, ...data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware' \r\n\r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer, initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware, \r\n            userMiddleware.requestAppIdMiddleware, \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n \r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","\r\nimport {  getStore } from './../redux/configureStore';\r\n\r\n\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\n\r\nexport const getLoginKey = () => {\r\n    return getCookie('loginKey');\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    // console.debug(\"will updateAccessToken\");\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(\"loginKey\", accessToken);\r\n    } else {\r\n        console.warn(\"NOT updateAccessToken\");\r\n    }\r\n}\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\n\r\nexport const setCookie = function (cname, cvalue, exdays = 1) {\r\n    var d = new Date();\r\n    // console.debug(\"setCookie: \", cname, \":\", cvalue)\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => { return getAssetsPath()+ \"images/\"}; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport InventoryData from './../models/InventoryData';\r\nimport WebResponse from './../models/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\nexport const requestAppId = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.REQUEST_ID,\r\n        payload: {},\r\n        meta: {\r\n            app: app, type: types.REQUEST_ID,\r\n            url: apiBaseUrl.concat(\"requestid\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n \r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n \r\nexport const  setInventoryData = (payload: WebResponse) => ({\r\n    type: types.SET_INVENTORY_DATA,\r\n    payload: {inventoryData:payload.inventoryData, inventoryConfig: payload.configuration},\r\n    meta: { type: types.SET_INVENTORY_DATA }\r\n})\r\n\r\n","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        masterHealthCenter: state.userState.masterHealthCenter,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n\r\n        //app\r\n        mainApp: state.appState.mainApp,\r\n        inventoryData: state.appState.inventoryData,\r\n        inventoryConfig: state.appState.inventoryConfig,\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n    if (props.realtime) {\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"progress-bar progress-bar-striped\" role=\"progressbar\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '300ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        } else if (isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport function beautifyNominal(val:any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal:boolean = new String(val).includes(\".\");\r\n\tconst isNegative:boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\",\"\");\r\n\t}\r\n\tconst rawVal = isDecimal? parseInt( new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) { \r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++; \r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3 ) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult+= \",\"+ new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\"+result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String:string) : number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;\r\n\tvar sizeInKb=sizeInBytes/1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName:string) :string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<string>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_CHECKBOX =\n\t'FIELD_TYPE_CHECKBOX',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_TEXTEDITOR = \n\t'FIELD_TYPE_TEXTEDITOR'\n}\n\n","import { Component } from 'react';\r\nimport { byId } from '../utils/ComponentUtil';\r\nimport WebResponse from './../models/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport Services from './../services/Services';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport InventoryData from './../models/InventoryData';\r\nimport Configuration from './../models/Configuration';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false ) {\r\n        super(props);\r\n        \r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = this.props.mainApp;\r\n       \r\n    }\r\n    getInventoryData = () : InventoryData|undefined => {\r\n        return this.props.inventoryData;\r\n    }\r\n    getInventoryConfig = () : Configuration|undefined => {\r\n        return this.props.inventoryConfig;\r\n    }\r\n    getMasterHealthCenter = () : HealthCenter => {\r\n        return this.props.masterHealthCenter??new HealthCenter();\r\n    }\r\n    setPageTitle = (title:string) => {\r\n        document.title = title;\r\n    }\r\n    validateLoginStatus = (callback ?:()=>void) => {\r\n        if (this.authenticated == false) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n        }else {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n\r\n    getApplicationProfile():ApplicationProfile\r\n    {\r\n        return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange(event: any) {\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    focusToActiveField() {\r\n        if (this.state.activeId != null && byId(this.state.activeId) != null) {\r\n            const element = byId(this.state.activeId);\r\n            if (element != null) {\r\n                element.focus();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any ) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response:WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e:any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser():User|undefined {\r\n        const user:User|undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation(body:any): Promise<boolean> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n  \r\n    }\r\n    showConfirmationDanger(body: any): Promise<any> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e:any) => {\r\n        console.error(e);\r\n        const msg = e.message??e;\r\n        this.showError(\"Operation Failed: \"+msg);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this , \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n\r\n    getServices = () : Services => {\r\n        return this.props.services;\r\n    }\r\n}","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || menu.authenticated && this.isLoggedUserNull()) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.props.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull} authenticated={this.isUserLoggedIn()}\r\n                                onLogout={this.onLogout} user={this.getLoggedUser()} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: any) => {\r\n    if (props.authenticated) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'><i className=\"fas fa-user-circle\"></i>&nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{marginRight:'5px'}} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{marginRight:'5px'}} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block'}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport Spinner from './../../loader/Spinner';\r\nclass IState {\r\n    loading:boolean = false; username:string = \"\"; password: string = \"\";\r\n}\r\nclass Login extends BaseComponent{\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username,this.state.password, this);\r\n    }\r\n    componentDidMount(){\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate(){\r\n    \r\n        console.debug(\"Login update\");\r\n        console.debug(\"logged in : \", this.props.loginStatus);\r\n        console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\">\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <div className=\"text-center\">\r\n                        <h2><i className=\"fas fa-user-circle\"></i></h2>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n                    </div>\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty}/>\r\n                    <PasswordField value={this.state.password} onChange={this.updateCredentialProperty}/>\r\n                    {this.state.loading ? <Spinner/>:<button className=\"btn btn-lg btn-success btn-block\" type=\"submit\">Sign in</button>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({value, onChange}) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input name=\"password\" value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({value, onChange}) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input name=\"username\" value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","\r\nimport BaseComponent from './../BaseComponent';\r\nimport Menu from './../../models/Menu';\r\nexport default class BaseMainMenus extends BaseComponent {\r\n\r\n    title:string = \"\";\r\n    constructor(props, title:string, authenticated:boolean = false) {\r\n        super(props, authenticated);\r\n        this.title = title;\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.authenticated) {\r\n            this.validateLoginStatus();\r\n        }\r\n        document.title = this.title;\r\n        \r\n    }\r\n\r\n}","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus';\r\n\r\n\r\nclass DashboardMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Dashboard\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"DashboardMain\" className=\"container-fluid\">\r\n                <h2>Dashboard</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DashboardMain))","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}"," \nexport default class Filter{\n\tlimit? :number = 5; \n\tpage? :number = 0;\n\torderType?:string;\n\torderBy?:string;\n\tcontains?:boolean;\n\tbeginsWith?:boolean;\n\texacts?:boolean;\n\tday?:number;\n\tyear?:number;\n\tmonth?:number;\n\tmodule?:string;\n\tfieldsFilter?:any = {};\n\tmonthTo?:number;\n\tyearTo?:number;\n\tmaxValue?:number;\n\tignoreEmptyValue?:boolean = false;\n\tfilterExpDate?:boolean = false;\n\t//\n\tuseExistingFilterPage?:boolean = false; \n\n}\n","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"../FieldType\";\r\nimport HeaderProps from '../HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string; \r\n\tformInputColumn?:number;\r\n\teditable:boolean = true;\r\n\tcreatable:boolean = true; \r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[]; \r\n\twithProgressWhenUpdated:boolean = false;\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.labelName,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date',\r\n\t\t\t\tfilterable: element.filterable\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.identity) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","import React from 'react';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport EntityElement from '../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object: any, prop: EntityProperty): Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents: EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value: any = object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (element.fieldType) { \r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toDateString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src={baseImageUrl() + imgLink} width=\"50\" height=\"50\" />\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{ color: value }} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_TEXTEDITOR:\r\n\t\t\t\t\tvalue = <div dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: new String(value).length > 100 ?\r\n\t\t\t\t\t\t\t(new String(value).substring(0, 100) + \"...\")\r\n\t\t\t\t\t\t\t: value\r\n\t\t\t\t\t}}></div>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_CHECKBOX:\r\n\t\t\t\t\tvalue = value == true?<i>true</i> :<i>false</i>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (element.optionItemName  && element.optionItemName != \"\") {\r\n\t\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\t\tvalue = valueAsObj[element.optionItemName ?? \"id\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../../../BaseComponent';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\n\r\nexport default class BaseField extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm = () => {\r\n\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\n  class FormInputImage extends BaseField {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl() + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\" name={element.id} className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImage))","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url'; \r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseField {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n      \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment key={\"IMG\"+index+element.id}>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl() + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple))\r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent'; \r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string, \r\n}\r\nclass FormInputDropDown extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props );\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    \r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        // if (element.jsonList &&  element.jsonList != \"\") {\r\n        //     const list = JSON.parse(element.jsonList);\r\n        //     this.inputListLoaded({entities:list})\r\n        //     return;\r\n        // }\r\n\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nexport default class AnchorWithIcon extends Component<any, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        if (this.props.to) {\r\n            return <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </Link>\r\n        }\r\n        return (\r\n            <a {...this.props.attributes} tyle={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment, MouseEventHandler } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport './TextEditor.css'\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport BaseField from './BaseField';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    } \r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\n\r\n\r\nexport default class FormInputCheckbox extends BaseField {\r\n    state = {\r\n        checked: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ checked: recordValue == true })\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        const checked: boolean = this.state.checked;\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={checked ? 'true' : 'false'} />\r\n                <div className=\"btn-group\">\r\n                    <a className={checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: true })} >Yes</a>\r\n                    <a className={!checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: false })} >No</a>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","import { join } from \"path\";\r\n\r\nexport const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n]\r\n\r\nconst leapMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getMonthDays = (month:number) : number=> {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n \r\nexport const getCurrentMMYY = () => {\r\n    return [new Date().getMonth() + 1, new Date().getFullYear()];\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n    const year = date.getFullYear();\r\n\r\n    const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n    return arr.join(\"-\");\r\n}\r\nexport function addDays(date:Date, days:number) :Date{\r\n    const result:Date = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n  export const getDiffDays = (a:Date, b:Date) : number => {\r\n    // Discard the time and time-zone information.\r\n\r\n    console.debug(\"DIFF DATE \",a,\" vs \", b);\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate()); \r\n    return Math.floor((utc2 - utc1) / _MS_PER_DAY);\r\n}\r\nconst twoDigits = (value:number) :string => {\r\n    if (value >= 10) {\r\n        return   value.toString();\r\n    }\r\n    return \"0\"+value;\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { FieldType } from '../../../../../models/FieldType';\r\nimport { getInputReadableDate } from '../../../../../utils/DateUtil';\r\nimport BaseField from './BaseField';\r\n\r\nexport default class FormInputCommon extends BaseField {\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const element = this.getEntityElement();\r\n        const fieldName = element.id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (undefined == recordValue){\r\n            console.debug(fieldName, \" is undefined\", this.props.recordToEdit, this.props.recordToEdit[fieldName]);\r\n            return;\r\n        }\r\n\r\n        const fieldType: FieldType = element.fieldType;\r\n        let defaultInputValue: any = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DATE:\r\n                const dateObj = new Date(recordValue);\r\n                if (!dateObj) { break }\r\n                defaultInputValue = getInputReadableDate(dateObj);\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                defaultInputValue = new String(recordValue);\r\n                break;\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n\r\n            if (element.optionItemName && element.optionItemName != \"\") {\r\n                const valueAsObj = defaultInputValue;\r\n                this.ref.current.value = valueAsObj[element.optionItemName ?? \"id\"];\r\n            } else {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (element.identity == true || element.editable == false) {\r\n            return (<input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                input = (\r\n                    <select  {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                        {element.plainListValues.map((value, i) => {\r\n                            return (\r\n                                <option key={\"s-\" + element.id + '-o-' + i} value={value}>{value}</option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                )\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return input;\r\n\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\nimport WebRequest from './../../../../../models/WebRequest';\r\nclass IState {\r\n    inputList: any[] = [];\r\n    searchValue: string = \"\"\r\n}\r\nclass FormInputDropDownDynamic extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    ref: React.RefObject<any> = React.createRef();\r\n    inputRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(this.getEntityElement().labelName+\" Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities }, ()=> {\r\n            if(this.inputRef.current) {\r\n                this.inputRef.current.focus();\r\n            }\r\n        });\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n\r\n        const code = element.entityReferenceClass;\r\n        const searchKey = element.optionItemName;\r\n        if (!searchKey)  { return; }\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0,\r\n                fieldsFilter: {\r\n                    [searchKey]:this.inputRef.current?.innerHTML\r\n                }\r\n            }\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        )\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.setState({inputList:[recordValue], searchValue: \"\"} , ()=>{\r\n            let defaultInputValue = undefined;\r\n            const optionValueName = this.getEntityElement().optionValueName;\r\n            if (!optionValueName) return;\r\n            defaultInputValue = recordValue[optionValueName]; \r\n            if (defaultInputValue) {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        });\r\n    }\r\n\r\n    search = (event) => {\r\n        if(event.keyCode == 13) {\r\n            if (this.inputRef.current) {\r\n                const div = this.inputRef.current;\r\n                div.innerHTML = new String(div.innerText).trim();\r\n            }\r\n            event.preventDefault();\r\n            this.loadInputList();\r\n            return false;\r\n          }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const optionItemValue = element.optionValueName;\r\n        const optionItemName = element.optionItemName;\r\n        const options = this.state.inputList;\r\n        console.debug(\"options: \", options);\r\n        const placeholder:string =   element.entityReferenceClass + \" \"+ optionItemName;\r\n        return (\r\n            <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-append\">\r\n                        <span className=\"input-group-text\">{placeholder}</span>\r\n                    </div>\r\n                    <div onKeyDown={this.search} ref={this.inputRef} contentEditable={true} className=\"form-control\" ></div>\r\n                   \r\n                    <div className=\"input-group-append\">\r\n                        <AnchorWithIcon onClick={this.loadInputList} className=\"btn btn-secondary\" children=\"Search\"/>\r\n                        <AnchorWithIcon show={this.props.recordToEdit != undefined} onClick={this.prepopulateForm} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary\"/>\r\n          \r\n                    </div>\r\n                </div>\r\n                <select  {...this.getRequiredAttr()} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option key={\"fid-\" + uniqueId() + \"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                  </div>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDownDynamic))","\r\nimport React, { Component } from 'react';\r\nexport default class FormGroup extends Component<any, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputImage from './fields/FormInputImage';\r\nimport FormInputImageMultiple from './fields/FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormInputDropDown from './fields/FormInputDropDown';\r\nimport FormInputTextEditor from './fields/FormInputTextEditor';\r\nimport FormInputCheckbox from './fields/FormInputCheckBox';\r\nimport FormInputCommon from './fields/FormInputCoomon';\r\nimport FormInputDropDownDynamic from './fields/FormInputDropDownDynamic';\r\nimport FormGroup from './../../../form/FormGroup';\r\n\r\nclass FormInputField extends BaseComponent {\r\n\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n\r\n        let input:JSX.Element  = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                input = <FormInputDropDownDynamic recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                input = <FormInputDropDown recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                input = <FormInputTextEditor recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n\r\n            case FieldType.FIELD_TYPE_IMAGE:\r\n                input = element.multiple ?\r\n                    <FormInputImageMultiple recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    :\r\n                    <FormInputImage recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_CHECKBOX:\r\n                input = <FormInputCheckbox recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n            default:\r\n                input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n        }\r\n       return  <FormGroup orientation='vertical' label={element.labelName}>\r\n                { input}\r\n            </FormGroup>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/settings/EntityProperty';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputField from './FormInputField';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false || this.getEntityProperty().creatable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const form = e.target, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        let hasImageField:boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    object[key].push(value == \"true\");\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            hasImageField = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n            \r\n        });  \r\n        Promise.all(promises).then( (val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", hasImageField);\r\n            this.ajaxSubmit(objectPayload, hasImageField);\r\n        });\r\n        \r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        if (this.getEntityProperty().withProgressWhenUpdated == true || realtimeProgress){\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else{\r\n            this.commonAjax(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form onSubmit={this.onSubmit} id=\"record-form\">\r\n                <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields app={this.parentApp} recordToEdit={this.recordToEdit}  entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map((elements, ei) => {\r\n                return (\r\n                    <div key={\"GROUPED_ELEMENT_\"+ei} className={hasTextEditor?\"col-lg-12\":\"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            const key = \"form-input-for-\"+element.id;\r\n                            return <FormInputField key={key} recordToEdit={props.recordToEdit} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebResponse from './../../../models/WebResponse';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        if (entityProperty.withProgressWhenUpdated) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        } else { \r\n            this.commonAjax(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        }\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n     \r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nexport default class DataTableHeader extends Component<{fieldsFilter:any, orderButtonOnClick(e:any):void, headerProps: HeaderProps[], filterOnChange(e:any):void}, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render(){\r\n       \r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        const fieldsFilter = props.fieldsFilter;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map((headerProp, i) => {\r\n                    const isDate = headerProp.isDate;\r\n                    const headerName = headerProp.value;\r\n                    if (!headerProp.filterable) {\r\n                        return <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                        </th>\r\n                    }\r\n                    const filterClass = \"form-control input-filter\";\r\n                    return (\r\n                        <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                            <div style={{minWidth:'200px'}} className=\"input-group\">\r\n                                {isDate ?\r\n                                    <Fragment>\r\n                                        <input key={\"filter-day-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-day\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-day\"}\r\n                                            className={filterClass} placeholder={\"day\"} />\r\n                                        <input key={\"filter-month-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-month\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-month\"}\r\n                                            className={filterClass} placeholder={\"month\"} />\r\n                                        <input key={\"filter-year-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-year\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-year\"}\r\n                                            className={filterClass} placeholder={\"year\"} />\r\n                                    </Fragment>\r\n                                    :\r\n                                    <input key={\"filter-common-\"+headerName}  autoComplete=\"off\" value={fieldsFilter[headerName]??\"\"} onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                        className={filterClass} name={headerName} />\r\n                                }\r\n                            <div className=\"input-group-append btn-group\">\r\n                                <button data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-up\" /></button>\r\n                                <button data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-down\" /></button>\r\n                            </div>\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\n\r\nconst     ExternalEditForm = (props:{record:any, entityProperty:EntityProperty, show?:boolean}) => {\r\n    \r\n    if (props.show == false) return null;\r\n    let link = \"\";\r\n    if (props.entityProperty.entityName == 'transaction') {\r\n        link = \"/transaction/detail/\"+props.record.code;\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n    \r\n    return <AnchorWithIcon iconClassName=\"fas fa-edit\" to={link} attributes={{target:\"_blank\"}} />\r\n}\r\n\r\nexport default ExternalEditForm;","import React, { Component } from 'react'\r\nimport AnchorButton from './AnchorButton';\r\ninterface Props {\r\n    onClick(val:boolean):void,\r\n    active:boolean,\r\n    yesLabel?:string,\r\n    noLabel?:string\r\n}\r\nexport default class ToggleButton extends Component<Props, any>{\r\n    \r\n    render() {\r\n        const props = this.props;\r\n        const active = this.props.active;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton className={\"btn  btn-sm \" + (active ? \"btn-dark\" : \"btn-light\")} onClick={(e) => this.props.onClick(true)} >\r\n                    {props.yesLabel??\"Yes\"}</AnchorButton>\r\n                <AnchorButton className={\"btn  btn-sm \" + (active == false ? \"btn-dark\" : \"btn-light\")} onClick={(e) => this.props.onClick(false)}  >\r\n                    {props.noLabel??\"No\"}</AnchorButton>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from './../../../models/Filter';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\nimport ExternalEditForm from './ExternalEditForm';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState;\r\n    recordToEdit?: {} = undefined;\r\n    entityProperty: EntityProperty;\r\n     headerProps: HeaderProps[] ;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n       \r\n        this.state  = {\r\n            showForm: false, loading: false,\r\n            filter: { limit: 5, page: 0, fieldsFilter: {}}\r\n        }; \r\n    }\r\n    /**\r\n     * remove fieldsfilter empty values\";\r\n     */\r\n    adjustFilter = (filter: Filter): Filter => {\r\n         \r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        }\r\n        return filter;\r\n    }\r\n    loadEntities = (page: number | undefined) => {\r\n        const filter =  Object.assign( new Filter(), this.state.filter);\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page;\r\n        const request: WebRequest = {\r\n            entity: entityName,\r\n            filter: this.adjustFilter(filter)\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.entitiesLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    entitiesLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        this.loadEntities(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadEntities(page);\r\n    }\r\n    filterOnChange = (e:ChangeEvent) => {\r\n        e.preventDefault();\r\n        const input  = e.target as any;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        const filter = this.state.filter;\r\n        if (filter.fieldsFilter == undefined) {\r\n            filter.fieldsFilter = {};\r\n        }\r\n        console.debug(\"update filter: \", name, filter);\r\n        filter.fieldsFilter[name] = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setExactSearch = (exacts: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.exacts = exacts;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const dataset: DOMStringMap = e.target.dataset;\r\n        const filter = this.state.filter;\r\n        filter.orderBy = dataset['orderby'];\r\n        filter.orderType = dataset['ordertype'];\r\n        this.setState({ filter: filter });\r\n        this.loadEntities(0);\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true });\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner/>\r\n        }\r\n        const headerProps: HeaderProps[] = this.headerProps;\r\n        const exactsSearch:boolean = this.state.filter.exacts == true;\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }}  />\r\n        }\r\n\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <AnchorButton show={this.entityProperty.creatable == true && this.entityProperty.editable == true} style={{ marginBottom: '5px' }} onClick={this.showCreateForm} iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                <form id=\"filter-form\" onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(this.state.filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={this.state.filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                                <div className=\"col-12\"><p/></div>\r\n                                <div className=\"col-3\">\r\n                                    <ToggleButton \r\n                                    yesLabel=\"exact\"\r\n                                    noLabel=\"not exact\"\r\n                                    active={exactsSearch}\r\n                                    onClick={(val:boolean) => this.setExactSearch(val)}\r\n                                    />\r\n                                    {/* <div className=\"btn-group\">\r\n                                        <a className={exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(true)} >Exact</a>\r\n                                        <a className={!exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(false)} >Not Exact</a>\r\n                                    </div> */}\r\n                                </div>\r\n                                <div className=\"col-3\">\r\n                                <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={this.state.filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={this.state.filter.page ?? 0} onClick={this.loadEntities} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader fieldsFilter={this.state.filter.fieldsFilter} orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr key={\"tr-result-\"+i}>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value => {\r\n                                                    try {\r\n                                                        return (<td key={\"td-u-\"+uniqueId()}>{value}</td>)\r\n                                                    } catch (error) {\r\n                                                        return (<td key={\"td-u-\"+uniqueId()}>-</td>)\r\n                                                    }\r\n                                                })}\r\n                                                <td>\r\n                                                    <EditDeleteAction show={this.entityProperty.editable == true} showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadEntities(undefined)}  />\r\n                                                    <ExternalEditForm show={this.entityProperty.editable == false} record={result} entityProperty={this.entityProperty} />\r\n                                                </td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({loading}) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-play-circle\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\n \r\nclass MasterDataManagement extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading() {\r\n        //\r\n    }\r\n    endLoading() {\r\n        //\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return <div className=\"row\">\r\n                <div className=\"col-1\"><div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n                </div>\r\n                <div className=\"col-10\"><h4>Loading configuration</h4></div>\r\n            </div>\r\n        }\r\n        return (\r\n            <div id=\"MasterDataManagement\" className=\"container-fluid\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n                <MasterDataList  entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Menu from './../../../models/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BaseMainMenus {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        console.debug(\"PROPS: \", this.props);\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        console.debug(\"this.props.setSidebarMenus: \", this.props.setSidebarMenus);\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement  code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"container-fluid\"><h3>Loading</h3></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div key={\"mngmnt-page-item-\"+property.entityName} className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\n\r\nclass HomeMain extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl() + applicationProfile.backgroundUrl;\r\n        return (\r\n            <div className=\"container-fluid\" style={{padding:0}}>\r\n                <div className=\"jumbotron\"\r\n                    style={{\r\n                        margin:'0px',\r\n                        marginTop: '20px',\r\n                        backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                        backgroundSize: 'cover',\r\n                        color: applicationProfile.fontColor\r\n                    }}\r\n                >\r\n                    <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                    <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                    <hr className=\"my-4\" />\r\n                    <p>{applicationProfile.welcomingMessage}</p>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(HomeMain))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass SettingsMain extends BaseMainMenus \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"container-fluid\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import BaseEntity from './BaseEntity';\n\nexport default class User extends BaseEntity{\n\tusername?:string;\n\tdisplayName?:string;\n\tpassword?:string;\n\tprofileImage?:string;\n\tauthorities?:any[];\n\trequestId?:string;\n\tprocessingDate?:Date;\n\n}\n","\r\nimport React, { Component } from 'react';\r\ninterface Props {\r\n    attributes?:any,\r\n    title?:string,\r\n    className?:string,\r\n    footerContent?:any\r\n}\r\nexport default class Card extends Component<Props, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + this.props.className}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { FormEvent } from 'react';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nexport default class BaseUpdateProfilePage extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    constructor(props, title){\r\n        super(props, true);\r\n        document.title =title;\r\n        this.masterDataService = this.getServices().masterDataService; \r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        } \r\n        this.showConfirmation(\"Save Data?\")\r\n            .then((ok)=> {\r\n                if (ok) { this.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n\r\n    }\r\n    postRecordSaved = (response: WebResponse) => {\r\n\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record Has Been Saved!\");\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields},()=>{\r\n            this.postRecordSaved(response)\r\n        });\r\n    }\r\n}","import React, { ChangeEvent  } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport User from './../../../models/User';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper'; \r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\ninterface EditField { username: boolean, displayName: boolean, password: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        password: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseUpdateProfilePage {\r\n\r\n    userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"User Profile\");\r\n        this.userService = this.getServices().userService;\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    \r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getEditedRecord();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getEditedRecord = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setLoggedUser(response.user); \r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"container-fluid\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl() + user.profileImage} />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.password} updateProperty={this.updateProfileProperty} name=\"password\" toggleInput={this.toggleInput} value={user.password} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false; \r\n    iconUrl:boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseUpdateProfilePage {\r\n \r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"ApplicationProfile Profile\");\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon || applicationProfile.iconUrl) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon' && key != 'iconUrl') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && applicationProfile.pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        if (editFields.iconUrl && applicationProfile.iconUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.iconUrl = applicationProfile.iconUrl;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n    }\r\n\r\n    render() {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditFields = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        const pageIcon: string = applicationProfile.pageIcon ?? \"\";\r\n        const iconUrl: string = applicationProfile.iconUrl ?? \"\";\r\n        return (\r\n            <div id=\"ApplicationProfile\" className=\"container-fluid\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl() + bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={this.updateProfileProperty} name=\"contact\" toggleInput={this.toggleInput} value={applicationProfile.contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Application Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon.startsWith(\"data:image\") ? pageIcon : baseImageUrl() + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Logo\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={iconUrl.startsWith(\"data:image\") ? iconUrl : baseImageUrl() + iconUrl} />\r\n                            <EditImage name=\"iconUrl\" edit={editFields.iconUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfile from './../../../models/ApplicationProfile';\r\nimport FormGroup from '../../form/FormGroup';\r\nclass AboutUs extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfile = this.getApplicationProfile();\r\n        return (<div className=\"container-fluid\" style={{marginTop:'20px'}}>\r\n            <h2>About Us</h2>\r\n            <Card title=\"Application\">\r\n                <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                <FormGroup  ><i>{appProfile.shortDescription}</i></FormGroup>\r\n                <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n            </Card>\r\n            <p/>\r\n            <Card title=\"Development Mode\">\r\n                <FormGroup label=\"Repository\"><a target=\"_blank\" href=\"https://github.com/fajaralmu\">https://github.com/fajaralmu</a></FormGroup>\r\n                <FormGroup label=\"Front End\">React Js</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/front-end-shopping-mart-v2\">https://github.com/fajaralmu/front-end-shopping-mart-v2</a></FormGroup>\r\n                <FormGroup label=\"Back End\">Java, Spring MVC</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/universal-good-shop-v2\">https://github.com/fajaralmu/universal-good-shop-v2</a></FormGroup>\r\n            </Card>\r\n            <p/>\r\n        </div>);\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\n\r\n\r\nclass TransactionMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Transaction\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid\">\r\n                <h2>TransactionMain</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionMain))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from './../../../../services/MasterDataService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    supplier?: Supplier;\r\n    supplierNotFound: boolean;\r\n    loading: boolean;\r\n    code: string\r\n}\r\nclass SupplierForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        supplierNotFound: false, loading: false, code: ''\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchSupplier = (e) => {\r\n        e.preventDefault();\r\n        const code: string = this.state.code;\r\n        if (code.trim() == \"\") return;\r\n        this.loadSupplier(code);\r\n    }\r\n    supplierLoaded = (response: WebResponse) => {\r\n        console.debug(\"response: \", response);\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Supplier not found\");\r\n        }\r\n        if (this.props.setSupplier) { this.props.setSupplier(response.entities[0]); }\r\n        this.setState({ supplier: response.entities[0], supplierNotFound: false });\r\n    }\r\n    supplierNotFound = (e: any) => {\r\n        this.setState({ supplierNotFound: true });\r\n    }\r\n    loadSupplier = (code: string) => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(this.masterDataService.getByKey,\r\n            this.supplierLoaded, this.supplierNotFound, 'supplier', 'code', code);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ code: \"\" })\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchSupplier} >\r\n                <Modal toggleable={true} title=\"Supplier form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/supplier\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Supplier code\" required className=\"form-control\" onChange={this.updateField} value={this.state.code} name=\"code\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <SupplierDetail loading={this.state.loading} supplier={this.state.supplier} notFound={this.state.supplierNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst SupplierDetail = (props: { loading: boolean, supplier?: Supplier, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Supplier not found</div></div>\r\n    }\r\n    if (!props.supplier) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select supplier</div></div>\r\n    }\r\n    const supplier: Supplier = props.supplier;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{supplier.name}</h2>\r\n            <p>Code: {supplier.code}</p>\r\n            <address>\r\n                {supplier.address}<br />\r\n                <abbr title=\"Contact\">Contact: </abbr>{supplier.contact}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SupplierForm))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport BaseComponent from '../../BaseComponent'; \r\nimport Product from '../../../models/Product';\r\nimport ProductFlow from '../../../models/ProductFlow';\r\nimport Modal from '../../container/Modal';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../loader/Spinner';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\ninterface IState {\r\n    product?: Product; \r\n    selectedProductFlow?: ProductFlow;\r\n    productNotFound: boolean;\r\n    loading:boolean;\r\n    productCode:string;\r\n}\r\n class ProductForm extends BaseComponent {\r\n \r\n    masterDataService : MasterDataService;\r\n    state: IState = {\r\n        productNotFound: false,\r\n        loading:false,\r\n        productCode:\"\"\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = { ...this.state };\r\n        \r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    reset = (e:any) => {\r\n        this.setState({productCode:\"\"})\r\n    }\r\n    searchProduct = (e) => {\r\n        e.preventDefault();\r\n        const id:string = this.state.productCode;\r\n        if (id.trim() == \"\") return;\r\n        this.loadProduct(id);\r\n    }\r\n    productLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Product not found\");\r\n        }\r\n        if (this.props.setProduct) {\r\n            this.props.setProduct(response.entities[0]);\r\n        }\r\n        this.setState({ product: response.entities[0], productNotFound: false });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ product: product, productNotFound: false });\r\n    }\r\n    productNotFound = (e: any) => {\r\n        this.setState({ productNotFound: true });\r\n    }\r\n    loadProduct = (code: string) => {\r\n        if (this.state.loading) return;\r\n        this.commonAjaxWithProgress(this.masterDataService.getProductByCode,\r\n            this.productLoaded, this.productNotFound, code);\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchProduct} >\r\n               \r\n                <Modal toggleable={true}  title=\"Product form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/product\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input onChange={this.updateField} value={this.state.productCode} placeholder=\"Product code\" required type=\"text\" className=\"form-control\" name=\"productCode\" />\r\n                        </FormGroup>\r\n                    </div> \r\n                    \r\n                    <ProductDetail loading={this.state.loading} product={this.state.product} notFound={this.state.productNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst ProductDetail = (props: { loading:boolean, product?: Product, notFound: boolean }) => {\r\n   const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Product not found</div></div>\r\n    }\r\n    if (!props.product) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select product</div></div>\r\n    }\r\n    const product: Product = props.product;\r\n    return (\r\n        <div style={style}>\r\n            <h4>{product.name}</h4>\r\n            <table className=\"table\">\r\n                <thead><tr>\r\n                    <th>Unit</th>\r\n                    {/* <th>Category</th>\r\n                    <th>Price@Unit</th>\r\n                    <th>Qty</th> */}\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{product.unit ? product.unit.name : '-'}</td>\r\n                        {/* <td>{product.category ? product.category.name : '-'}</td>\r\n                        <td style={{ fontFamily: 'monospace' }}>{product.price}</td>\r\n                        <td>{product.count}</td> */}\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(ProductForm))","import BaseEntity from './BaseEntity';\nimport Unit from './Unit';\nimport { baseImageUrl } from './../constant/Url';\n\nexport default class Product extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\tdescription?:string;\n\tunit?:Unit;\n\tutilityTool?:boolean;\n\timageNames?:string;\n\n\tgetDefaultImageUrl():string {\n\t\tif (this.imageNames == undefined) return baseImageUrl()+\"default.bmp\";\n\t\treturn  baseImageUrl()+this.imageNames.split(\"~\")[0];\n\t}\n\n}\n","\nimport Transaction from './Transaction';\nimport BaseEntity from './BaseEntity';\nimport Product from './Product';\n\nexport default class ProductFlow extends BaseEntity {\n\t/**\n\t * creates new instance of productFlow referencing given productFlow\n\t * @param availableProductFlow \n\t * @returns\n\t */\n    static fromReference(availableProductFlow: ProductFlow): ProductFlow {\n\t\tconst pf = new ProductFlow();\n\t\tpf.referenceProductFlow = Object.assign(new ProductFlow(), availableProductFlow);\n\t\tpf.product = pf.referenceProductFlow.product;\n\t\treturn pf;\n    }\n\ttransaction?: Transaction;\n\tproduct: Product = new Product();\n\texpiredDate: Date = new Date();\n\tcount: number = 0;\n\tusedCount: number = 0;\n\tstock: number = 0;\n\tsuitable: boolean = true;\n\tprice: number = 0;\n\tgeneric: boolean = false;\n\treferenceProductFlow?:ProductFlow;\n\n}\n","import User from './User';\nimport Customer from './Customer';\nimport BaseEntity from './BaseEntity';\nimport Supplier from './Supplier';\nimport HealthCenter from './HealthCenter';\nimport ProductFlow from './ProductFlow';\nimport Product from './Product';\n\nexport default class Transaction extends BaseEntity {\n\tcode?: string;\n\ttransactionDate: Date = new Date();\n\tuser?: User;\n\ttype?: string;\n\tsupplier?: Supplier;\n\tcustomer?: Customer;\n\thealthCenterDestination?: HealthCenter;\n\thealthCenterLocation?: HealthCenter;\n\tproductFlows: ProductFlow[] = [];\n\tdescription?: string;\n\n\tdestination: string = 'CUSTOMER';\n\n\t \n\tproductFlowCount = () => { return this.productFlows.length }\n\taddProductToFlow = (product: Product) => {\n\t\tconst productFlow: ProductFlow = new ProductFlow();\n\t\tproductFlow.product = product;\n\t\tthis.productFlows.push(productFlow);\n\t}\n\taddProductFlow = (productFlow:ProductFlow) => {\n\t\tthis.productFlows.push(productFlow);\n\t}\n\thasProductFlowReferenceid = (id:number) : boolean => {\n\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\n\t\t\tconst element = this.productFlows[i];\n\t\t\tif (element.referenceProductFlow && element.referenceProductFlow.id == id) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tsetProductFlowValue = (index: number, key: string, value: any) => {\n\t\ttry {\n\t\t\tthis.productFlows[index][key] = value;\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\tremoveProductFlow = (index: number) => {\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\n\t\t\tconst element = this.productFlows[i];\n\t\t\tif (i == index) {\n\t\t\t\tthis.productFlows.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import React from 'react'\r\nimport { uniqueId } from './StringUtil';\r\nexport const tableHeader = (...values:string[]) => {\r\n   \r\n    return (<thead>\r\n        <tr>\r\n            {values.map((value)=>{\r\n\r\n                return <th key={uniqueId()}>{value}</th>\r\n            })}\r\n        </tr>\r\n    </thead>)\r\n}\r\nexport const groupArray = function (array, division) {\r\n    if (null == array || array.length == 0) { return [] }\r\n    const groupedArray = new Array();\r\n    const itemPerDivision = Math.ceil(array.length / division)\r\n\r\n    if (itemPerDivision == 1) {\r\n        groupedArray.push(array);\r\n        return groupedArray;\r\n    }\r\n\r\n    for (let i = 0; i < division; i++) {\r\n        groupedArray.push(new Array());\r\n    }\r\n\r\n    let index = 1;\r\n    let divisionIndex = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const element = array[i];\r\n        groupedArray[divisionIndex].push(element);\r\n\r\n        index++;\r\n        if (index > itemPerDivision) {\r\n            divisionIndex++;\r\n            index = 1;\r\n        }\r\n    }\r\n\r\n    return groupedArray;\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport Transaction from './../../../models/Transaction';\r\nimport { ChangeEvent, Fragment } from 'react';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { getInputReadableDate } from '../../../utils/DateUtil';\r\nexport default class BaseTransactionPage extends BaseComponent {\r\n\r\n    inventoryService: InventoryService;\r\n    masterDataService: MasterDataService;\r\n    constructor(props, title:string) {\r\n        super(props, true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        document.title = title;\r\n    }\r\n\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    removeProductFlow = (index: number) => {\r\n\r\n        this.showConfirmationDanger(\"Delete Product?\").then((ok) => {\r\n            if (!ok) return;\r\n            const transaction: Transaction = this.state.transaction;\r\n            transaction.removeProductFlow(index);\r\n            this.setTransaction(transaction);\r\n        });\r\n    }\r\n    removeAll = () => {\r\n        this.showConfirmationDanger(\"Remove All?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                const transaction: Transaction = this.state.transaction;\r\n                transaction.productFlows = [];\r\n                this.setTransaction(transaction);\r\n            })\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(); \r\n        this.validateTransactionFromProps(); \r\n        this.didMountCallback();\r\n    }\r\n    didMountCallback = () => {\r\n\r\n    }\r\n    updateTransactionGeneralField = (e: any) => {\r\n        const name = e.target.name;\r\n        let value;\r\n        if (e.target.type == 'date') {\r\n            value = new Date(e.target.value);\r\n        } else {\r\n            value = e.target.value;\r\n        }\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction[name] = value;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateProductFlow = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement = e.target as HTMLInputElement;\r\n        const index: string | undefined = target.dataset['index'];\r\n        let value: any = target.value;\r\n\r\n        if (!index) return;\r\n\r\n        const transaction: Transaction = this.state.transaction;\r\n        if (target.type == \"date\") {\r\n            value = new Date(value);\r\n        } else if (target.type == 'checkbox') {\r\n            value = target.checked == true;\r\n        }\r\n        transaction.setProductFlowValue(parseInt(index), target.name, value);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    buttonSubmitTransaction = (transaction: Transaction) => {\r\n        return (\r\n            <Fragment>\r\n                <FormGroup label=\"Transaction Date\">\r\n                    <input className=\"form-control\" name=\"transactionDate\" type=\"date\"\r\n                        value={getInputReadableDate(transaction.transactionDate)}\r\n                        onChange={this.updateTransactionGeneralField} />\r\n                </FormGroup>\r\n                <FormGroup label=\"Description\">\r\n                    <textarea value={transaction.description} name=\"description\"\r\n                        onChange={this.updateTransactionGeneralField}\r\n                        className=\"form-control\" />\r\n                </FormGroup>\r\n                <input type=\"submit\" className=\"btn btn-success\" />\r\n            </Fragment>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport SupplierForm from './SupplierForm';\r\nimport ProductForm from '../ProductForm';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Product from './../../../../models/Product';\r\nimport Card from './../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport { getInputReadableDate } from '../../../../utils/DateUtil';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\nimport BaseTransactionPage from './../BaseTransactionPage';\r\nclass State {\r\n    transaction: Transaction = new Transaction();\r\n    selectedProduct: Product | undefined = undefined;\r\n}\r\n\r\nclass TransactionIn extends BaseTransactionPage {\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Supply\");\r\n    } \r\n    setSupplier = (supplier: Supplier) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.supplier = supplier;\r\n        this.setTransaction(transaction);\r\n    }\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product });\r\n    }\r\n    addToCart = (product: Product) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.addProductToFlow(product);\r\n        this.setState({ transaction: transaction, selectedProduct: undefined });\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.supplier || this.state.transaction.productFlowCount() == 0) {\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Continue Transaction?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.props.history.push({\r\n                    pathname: \"/transaction/productin/confirm\",\r\n                    state: { transaction: this.state.transaction }\r\n                })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const selectedProduct: Product | undefined = this.state.selectedProduct;\r\n        const transaction: Transaction = this.state.transaction;\r\n        return (\r\n            <div id=\"TransactionIn\" className=\"container-fluid\">\r\n                <h2>Transaction :: SUPPLY </h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                    <p />\r\n                    <FormGroup label=\"Location\">\r\n                        <span className=\"form-control\" >{this.getMasterHealthCenter().name} </span>\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductForm setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\"><SupplierForm setSupplier={this.setSupplier} /></div>\r\n                </div>\r\n                <Card title=\"Selected Product\">\r\n                    {selectedProduct ?\r\n                        <SelectedProductDetail addToCart={this.addToCart} product={selectedProduct} /> :\r\n                        <i>No Product</i>\r\n                    }\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Name\", \"Qty\", \"Unit\", \"Pice @Unit\", \"Generic\", \"EXP Date\", \"Action\")}\r\n                            <tbody>\r\n                                {transaction.productFlows.map((productFlow, i) => {\r\n                                    return <ProductFlowItemInput\r\n                                        updateProductFlow={this.updateProductFlow}\r\n                                        productFlow={productFlow} key={\"PF_ITEM_\" + i}\r\n                                        index={i} remove={this.removeProductFlow} />\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={7} >\r\n                                        <AnchorButton show={transaction.productFlowCount() > 0} onClick={this.removeAll} className=\"btn btn-danger\" iconClassName=\"fas fa-times\" >Remove All</AnchorButton>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {transaction.supplier && transaction.productFlowCount() > 0 ?\r\n                           this.buttonSubmitTransaction(transaction) : null\r\n                        }\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductFlowItemInput = (props: { productFlow: ProductFlow, updateProductFlow(e: ChangeEvent): void, index: number, remove(index: number): void }) => {\r\n    const product: Product = props.productFlow.product;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{product.name}</td>\r\n        <td><input required min={1} type=\"number\" className=\"form-control\" name=\"count\" data-index={props.index} onChange={props.updateProductFlow}\r\n            value={props.productFlow.count} />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>\r\n            <input required type=\"number\" className=\"form-control\" name=\"price\" data-index={props.index} onChange={props.updateProductFlow}\r\n                value={props.productFlow.price} />\r\n        </td>\r\n        <td>\r\n            <input   type=\"checkbox\" className=\"form-control\" name=\"generic\" data-index={props.index} onChange={props.updateProductFlow}\r\n                checked={props.productFlow.generic==true} />\r\n        </td>\r\n        <td>\r\n            <input required type=\"date\" className=\"form-control\" name=\"expiredDate\" data-index={props.index} onChange={props.updateProductFlow}\r\n                value={getInputReadableDate(props.productFlow.expiredDate ?? new Date())} />\r\n        </td>\r\n        <td><AnchorButton iconClassName=\"fas fa-times\" className=\"btn btn-danger\" onClick={(e) => {\r\n            props.remove(props.index);\r\n        }} /></td>\r\n    </tr>)\r\n}\r\n\r\nconst SelectedProductDetail = (props: { product: Product, addToCart(product: Product): void }) => {\r\n    return (\r\n        <div>\r\n            <FormGroup label=\"Name\">{props.product.name}</FormGroup>\r\n            <FormGroup label=\"Unit\">{props.product.unit?.name}</FormGroup>\r\n            <FormGroup label=\"Utility Tool\">{props.product.utilityTool == true ? \"Yes\" : \"No\"}</FormGroup>\r\n            <FormGroup label=\"Description\">{props.product.description}</FormGroup>\r\n            <AnchorButton className=\"btn btn-dark\" iconClassName=\"fas fa-plus\" onClick={(e) => props.addToCart(props.product)}>Add To Cart</AnchorButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionIn))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Customer from '../../../../models/Customer';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    customer?: Customer;\r\n    customerNotFound: boolean;\r\n    loading: boolean;\r\n    code: string\r\n}\r\nclass CustomerForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        customerNotFound: false, loading: false, code: \"\"\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchCustomer = (e) => {\r\n        e.preventDefault();\r\n        e.preventDefault();\r\n        const code: string = this.state.code;\r\n        if (code.trim() == \"\") return;\r\n        this.loadCustomer(code);\r\n    }\r\n    customerLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Customer not found\");\r\n        }\r\n        if (this.props.setCustomer) {\r\n            this.props.setCustomer(response.entities[0]);\r\n        }\r\n        this.setState({ customer: response.entities[0], customerNotFound: false });\r\n    }\r\n    customerNotFound = (e: any) => {\r\n        this.setState({ customerNotFound: true });\r\n    }\r\n    loadCustomer = (code: string) => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(this.masterDataService.getByKey,\r\n            this.customerLoaded, this.customerNotFound, 'customer', 'code', code);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ code: \"\" })\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchCustomer} >\r\n                <Modal toggleable={true} title=\"Customer form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/customer\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Customer code\" value={this.state.code} onChange={this.updateField} required className=\"form-control\" name=\"code\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <CustomerDetail loading={this.state.loading} customer={this.state.customer} notFound={this.state.customerNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst CustomerDetail = (props: { loading: boolean, customer?: Customer, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Customer not found</div></div>\r\n    }\r\n    if (!props.customer) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select customer</div></div>\r\n    }\r\n    const customer: Customer = props.customer;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{customer.name}</h2>\r\n            <p>{customer.age} years old</p>\r\n            <address>\r\n                {customer.address}<br />\r\n                {/* <abbr title=\"Contact\">Contact: </abbr>{customer.a} */}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(CustomerForm))","import React from 'react'\r\nimport Product from \"../../../../models/Product\";\r\nimport ProductFlow from \"../../../../models/ProductFlow\";\r\nimport Transaction from \"../../../../models/Transaction\";\r\nimport FormGroup from \"../../../form/FormGroup\"; \r\nimport { ChangeEvent } from 'react';\r\nimport HealthCenter from './../../../../models/HealthCenter';\r\nimport Modal from './../../../container/Modal';\r\nimport AnchorButton from './../../../navigation/AnchorButton';\r\n\r\nexport const HealthCenterForm = (props: {value?:HealthCenter, healthCenters:HealthCenter[], setHealthCenter(e:any):void }) => {\r\n\r\n    return (<form>\r\n         <Modal toggleable={true}  title=\"Health Center Destination\">\r\n            <FormGroup label=\"Health Center List\">\r\n                <select value={props.value?.id} className=\"form-control\" onChange={props.setHealthCenter}>\r\n                    {props.healthCenters.map((hc,i)=>{\r\n                        return <option value={hc.id} key={\"hc-frm-\"+i}>{hc.name}</option>\r\n                    })}\r\n                </select>\r\n            </FormGroup>\r\n         </Modal>\r\n    </form>)\r\n}\r\n\r\nexport const DestinationInfo  = (props:{transaction:Transaction}) => {\r\n    const destination = props.transaction.destination;\r\n    const healthCenterDestionation = props.transaction.healthCenterDestination;\r\n    const customer = props.transaction.customer;\r\n    return (\r\n        <FormGroup >\r\n            {destination== \"HEALTH_CENTER\"?  healthCenterDestionation?.name ?? <i className=\"text-danger\">No Health Center</i>:null}\r\n            {destination== \"CUSTOMER\" ? customer?.name ?? <span className=\"text-danger\"><i className=\"fas fa-exclamation-circle\"/> No Customer</span>:null}\r\n        </FormGroup>\r\n    )\r\n}\r\nexport const ProductFlowItemInput = (props: { productFlow: ProductFlow, updateProductFlow(e: ChangeEvent): void, index: number, remove(index: number): void }) => {\r\n    const product: Product = props.productFlow.product;\r\n    const productFlow: ProductFlow = props.productFlow;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{productFlow.referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        \r\n        <td>{productFlow.referenceProductFlow?.stock} </td>\r\n        <td><input required min={1} max={productFlow.referenceProductFlow?.stock} type=\"number\" className=\"form-control\" name=\"count\" data-index={props.index} onChange={props.updateProductFlow}\r\n            value={productFlow.count} />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{productFlow.referenceProductFlow?.generic?\"Yes\":\"No\"} </td>\r\n        <td>\r\n            {new Date(productFlow.referenceProductFlow?.expiredDate ?? new Date()).toDateString()}\r\n        </td>\r\n        <td><AnchorButton iconClassName=\"fas fa-times\" className=\"btn btn-danger\" onClick={(e) => {\r\n            props.remove(props.index);\r\n        }} /></td>\r\n    </tr>)\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleWarning extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={this.props.style} className=\"alert alert-warning\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport CustomerForm from './CustomerForm';\r\nimport ProductForm from '../ProductForm';\r\nimport Product from './../../../../models/Product';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Card from '../../../container/Card';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\nimport Modal from './../../../container/Modal';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorButton from './../../../navigation/AnchorButton';\r\nimport Customer from './../../../../models/Customer';\r\nimport HealthCenter from './../../../../models/HealthCenter';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport BaseTransactionPage from './../BaseTransactionPage';\r\nimport { ProductFlowItemInput, HealthCenterForm, DestinationInfo } from './transactionOutForms';\r\nimport SimpleWarning from './../../../alert/SimpleWarning';\r\nconst CUSTOMER = \"CUSTOMER\", HEALTH_CENTER = \"HEALTH_CENTER\";\r\n\r\nclass State {\r\n    selectedProduct: Product | undefined = undefined;\r\n    transaction: Transaction = new Transaction();\r\n    availableProducts: ProductFlow[] | undefined = undefined;\r\n    healthCenters: HealthCenter[] = [];\r\n    loadingProducts: boolean = false;\r\n}\r\nclass TransactionOut extends BaseTransactionPage {\r\n\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Distribution\");\r\n        this.state.transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n    }\r\n\r\n    updateDestination = (e) => {\r\n        const destination = e.target.value;\r\n        const transaction = this.state.transaction;\r\n\r\n        if (destination == CUSTOMER) {\r\n            transaction.healthCenterDestination = undefined;\r\n        } else if (destination == HEALTH_CENTER) {\r\n            transaction.customer = undefined;\r\n\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n            transaction.healthCenterDestination = this.state.healthCenters[0];\r\n        }\r\n        transaction.destination = destination;\r\n        this.setState({\r\n            selectedProduct: undefined,\r\n            availableProducts: [], transaction: transaction\r\n        });\r\n    }\r\n\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            this.setState({ healthCenters: [{ id: -1, name: \"NO DATA, Please Check Master Data\" }] });\r\n            return;\r\n        }\r\n        const transaction = this.state.transaction;\r\n        if (!transaction.healthCenterLocation) {\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n        }\r\n        this.masterDataService.setHealthCenters(response.entities);\r\n        this.setState({ healthCenters: response.entities, transaction: transaction });\r\n    }\r\n\r\n    loadHealthCenters = (force: boolean = false) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.healthCenterLocation = undefined;\r\n\r\n        if (!force && this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n\r\n        this.setState({ healthCenters: [], transaction: transaction, availableProduct: [] }, ()=> {\r\n            this.commonAjax(\r\n                this.masterDataService.loadHealthCenters,\r\n                this.healthCentersLoaded, this.showCommonErrorAlert,\r\n            )\r\n        });        \r\n    }\r\n\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product }, this.loadAvailableProducts);\r\n    }\r\n\r\n    availableProductsLoaded = (response: WebResponse) => {\r\n        this.setState({ availableProducts: response.entities, loadingProducts: false });\r\n    }\r\n    availableProductsNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ loadingProducts: false });\r\n    }\r\n    loadAvailableProducts = () => {\r\n        if (!this.state.selectedProduct || !this.state.transaction.healthCenterLocation) {\r\n            console.warn(\"(!this.state.selectedProduct || !this.state.selectedHealthCenter)\");\r\n            return;\r\n        }\r\n        if (this.state.loadingProducts) return;\r\n        this.commonAjax(\r\n            this.inventoryService.getAvailableProducts,\r\n            this.availableProductsLoaded,\r\n            this.availableProductsNotLoaded,\r\n            this.state.selectedProduct.code,\r\n            this.state.transaction.healthCenterLocation\r\n        )\r\n        this.setState({ loadingProducts: true });\r\n    }\r\n    didMountCallback = () => {\r\n        this.loadHealthCenters();\r\n    } \r\n    addToCart = (availableProductFlow: ProductFlow) => {\r\n        const productFlow: ProductFlow = ProductFlow.fromReference(availableProductFlow);\r\n        const transaction = this.state.transaction;\r\n        transaction.addProductFlow(productFlow);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateSelectedHealthCenter = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (this.state.transaction.destination == HEALTH_CENTER) return;\r\n        this.showConfirmation(\"Change Location?\").then((ok) => {  if (!ok) return;\r\n            const transaction = new Transaction();\r\n            transaction.healthCenterLocation = healthCenters[0];\r\n            if (healthCenters.length > 0) {\r\n                this.setState({\r\n                    selectedProduct: undefined,\r\n                    availableProducts: [],\r\n                    transaction: transaction\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n    setCustomer = (customer: Customer) => {\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction.customer = customer;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.healthCenterLocation || (!this.state.transaction.customer && !this.state.transaction.healthCenterDestination)) {\r\n            this.showError(\"Please complete fields\");\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Continue Transaction?\").then((ok) => { if (!ok) return;\r\n            this.props.history.push({\r\n                pathname: \"/transaction/productout/confirm\",\r\n                state: { transaction: this.state.transaction }\r\n            })\r\n        })\r\n    }\r\n    setHealthCenterDestination = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLSelectElement;\r\n        const selecteds = this.state.healthCenters.filter((h) => { return h.id == parseInt(target.value ?? \"0\") });\r\n        if (selecteds.length == 0) return;\r\n        const transaction = this.state.transaction;\r\n        transaction.healthCenterDestination = selecteds[0];\r\n        this.setTransaction(transaction);\r\n    }\r\n    render() {\r\n        const availableProducts: ProductFlow[] = this.state.availableProducts ?? [];\r\n        const transaction: Transaction = this.state.transaction;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters;\r\n        if (!transaction.healthCenterLocation || healthCenters.length == 0) {\r\n            return <div id=\"TransactionOut\" className=\"container-fluid\">\r\n                <h2>Transaction :: DISTRIBUTION</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div id=\"TransactionOut\" className=\"container-fluid\">\r\n                <h2>Transaction :: DISTRIBUTION {transaction.healthCenterLocation?.name}</h2>\r\n                <form onSubmit={(e) => { e.preventDefault() }} className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                    <p />\r\n                    <FormGroup label=\"Location\">\r\n                        <select autoComplete=\"off\" value={transaction.healthCenterLocation?.id} onChange={this.updateSelectedHealthCenter} className=\"form-control\">\r\n                            {healthCenters.map((healthCenter, i) => {\r\n                                return (<option key={\"opt-location-\" + i} value={healthCenter.id}>{healthCenter.name}</option>)\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Destination\">\r\n                        <select autoComplete=\"off\" value={transaction.destination} onChange={this.updateDestination} className=\"form-control\">\r\n                            <option value={CUSTOMER} >Customer</option>\r\n                            {transaction.healthCenterLocation?.id == this.getMasterHealthCenter().id ?\r\n                                <option value={HEALTH_CENTER}>HealthCenter</option> : null}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <DestinationInfo transaction={transaction} />\r\n                    <AnchorButton iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary btn-sm\" onClick={(e) => this.loadHealthCenters(true)} >Reload Location</AnchorButton>\r\n                </form>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductForm setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\">\r\n                        {transaction.destination == CUSTOMER ?\r\n                            <CustomerForm setCustomer={this.setCustomer} /> :\r\n                            <HealthCenterForm value={transaction.healthCenterDestination} setHealthCenter={this.setHealthCenterDestination}\r\n                                healthCenters={this.state.healthCenters} />\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n                <Modal toggleable={true} title={\"Available Products at \" + transaction.healthCenterLocation?.name}>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Stock Id\", \"Name\", \"Actual\", \"Used\", \"Stock\", \"Unit\", \"EXP Date\", \"Action\")}\r\n                        <tbody>\r\n                            {this.state.loadingProducts ?\r\n                                <tr><td colSpan={9}><Spinner /></td></tr>\r\n                                :\r\n                                availableProducts.length == 0? <tr><td colSpan={9}><SimpleWarning children=\"No Data\" /></td></tr>:\r\n                                availableProducts.map((productFlow, i) => {\r\n                                    const product: Product = productFlow.product ?? new Product();\r\n                                    const alreadyAdded = transaction.hasProductFlowReferenceid(productFlow.id ?? 0);\r\n                                    return (\r\n                                        <tr key={\"pf-tr-\" + i}>\r\n                                            <td>{i + 1}</td> <td>{productFlow.id}</td>\r\n                                            <td>{product.name} ({product.code})</td> \r\n                                            <td>{productFlow.count} </td>\r\n                                            <td>{productFlow.usedCount} </td>\r\n                                            <td>{beautifyNominal(productFlow.stock)}</td>\r\n                                            <td>{product.unit?.name}</td>\r\n                                            <td>{productFlow.generic?\"Yes\":\"No\"}</td>\r\n                                            <td>{productFlow.expiredDate ? new Date(productFlow.expiredDate).toDateString() : \"-\"}</td>\r\n                                            <td>\r\n                                                {alreadyAdded ? <i className=\"fas fa-check text-success\" /> : null}\r\n                                                <AnchorButton show={alreadyAdded == false} onClick={(e) => this.addToCart(productFlow)} iconClassName=\"fas fa-plus\" className=\"btn btn-dark btn-sm\" />\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                        </tbody>\r\n                    </table>\r\n                </Modal>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Stock Id\", \"Name\", \"Stock\", \"Qty\", \"Unit\", \"Generic\", \"EXP Date\", \"Action\")}\r\n                            <tbody>\r\n                                {transaction.productFlows.map((productFlow, i) => {\r\n                                    return <ProductFlowItemInput\r\n                                        updateProductFlow={this.updateProductFlow}\r\n                                        productFlow={productFlow} key={\"PF_ITEM_\" + i}\r\n                                        index={i} remove={this.removeProductFlow} />\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={8} >\r\n                                        <AnchorButton show={transaction.productFlowCount() > 0} onClick={this.removeAll} className=\"btn btn-danger\" iconClassName=\"fas fa-times\" >Remove All</AnchorButton>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {(transaction.customer || transaction.healthCenterDestination) && transaction.productFlowCount() > 0 ?\r\n                            this.buttonSubmitTransaction(transaction) : null}\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOut))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport TransactionService from './../../../../services/TransactionService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionInConfirmation extends BaseComponent {\r\n    transactionService: TransactionService;\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.transactionService = this.getServices().transactionService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.validateTransactionFromProps();\r\n        document.title = \"Transaction Confirmation\";\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productin\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaction Success\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionIN,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const transaction: Transaction | undefined = this.state.transaction;\r\n        if (!transaction) return null;\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid\">\r\n                <h2>Transaction Confirmation</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Confirm Transaction\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {transaction.code ?\r\n                        <FormGroup label=\"Code\">\r\n                            {transaction.code}\r\n                        </FormGroup> : null}\r\n                    <FormGroup label=\"Date\">\r\n                        {new Date(transaction.transactionDate).toString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Supplier\">\r\n                        {transaction.supplier?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Note\"> {transaction.description}  </FormGroup>\r\n                    <AnchorButton style={{ marginRight: '5px' }} onClick={this.back} iconClassName=\"fas fa-angle-left\" children=\"Back\" />\r\n                    <AnchorButton show={transaction.code == undefined} onClick={this.confirm} iconClassName=\"fas fa-check\" className=\"btn btn-primary\" children=\"Confirm\" />\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th><th>Name</th><th>Qty</th><th>Unit</th><th>Generic</th><th>Price @Unit</th><th>EXP Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {transaction.productFlows.map((productFlow, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={productFlow} index={i} key={\"pf-tr-cnfm-\" + i} />\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const i = props.index, productFlow = props.productFlow;\r\n    return (<tr  >\r\n        <td>{i + 1}</td>\r\n        <td>{productFlow.product.name}</td>\r\n        <td>{beautifyNominal(productFlow.count)}</td>\r\n        <td>{productFlow.product.unit?.name}</td>\r\n        <td>{productFlow.generic?\"Yes\":\"No\"}</td>\r\n        <td>{beautifyNominal(productFlow.price)}</td>\r\n        <td>{productFlow.expiredDate ? new Date(productFlow.expiredDate).toDateString() : \"-\"}</td>\r\n    </tr>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionInConfirmation))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Modal from './../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport TransactionService from './../../../../services/TransactionService';\r\nimport ReportService from './../../../../services/ReportService';\r\nimport AttachmentInfo from './../../../../models/AttachmentInfo';\r\nclass IState {\r\n    transaction?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionDetail extends BaseComponent {\r\n    transactionService: TransactionService;\r\n    reportService:ReportService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.transactionService = this.getServices().transactionService;\r\n        this.reportService = this.getServices().reportService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.validateTransactionFromProps();\r\n        document.title = \"Transaction Detail\";\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ transaction: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transaction: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.loadData();\r\n    }\r\n    loadData = () => {\r\n        console.debug(\" this.state.transactionCode: \", this.state.transactionCode);\r\n        this.commonAjax(\r\n            this.transactionService.getTransactionByCode,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    }\r\n    setTransactionCode = (e) => {\r\n        this.setState({ transactionCode: e.target.value });\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record has been successfully deleted\")\r\n        this.loadData();\r\n    }\r\n    recordNotDeleted = (e:any) => {\r\n        console.error(e);\r\n        this.showError(\"Cannot delete transaction \"+this.state.transaction?.code\r\n        +\", please delete all related stock/ product flow data\");\r\n    }\r\n    deleteRecord = (e) => {\r\n        if (!this.state.transaction) return;\r\n        this.showConfirmationDanger(\"Delete Record with code: \"+ this.state.transaction?.code+\"?\").then(ok=>{\r\n            if(!ok) return\r\n            this.commonAjax(\r\n                this.transactionService.deleteTransactionByCode,\r\n                this.recordDeleted,\r\n                this.recordNotDeleted,\r\n                this.state.transaction?.code\r\n            )\r\n        })\r\n    }\r\n    receiptCreated =(attachment:AttachmentInfo) => {\r\n        this.showConfirmation(\"Save \"+attachment.name+ \" ?\")\r\n        .then((ok) => {\r\n            if(!ok) return;\r\n            Object.assign(document.createElement('a'), {\r\n                target: '_blank',\r\n                download: attachment.name,\r\n                style: {display: 'none'},\r\n                href: attachment.dataUrl,\r\n              }).click();\r\n        })\r\n       \r\n    }\r\n    printReceipt = () => {\r\n\r\n        this.commonAjaxWithProgress(\r\n            this.reportService.printTransactionReceipt,\r\n            this.receiptCreated,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction?.code\r\n        )\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (this.props.match.params && this.props.match.params.code) {\r\n            const code = this.props.match.params.code;\r\n\r\n            this.commonAjax(\r\n                this.transactionService.getTransactionByCode,\r\n                this.recordLoaded,\r\n                this.recordNotLoaded,\r\n                code\r\n            )\r\n            return;\r\n        }\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionDetail\" className=\"container-fluid\">\r\n                <h2>Transaction Detail Page</h2>\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Transaction Info\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Transactions Record</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Search\" />\r\n                                </Fragment>\r\n                            }\r\n                        >\r\n                            <FormGroup label=\"Code\">\r\n                                <input required onChange={this.setTransactionCode} type=\"text\" placeholder=\"Transaction code\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {this.state.loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={this.state.dataNotFound == true} >Data not found</SimpleError>\r\n                                <TransactionData show={this.state.transaction != undefined} transaction={this.state.transaction} />\r\n                                <p/>\r\n                                <AnchorWithIcon onClick={this.deleteRecord} iconClassName=\"fas fa-times\" className=\"btn btn-danger\">Delete Record</AnchorWithIcon>\r\n                                <p/>\r\n                                <AnchorWithIcon onClick={this.printReceipt} iconClassName=\"fas fa-file\" className=\"btn btn-dark\">Print Receipt</AnchorWithIcon>\r\n                                <p/>\r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows : [];\r\n    const isTransOut = transaction.type != 'TRANS_IN';\r\n\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Record Id\" orientation='horizontal'>\r\n                        {transaction.id}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Code\" orientation='horizontal'>\r\n                        {transaction.code}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Type\" orientation='horizontal'>\r\n                        {transaction.type}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Date\" orientation='horizontal'>\r\n                        {new Date(transaction.transactionDate ?? new Date()).toString()}\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <Fragment>\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT_TO'} label=\"Customer\" orientation='horizontal'>\r\n                            {transaction.customer?.name}\r\n                        </FormGroup>\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT_TO_WAREHOUSE'} label=\"Health Center\" orientation='horizontal'>\r\n                            {transaction.healthCenterDestination?.name}\r\n                        </FormGroup>\r\n                        <FormGroup show={transaction.type == 'TRANS_IN'} label=\"Supplier\" orientation='horizontal'>\r\n                            {transaction.supplier?.name}\r\n                        </FormGroup>\r\n\r\n                    </Fragment>\r\n\r\n                    <FormGroup label=\"User\" orientation='horizontal'>\r\n                        {transaction.user?.displayName}\r\n                    </FormGroup>\r\n\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"alert alert-info\">\r\n                        <h5>Note:</h5>\r\n                        {transaction.description}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th>\r\n                                <th>ID</th>\r\n                                <th>Name</th>\r\n                                <th>Quantity</th>\r\n                                <th>Unit</th>\r\n                                <th>Generic</th>\r\n                                <th>EXP Date</th>\r\n                                <th>@Price</th>\r\n                                <th>Total Price</th>\r\n                                {isTransOut?<th>Stock ID</th>:null}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((pf, i) => {\r\n                                const product: Product = pf.product ?? new Product();\r\n                                const price = pf.price;\r\n                                return (\r\n                                    <tr key={\"pf-tr-\" + i}>\r\n                                        <td>{i + 1}</td>\r\n                                        <td>{pf.id}</td>\r\n                                        <td>{product.name} ({product.code})</td>\r\n                                        <td>{beautifyNominal(pf.count)}</td>\r\n                                        <td>{product.unit?.name}</td>\r\n                                        <td>{pf.generic?\"Yes\":\"No\"}</td>\r\n                                        <td>{pf.expiredDate?new Date(pf.expiredDate).toDateString():\"-\"}</td>\r\n                                        <td>{beautifyNominal(price)}</td>\r\n                                        <td>{beautifyNominal((price ?? 0) * (pf.count ?? 0))}</td>\r\n                                        {isTransOut?<td>\r\n                                            {pf.referenceProductFlow?pf.referenceProductFlow.id:\"-\"}\r\n                                        </td>:null}\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                    {/* <div className=\"alert alert-info text-left\">\r\n                        <FormGroup label=\"Total unit\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).unit)}</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Total price\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).productFlowPrice)}</p>\r\n                        </FormGroup>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionDetail))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport Product from './../../../../models/Product';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionOutConfirmation extends BaseComponent {\r\n    transactionService: TransactionService;\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.transactionService = this.getServices().transactionService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.validateTransactionFromProps();\r\n        document.title = \"Transaction Confirmation\";\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productout\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaction Success\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionOUT,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const transaction: Transaction | undefined = this.state.transaction;\r\n        if (!transaction) return null;\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid\">\r\n                <h2>Transaction Confirmation</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Confirm Transaction\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {transaction.code ?\r\n                        <FormGroup label=\"Code\">\r\n                            {transaction.code}\r\n                        </FormGroup> : null}\r\n                    <FormGroup label=\"Date\">\r\n                        {new Date(transaction.transactionDate).toString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Location\">\r\n                        {transaction.healthCenterLocation?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Customer\">\r\n                        {transaction.customer?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Health Center\">\r\n                        {transaction.healthCenterDestination?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Note\"> {transaction.description}  </FormGroup>\r\n                    <Fragment>\r\n                        <AnchorButton style={{marginRight:'5px'}} onClick={this.back} iconClassName=\"fas fa-angle-left\" children=\"Back\" />\r\n                        <AnchorButton show={transaction.code == undefined} onClick={this.confirm} iconClassName=\"fas fa-check\" className=\"btn btn-primary\" children=\"Confirm\" />\r\n                    </Fragment>\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Stock Id\", \"Name\", \"Stock\", \"Qty\", \"Unit\", \"Generic\", \"EXP Date\" )}\r\n                            \r\n                        <tbody>\r\n                            {transaction.productFlows.map((productFlow, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={productFlow} index={i} key={\"pf-tr-cnfm-\" + i} />\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const i = props.index, productFlow = props.productFlow;\r\n    const product: Product = props.productFlow.product;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{productFlow.referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        <td>{props.productFlow.referenceProductFlow?.stock} </td>\r\n        <td>{beautifyNominal(productFlow.count)}</td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{productFlow.referenceProductFlow?.generic?\"Yes\":\"No\"}</td>\r\n        <td>\r\n            {new Date(props.productFlow.expiredDate).toDateString()}\r\n        </td>\r\n    </tr>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOutConfirmation))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\n\r\n\r\nclass InventoryMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Inventory\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"InventoryMain\" className=\"container-fluid\">\r\n                <h2>Inventory Main</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(InventoryMain))","import React, { Component, Fragment } from 'react'\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    product: Product = new Product();\r\n    productFlows: ProductFlow[] = [];\r\n    location: HealthCenter = new HealthCenter();\r\n    number: number = 1;\r\n}\r\nclass ProductStockDetail extends Component<Props, State> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const product: Product = Object.assign(new Product(), this.props.product);\r\n        let stock: number = 0;\r\n        return (\r\n            <div className=\"row alert alert-light\">\r\n               <ProductImage number = {props.number} product={product} />\r\n                <div className=\"col-9\">\r\n                    <Modal title={product.name + \"(\" + product.code + \")\"} toggleable={true}>\r\n                        {props.productFlows.length == 0 ? <SimpleWarning>No Data</SimpleWarning> :\r\n                            <table className=\"table table-striped\">\r\n                                {tableHeader(\"No\", \"Stock Id\", \"Qty\", \"Used\", \"Stock\", \"Unit\", \"EXP Date\")}\r\n                                <tbody>\r\n                                {props.productFlows.map((productFlow, i) => {\r\n                                    stock += productFlow.stock;\r\n                                    return (\r\n                                        <tr key={\"PF_DETAIL_STOCK\" + productFlow.id + \"-\" + i}>\r\n                                            <td>{i + 1}</td>\r\n                                            <td>{productFlow.id}</td>\r\n                                            <td>{productFlow.count}</td>\r\n                                            <td>{productFlow.usedCount}</td>\r\n                                            <td>{productFlow.stock}</td>\r\n                                            <td>{props.product.unit?.name}</td>\r\n                                            <td>{new Date(productFlow.expiredDate).toDateString()}</td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={4}>Total Stock</td>\r\n                                    <td >{stock}</td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        }\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductImage = (props:{product:Product, number:number}) => {\r\n    const product = props.product;\r\n    return (\r\n        <div className=\"col-3\">\r\n            <div className=\"card bg-light\"  >\r\n                <img className=\"card-img-top \" src={product.getDefaultImageUrl()} />\r\n                <div className=\"card-body\">\r\n                    <p className=\"card-text\">{props.number} - {product.name}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStockDetail)","import React, { Component, Fragment } from 'react' \r\nimport ProductStockDetail from './ProductStockDetail';\r\nimport ProductStock from './../../../../models/ProductStock';\r\nimport HealthCenter from './../../../../models/HealthCenter';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    productStocks: ProductStock[] = [];\r\n    startingNumber: number = 1;\r\n    location: HealthCenter = new HealthCenter()\r\n}\r\nexport default class ProductStocksTable extends Component<Props, State> {\r\n\r\n\r\n    render() {\r\n        const stocks: ProductStock[] = this.props.productStocks;\r\n        let number: number = this.props.startingNumber;\r\n        return (\r\n            <div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\"><strong>Name</strong></div>\r\n                    <div className=\"col-9\"><strong>Detail</strong></div>\r\n                </div>\r\n                {stocks.length == 0?\r\n                <SimpleWarning style={{marginTop: '10px'}}>No Data</SimpleWarning>\r\n                :\r\n                stocks.map((stock, i) => {\r\n                    const product = stock.product;\r\n                    const producFlows = stock.productFlows;\r\n                    return (<Fragment key={\"ps-\" + i}>\r\n                        <ProductStockDetail number={number+i} location={this.props.location} product={product} productFlows={producFlows} />\r\n                    </Fragment>)\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n","import BaseEntity from './BaseEntity';\n\nexport default class Configuration extends BaseEntity{\n\texpiredWarningDays:number = 0;\n\tleadTime?:number;\n\tcycleTime?:number;\n\n\tconstructor(){\n\t\tsuper();\n\t}\n\n}\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport Filter from '../../../../models/Filter';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductStock from '../../../../models/ProductStock';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport Card from '../../../container/Card';\r\nimport ProductStocksTable from './ProductStocksTable';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport Configuration from './../../../../models/Configuration';\r\nimport { getHtmlInputElement } from './../../../../utils/ComponentUtil';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport { addDays, getDiffDays, getInputReadableDate } from './../../../../utils/DateUtil';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nclass IState {\r\n    productStocks: ProductStock[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n    totalItems: number = 0;\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    configuration: Configuration = new Configuration();\r\n}\r\n\r\nclass ProductStocks extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    inventoryService: InventoryService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.state.filter.limit = 10;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setPageTitle(\"Product Stocks\");\r\n        this.validateLoginStatus(this.loadHealthCenter);\r\n    }\r\n\r\n    updateFilterExpDate = (e: ChangeEvent) => {\r\n        const input = getHtmlInputElement(e);\r\n        let value;\r\n        if (input.type == 'date') {\r\n            const selectedDate = new Date(input.value)\r\n            const diffDay = getDiffDays(new Date(), selectedDate);\r\n            value = diffDay;\r\n            console.debug(\"diffDay: \", diffDay);\r\n        } else {\r\n            value = input.value;\r\n        }\r\n        const config = this.state.configuration;\r\n        config.expiredWarningDays = parseInt(value);\r\n        this.setState({ configuration: config });\r\n    }\r\n\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n\r\n        if (!response.entities) { return; }\r\n        this.masterDataService.setHealthCenters(response.entities ?? []);\r\n        this.setState({\r\n            healthCenters: response.entities, selectedHealthCenter:\r\n                this.getMasterHealthCenter()\r\n        },\r\n            this.loadProducts);\r\n    }\r\n\r\n    productLoaded = (response: WebResponse) => {\r\n        const config = response.configuration ?? new Configuration();\r\n        if (this.state.filter.filterExpDate) {\r\n            config.expiredWarningDays = this.state.configuration.expiredWarningDays;\r\n        }\r\n        this.setState({\r\n            totalItems: response.totalItems,\r\n            configuration: config, loading: false,\r\n            totalData: response.totalData,\r\n            productStocks: response.generalList\r\n        });\r\n    }\r\n\r\n    loadProductsAt = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter }, this.loadProducts);\r\n\r\n    }\r\n    productLoadingError = (e: any) => {\r\n        this.showCommonErrorAlert(e);\r\n        this.setState({ loading: false });\r\n    }\r\n    loadProducts = (page: number = -1) => {\r\n        this.setState({ loading: true }, () => {\r\n            if (page >= 0) {\r\n                const filter = this.state.filter;\r\n                filter.page = page;\r\n                this.setState({ filter: filter }, this.doLoadProduct)\r\n            } else {\r\n                this.doLoadProduct();\r\n            }\r\n        }\r\n        );\r\n    }\r\n    doLoadProduct = () => {\r\n        const filter = this.state.filter;\r\n        if (filter.filterExpDate && filter.ignoreEmptyValue == true) {\r\n            filter.day = this.state.configuration.expiredWarningDays;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductsInHealthCenter,\r\n            this.productLoaded, this.productLoadingError,\r\n            filter, this.state.selectedHealthCenter\r\n        )\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n\r\n        this.showConfirmation(\"Change Location? *reload to take effect\").then((ok) => {\r\n            if (!ok) return;\r\n            if (healthCenters.length > 0) {\r\n                this.setState({ selectedHealthCenter: healthCenters[0] });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    getDisplayedRecordOptions = () => {\r\n        if (this.state.totalData <= 10) { return [10] }\r\n        const range = this.state.totalData / 10;\r\n        const options: number[] = [];\r\n        let counter = 10;\r\n        for (let i = 0; i < range; i++) {\r\n            options.push(counter);\r\n            counter += 10;\r\n        }\r\n        if (counter < this.state.totalData) {\r\n            options.push(this.state.totalData);\r\n        }\r\n        return options;\r\n    }\r\n    setIgnoreEmpty = (value: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.ignoreEmptyValue = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilterExpDate = (value: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.filterExpDate = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateLimit = (e: any) => {\r\n        const value = e.target.value;\r\n        this.showConfirmation(\"Change Displayed Record?\").then((ok) => {\r\n            if (!ok) return;\r\n            const filter = this.state.filter;\r\n            filter.limit = value;\r\n            filter.page = 0;\r\n            this.setState({ filter: filter }, this.loadProducts);\r\n        });\r\n    }\r\n    render() {\r\n        if (this.state.healthCenters.length == 0) {\r\n            return (\r\n                <div id=\"ProductStocks\" className=\"container-fluid\">\r\n                    <h2>Product Stocks</h2><Spinner />\r\n                </div>\r\n            )\r\n        }\r\n        const ignoreEmptyValue = this.state.filter.ignoreEmptyValue;\r\n        const filterExpDate = this.state.filter.filterExpDate;\r\n        const expDateFilterWithin = addDays(new Date(), this.state.configuration.expiredWarningDays);\r\n        return (\r\n            <div id=\"ProductStocks\" className=\"container-fluid\">\r\n                <h2>Product Stocks</h2>\r\n                <form onSubmit={e => { e.preventDefault(); this.loadProducts(0) }} className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                    <FormGroup label=\"Location\">\r\n                        <select key=\"select-health-center\" onChange={this.updateLocation} value={this.state.selectedHealthCenter.id} className=\"form-control\">\r\n                            {this.state.healthCenters.map((healthCenter, i) => {\r\n                                return <option key={\"select-location-stock-\" + i} value={healthCenter.id} >{healthCenter.name}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Record Display\">\r\n                        <select key=\"select-displayed-record\" onChange={this.updateLimit} value={this.state.filter.limit} className=\"form-control\">\r\n                            {this.getDisplayedRecordOptions().map((value, i) => {\r\n                                return <option key={\"select-displayed-record-\" + i + \"-\" + value} value={value} >{value}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Total Items\">\r\n                        <strong >{beautifyNominal(this.state.totalItems)}</strong>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Ignore Empty Stock\">\r\n                        <ToggleButton active={ignoreEmptyValue == true} onClick={this.setIgnoreEmpty} />\r\n                    </FormGroup>\r\n                    {ignoreEmptyValue == false ? null :\r\n                        <FormGroup label=\"Max EXP Date\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-2\">\r\n                                    <ToggleButton active={filterExpDate == true} onClick={this.setFilterExpDate} />\r\n                                </div>\r\n                                {filterExpDate ? <div className=\"col-6 input-group\">\r\n                                    <input required type=\"number\" className=\"form-control-sm\" value={this.state.configuration.expiredWarningDays} onChange={this.updateFilterExpDate} />\r\n                                    <input onChange={this.updateFilterExpDate} required type=\"date\" className=\"form-control-sm\" value={getInputReadableDate(expDateFilterWithin)} />\r\n                                </div> : null}\r\n                            </div>\r\n                        </FormGroup>}\r\n\r\n                    <FormGroup>\r\n                        <button type=\"submit\" className=\"btn btn-success\" >\r\n                            <i style={{ marginRight: '5px' }} className=\"fas fa-sync-alt\" />Reload\r\n                        </button>\r\n                    </FormGroup>\r\n                </form>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <NavigationButtons\r\n                        activePage={this.state.filter.page ?? 0}\r\n                        limit={this.state.filter.limit ?? 10} totalData={this.state.totalData}\r\n                        onClick={this.loadProductsAt} />\r\n                    {this.state.loading ? <Spinner /> :\r\n                        <ProductStocksTable location={this.state.selectedHealthCenter} startingNumber={\r\n                            ((this.state.filter.page ?? 0) * (this.state.filter.limit ?? 0) + 1)\r\n                        } productStocks={this.state.productStocks} />\r\n                    }\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStocks))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Filter from './../../../models/Filter';\r\nimport HealthCenter from './../../../models/HealthCenter';\r\nimport ReportService from './../../../services/ReportService';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { getInputReadableDate } from '../../../utils/DateUtil';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport AttachmentInfo from './../../../models/AttachmentInfo';\r\nimport InventoryService from './../../../services/InventoryService';\r\nconst date = new Date();\r\nclass State {\r\n    filter: Filter = new Filter();\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    period: Date = date;\r\n}\r\nclass Report extends BaseComponent {\r\n    state: State = new State();\r\n    masterDataService: MasterDataService;\r\n    reportService: ReportService;\r\n    inventoryService: InventoryService;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.state.filter.day = date.getDay();\r\n        this.state.filter.month = date.getMonth() + 1;\r\n        this.state.filter.year = date.getFullYear();\r\n        this.reportService = this.getServices().reportService;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n    componentDidMount() {\r\n        this.setPageTitle(\"Report\");\r\n        this.validateLoginStatus(this.loadHealthCenter);\r\n\r\n    }\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n\r\n        if (!response.entities) { return; }\r\n        this.masterDataService.setHealthCenters(response.entities ?? []);\r\n        this.setState({\r\n            healthCenters: response.entities, selectedHealthCenter:\r\n                this.getMasterHealthCenter()\r\n        });\r\n    }\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (healthCenters.length > 0) {\r\n            this.setState({ selectedHealthCenter: healthCenters[0] });\r\n\r\n        }\r\n    }\r\n    reportCreated =(attachment:AttachmentInfo) => {\r\n        this.showConfirmation(\"Save \"+attachment.name+ \" ?\")\r\n        .then((ok) => {\r\n            if(!ok) return;\r\n            Object.assign(document.createElement('a'), {\r\n                target: '_blank',\r\n                download: attachment.name,\r\n                style: {display: 'none'},\r\n                href: attachment.dataUrl,\r\n              }).click();\r\n        })\r\n       \r\n    }\r\n    updatePeriod = (e) => {\r\n        const date = new Date(e.target.value);\r\n        const filter = this.state.filter;\r\n        filter.day = date.getDay();\r\n        filter.month = date.getMonth() + 1;\r\n        filter.year = date.getFullYear();\r\n        this.setState({ period: date, filter: filter });\r\n    }\r\n    loadStockOpname = () => {\r\n        const name = this.state.selectedHealthCenter.name;\r\n        const date = getInputReadableDate(this.state.period);\r\n        this.showConfirmation(\"Load stock opname \" +date+ \" in \" + name + \"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadStockOpnameReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter, this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    loadMontlyReport = () => {\r\n        const date = (this.state.period.getMonth()+1)+ \" - \"+ this.state.period.getFullYear();\r\n        this.showConfirmation(\"Load Montly Report \"+date+\"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadMontlyReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter \r\n                )\r\n            });\r\n    }\r\n    printReceiveRequestSheet = () => {\r\n        const date = (this.state.period.getMonth()+1)+ \" - \"+ this.state.period.getFullYear();\r\n        this.showConfirmation(\"Print Receive Request Sheet \"+date+\"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.printReceiveRequestSheet,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter , this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    adjustStocks = () => { \r\n        this.showConfirmation(\"Recalculate Stocks?\")\r\n            .then((ok) => { if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.inventoryService.adjustStocks,\r\n                    ()=> this.showInfo(\"Success\"),\r\n                    this.showCommonErrorAlert, \r\n                )\r\n            });\r\n    }\r\n    render() {\r\n        const period = this.state.period;\r\n        return (\r\n            <div id=\"Report\" className=\"container-fluid\">\r\n                <h2>Report</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                    <form onSubmit={e => e.preventDefault()}>\r\n                        <FormGroup label=\"Location\">\r\n                            <select autoComplete=\"off\"  key=\"select-health-center\" onChange={this.updateLocation} value={this.state.selectedHealthCenter.id} className=\"form-control\">\r\n                                {this.state.healthCenters.map((healthCenter, i) => {\r\n\r\n                                    return <option key={\"select-location-stock-\" + i} value={healthCenter.id} >{healthCenter.name}</option>\r\n                                })}\r\n                            </select>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Period\">\r\n                            <input autoComplete=\"off\" onChange={this.updatePeriod} type=\"date\" className=\"form-control\"\r\n                                value={getInputReadableDate(period)}\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            <div className=\"btn-group\">\r\n                                <AnchorButton className=\"btn btn-dark\" onClick={this.loadStockOpname} >Stock Opname</AnchorButton>\r\n                                <AnchorButton className=\"btn btn-dark\" onClick={this.loadMontlyReport} >Monthly Report</AnchorButton>\r\n                                <AnchorButton className=\"btn btn-dark\" onClick={this.printReceiveRequestSheet} >LPLPO</AnchorButton>\r\n                                <AnchorButton className=\"btn btn-dark\" onClick={this.adjustStocks} >Recalculate Stock</AnchorButton>\r\n                            </div>\r\n                        </FormGroup>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(Report))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport Configuration from '../../../models/Configuration';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup'; \r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from '../../../services/MasterDataService'; \r\nimport Spinner from './../../loader/Spinner';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nclass EditFields {\r\n    cycleTime:boolean = false; leadTime:boolean =false;\r\n    expiredWarningDays:boolean = false;\r\n}\r\nclass IState {\r\n    config?: Configuration = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditInventoryConfiguration extends BaseUpdateProfilePage {\r\n \r\n    actualConfig: Configuration = new Configuration();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Configuration Profile\");\r\n    }\r\n    loadConfiguration = () => {\r\n        this.commonAjax(\r\n            this.masterDataService.getByKey,\r\n            this.configLoaded,\r\n            this.showCommonErrorAlert,\r\n            'configuration','code','APP_CONFIG'\r\n        )\r\n    }\r\n    configLoaded = (response:WebResponse) => {\r\n        if (response.entities && response.entities.length>0){\r\n            const config = Object.assign(new Configuration(), response.entities[0]);\r\n            this.actualConfig = Object.assign(new Configuration(), response.entities[0]);\r\n            this.setState({config: config});\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadConfiguration();\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n\r\n        config[target.name] = target.value;\r\n        this.setState({ config: config });\r\n    }\r\n \r\n    setProperty = (fieldName: string, value: any) => {\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n        config[fieldName] = value;\r\n        this.setState({ config: config });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const config: Configuration | undefined = this.state.config;\r\n        const actualConfig: Configuration = this.actualConfig;\r\n        if (null == target || !config ) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            config[propertyName] = actualConfig[propertyName];\r\n        }\r\n        this.setState({ config: config, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const config: Configuration | undefined = this.getEditedRecord();\r\n        if (!config) return;\r\n        this.commonAjax(\r\n            this.masterDataService.updateConfiguration,\r\n            this.recordSaved, this.showCommonErrorAlert,\r\n            config\r\n        )\r\n    }\r\n    getEditedRecord = (): Configuration | undefined => {\r\n        const config: Configuration | undefined = this.state.config;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!config) return undefined;\r\n        const editedApplication: Configuration = new Configuration();\r\n        for (const key in editFields) { \r\n            editedApplication[key] = config[key]; \r\n        }\r\n       \r\n        return editedApplication;\r\n    }\r\n\r\n    render() {\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return <Spinner/>;\r\n        const editFields: EditFields = this.state.editFields; \r\n        return (\r\n            <div  className=\"container-fluid\">\r\n                <h2>Inventory Configuration</h2>\r\n                <Card title=\"Inventory Configuration\">\r\n                    <form onSubmit={this.saveRecord}> \r\n                        <FormGroup label=\"Cycle Time\">\r\n                            <EditField type=\"number\" edit={editFields.cycleTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"cycleTime\" toggleInput={this.toggleInput} value={config.cycleTime} />\r\n                        </FormGroup>\r\n                         \r\n                        <FormGroup label=\"Lead Time\">\r\n                            <EditField type=\"number\" edit={editFields.leadTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"leadTime\" toggleInput={this.toggleInput} value={config.leadTime} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Exp Date Warning\">\r\n                            <EditField type=\"number\" edit={editFields.expiredWarningDays} updateProperty={this.updateProfileProperty} \r\n                            name=\"expiredWarningDays\" toggleInput={this.toggleInput} value={config.expiredWarningDays} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(EditInventoryConfiguration))","\r\nimport ProductInventory from './ProductInventory';\r\nexport default class InventoryData {\r\n\r\n    inventories:ProductInventory[] = [];\r\n    totalItemsSum:number = 0;\r\n    totalExpiredSum:number = 0;\r\n    totalWillExpiredSum:number = 0;\r\n}","import React, { Component } from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Card from '../../container/Card';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport InventoryData from './../../../models/InventoryData';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport SimpleWarning from '../../alert/SimpleWarning';\r\nimport Configuration from './../../../models/Configuration';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport { setInventoryData } from '../../../redux/actionCreators';\r\n\r\nclass State {\r\n    inventoryData: InventoryData = new InventoryData();\r\n    configuration:Configuration = new Configuration();\r\n}\r\nclass DashboardInfo extends BaseComponent {\r\n\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus(this.loadInventoriesData);\r\n        this.setPageTitle(\"Dashboard Info\");\r\n\r\n    }\r\n    inventoriesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ inventoryData: response.inventoryData, configuration: response.configuration },\r\n            \r\n        ()=> {\r\n            this.props.setInventoryData(response)\r\n        });\r\n    }\r\n    loadInventoriesData = (force:boolean = false) => {\r\n        if (!force && this.getInventoryData()) {\r\n            this.setState({ inventoryData: this.getInventoryData(), configuration: this.getInventoryConfig() });\r\n            return;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getInventoriesData,\r\n            this.inventoriesDataLoaded,\r\n            this.showCommonErrorAlert,\r\n\r\n        )\r\n    }\r\n\r\n    render() {\r\n\r\n        const totalItems = this.state.inventoryData.totalItemsSum; \r\n        const totalWillExpired = this.state.inventoryData.totalWillExpiredSum;\r\n        const totalExpired = this.state.inventoryData.totalExpiredSum;\r\n        const totalSafe = totalItems - totalExpired - totalWillExpired;\r\n        return (\r\n            <div id=\"DashboardInfo\" className=\"container-fluid\">\r\n                <h2>Info</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n                <div className=\"row\">\r\n                    {/* <div className=\"col-4\">\r\n                        <Card className=\"bg-info text-light\" title=\"Transaction Today\">\r\n                            \r\n                        </Card>\r\n                    </div> */}\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-success text-light\" title=\"Total Items\">\r\n                            <h3 className=\"text-center\"> {beautifyNominal(totalSafe)}</h3>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-warning\" title=\"Product Will Expired\">\r\n                            <h3 className=\"text-center\">{beautifyNominal(totalWillExpired)}</h3>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-danger text-warning\" title=\"Product Expired\">\r\n                            <h3 className=\"text-center\">{beautifyNominal(totalExpired)}</h3>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-10\">\r\n                        <p/>\r\n                        <SimpleWarning>\r\n                            <p>Total Items: <strong>{beautifyNominal(totalItems)}</strong></p>\r\n                            <p>Expire warning: {this.state.configuration.expiredWarningDays} days</p>\r\n                        </SimpleWarning>\r\n                        <div className=\"btn-group\">\r\n                            <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" onClick={()=>this.loadInventoriesData(true)} >Reload</AnchorWithIcon>\r\n                            <AnchorWithIcon iconClassName=\"fas fa-list\" to=\"/inventory/status\" >Detail</AnchorWithIcon>\r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setInventoryData: (payload: WebResponse) => dispatch(setInventoryData(payload)), \r\n});\r\nexport default withRouter(\r\n    connect(\r\n        mapCommonUserStateToProps,\r\n        mapDispatchToProps,\r\n    )(DashboardInfo)\r\n)\r\n","import React from 'react'\r\nimport BaseComponent from './../../BaseComponent'; \r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport InventoryData from './../../../models/InventoryData';\r\nimport Configuration from './../../../models/Configuration';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Card from '../../container/Card';\r\nimport { setInventoryData } from '../../../redux/actionCreators';\r\nimport { tableHeader } from './../../../utils/CollectionUtil';\r\nimport ProductInventory from './../../../models/ProductInventory';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nclass State {\r\n    inventoryData: InventoryData = new InventoryData();\r\n    configuration:Configuration = new Configuration();\r\n}\r\nclass InventoryStatus extends BaseComponent {\r\n\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n    componentDidMount() {\r\n        this.setPageTitle(\"Inventory Status\")\r\n        this.validateLoginStatus(this.loadInventoriesData);\r\n    }\r\n    inventoriesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ inventoryData: response.inventoryData, configuration: response.configuration },\r\n            \r\n        ()=> {\r\n            this.props.setInventoryData(response)\r\n        });\r\n    }\r\n    loadInventoriesData = (force:boolean = false) => {\r\n        if (!force && this.getInventoryData()) {\r\n            this.setState({ inventoryData: this.getInventoryData(), configuration: this.getInventoryConfig() });\r\n            return;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getInventoriesData,\r\n            this.inventoriesDataLoaded,\r\n            this.showCommonErrorAlert,\r\n\r\n        )\r\n    }\r\n    render() {\r\n        const config = this.state.configuration;\r\n        const inventoryData = this.state.inventoryData;\r\n        const inventories: ProductInventory[] = this.state.inventoryData.inventories;\r\n        let totalSaveSum:number = 0;\r\n        return   (\r\n            <div className=\"container-fluid\">\r\n                <Card title=\"Inventory Status\">\r\n                    <div>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" onClick={()=>this.loadInventoriesData(true)}>Reload</AnchorWithIcon>\r\n                        <p/>\r\n                    </div>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Location\", \"Total\", \"Safe\", \"Expired in \"+config.expiredWarningDays+\" days\", \"Expired\")}\r\n                        <tbody>\r\n                            {inventories.map((inventory, i)=>{\r\n                                const safe = inventory.totalItems-inventory.expiredItems-inventory.willExpiredItems;\r\n                                totalSaveSum+=safe;\r\n                                return (\r\n                                    <tr key={\"p-inv-\"+i}>\r\n                                        <td>{i+1}</td>\r\n                                        <td>{inventory.location.name}</td>\r\n                                        <td >{beautifyNominal(inventory.totalItems)}</td>\r\n                                        <td >{beautifyNominal(safe)}</td>\r\n                                        <td className={inventory.willExpiredItems>0?\"bg-warning\":\"\"}>\r\n                                            {beautifyNominal(inventory.willExpiredItems)} </td>\r\n                                        <td className={inventory.expiredItems>0?\"bg-danger text-warning\":\"\"}>\r\n                                            {beautifyNominal(inventory.expiredItems)} </td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                            <tr className=\"font-weight-bold\">\r\n                                <td colSpan={2}>Total</td>\r\n                                <td>{beautifyNominal(inventoryData.totalItemsSum)}</td>\r\n                                <td>{beautifyNominal(totalSaveSum)}</td>\r\n                                <td>{beautifyNominal(inventoryData.totalWillExpiredSum)}</td>\r\n                                <td>{beautifyNominal(inventoryData.totalExpiredSum)}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setInventoryData: (payload: WebResponse) => dispatch(setInventoryData(payload)), \r\n});\r\nexport default withRouter(\r\n    connect(\r\n        mapCommonUserStateToProps,\r\n        mapDispatchToProps,\r\n    )(InventoryStatus)\r\n)","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Login from '../pages/login/Login';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from './../../models/Menu';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport AboutUs from './../pages/home/AboutUs';\r\nimport TransactionMain from '../pages/transaction/TransactionMain';\r\nimport TransactionIn from '../pages/transaction/in/TransactionIn';\r\nimport TransactionOut from '../pages/transaction/out/TransactionOut';\r\nimport TransactionInConfirmation from '../pages/transaction/in/TransactionInConfirmation';\r\nimport TransactionDetail from '../pages/transaction/detail/TransactionDetail';\r\nimport TransactionOutConfirmation from '../pages/transaction/out/TransactionOutConfirmation';\r\nimport InventoryMain from '../pages/inventory/InventoryMain';\r\nimport ProductStocks from '../pages/inventory/stock/ProductStocks';\r\nimport Report from '../pages/inventory/Report';\r\nimport EditInventoryConfiguration from '../pages/settings/EditInventoryConfiguration';\r\nimport DashboardInfo from '../pages/dashboard/DashboardInfo';\r\nimport InventoryStatus from '../pages/inventory/InventoryStatus';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <div style={{ paddingTop: '65px' }}>\r\n                <Switch>\r\n                    <Route exact path=\"/login\" render={\r\n                        (props: any) =>\r\n                            <Login />\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/about\" render={\r\n                        (props: any) =>\r\n                            <AboutUs />\r\n                    } />\r\n\r\n\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n                </Switch>\r\n                <Dashboard />\r\n                <Setting />\r\n                <Transaction />\r\n                <Inventory />\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\nconst Dashboard = (props) => {\r\n\r\n    return (\r\n\r\n        <Switch>\r\n            <Route exact path=\"/dashboard\" render={\r\n                (props: any) =>\r\n                    <DashboardMain />\r\n            } />\r\n            <Route exact path=\"/dashboard/info\" render={\r\n                (props: any) =>\r\n                    <DashboardInfo />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\nconst Setting = (props) => {\r\n    return <Switch>\r\n        {/* -------- settings --------- */}\r\n        <Route exact path=\"/settings\" render={\r\n            (props: any) =>\r\n                <SettingsMain />\r\n        } />\r\n        <Route exact path=\"/settings/user-profile\" render={\r\n            (props: any) =>\r\n                <UserProfile />\r\n        } />\r\n        <Route exact path=\"/settings/app-profile\" render={\r\n            (props: any) =>\r\n                <EditApplicationProfile />\r\n        } />\r\n        <Route exact path=\"/settings/inventory-config\" render={\r\n            (props: any) =>\r\n                <EditInventoryConfiguration />\r\n        } />\r\n    </Switch>\r\n}\r\nconst Transaction = (props) => {\r\n    return <Switch>\r\n        {/*TRANSACTION*/}\r\n        <Route exact path=\"/transaction\" render={\r\n            (props: any) =>\r\n                <TransactionMain />\r\n        } />\r\n        <Route exact path=\"/transaction/productin\" render={\r\n            (props: any) => <TransactionIn />\r\n        } />\r\n        <Route exact path=\"/transaction/productin/confirm\" render={\r\n            (props: any) => <TransactionInConfirmation />\r\n        } />\r\n        <Route exact path=\"/transaction/productout\" render={\r\n            (props: any) =>\r\n                <TransactionOut />\r\n        } />\r\n        <Route exact path=\"/transaction/productout/confirm\" render={\r\n            (props: any) => <TransactionOutConfirmation />\r\n        } />\r\n        <Route exact path=\"/transaction/detail\" render={\r\n            (props: any) =>\r\n                <TransactionDetail />\r\n        } />\r\n        <Route exact path=\"/transaction/detail/:code\" render={\r\n            (props: any) =>\r\n                <TransactionDetail />\r\n        } />\r\n    </Switch>\r\n}\r\nconst Inventory = (props) => {\r\n    return <Switch>\r\n        {/*INVENTORY*/}\r\n        <Route exact path=\"/inventory\" render={\r\n            (props: any) =>\r\n                <InventoryMain />\r\n        } />\r\n        <Route exact path=\"/inventory/stock\" render={\r\n            (props: any) =>\r\n                <ProductStocks />\r\n        } />\r\n        <Route exact path=\"/inventory/status\" render={\r\n            (props: any) =>\r\n                <InventoryStatus />\r\n        } />\r\n        <Route exact path=\"/inventory/report\" render={\r\n            (props: any) =>\r\n                <Report />\r\n        } />\r\n    </Switch>\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import BaseEntity from './BaseEntity'; \nimport { uniqueId } from './../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string; \n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from './../../models/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n      \r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li  className={\"sidebar-item \"+menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}><div\r\n            style={{\r\n                textAlign: 'center', paddingTop: '10px',\r\n                paddingBottom: '10px'\r\n            }}>\r\n            <h3 className=\"text-dark\">\r\n                <i className={Menu.getIconClassName(props.brand)}></i>\r\n            </h3>\r\n            <Link to={props.brand.url} style={{textDecoration:'none'}}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n        </div></li>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from './../../models/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n            <div id=\"main-layout\">\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu}  />\r\n                <div id=\"page-content\" className=\"container-fluid\" style={{ margin: 0, padding: 0, minHeight: '80vh' }}>\r\n                    {/* <div className=\"?\"> */}\r\n                    \r\n                    <div className=\"container-fluid\" style={{zIndex:  1 , position:'absolute'}} id={showSidebar ? \"app-content\" : \"content\"}>\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus}  />\r\n                    </div>\r\n                    {showSidebar == true ?  \r\n                            <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                         : null}\r\n                    {/* </div> */}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { withRouter  } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/WebResponse';\nimport Spinner from './component/loader/Spinner';\n\ninterface IState {\n  loading: boolean;\n  loadingPercentage: number;\n  requestId?: undefined;\n  mainAppUpdated: Date;\n  showAlert: boolean;\n  realtime: boolean;\n}\nclass App extends Component<any, IState> {\n\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\",\n    message: \"Info\",\n    yesOnly: false,\n    onOk: () => { },\n    onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      ...this.state,\n      loading: false,\n      loadingPercentage: 0,\n      requestId: undefined,\n      mainAppUpdated: new Date(),\n      showAlert: false,\n      realtime: false,\n    };\n    \n    this.props.setMainApp(this);\n   \n\n  }\n  refresh() {\n    this.setState({ mainAppUpdated: new Date() });\n  }\n\n  requestAppId() {\n    this.props.requestAppId(this);\n  }\n\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    try{\n      this.decrementLoadings();\n      if (this.loadings == 0) {\n        this.setState({ loading: false, loadingPercentage: 0 });\n      }\n    } catch(e) {\n      console.error(e);\n    }\n\n  }\n\n  handleMessage(msg: WebResponse) {\n    const percentageFloat:number = msg.percentage??0; \n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n    \n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  render() {\n     \n    if (!this.props.requestId) {\n      \n      return (\n        <div style={{paddingTop:'10%'}}>\n          <Spinner/>\n        </div>\n      )\n    }\n    const usedHost = url.contextPath();\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout />\n        <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={(client) => { this.clientRef = client }} />\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\nfunction updateFavicon(profile: any) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\n      document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl() + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  requestAppId: (app: App) => dispatch(actions.requestAppId(app)),\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app))\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}